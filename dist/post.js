import{E as e,N as t,S as n,T as r,_ as i,g as a,h as o,i as s,r as c,t as l,x as u,y as d}from"./state-keys-BNMt_K2W.js";var f=t(e(),1);async function p(e={}){let t=e.logger??s({phase:`post`}),p=f.getState(l.SHOULD_SAVE_CACHE),m=f.getState(l.CACHE_SAVED),h=f.getState(l.SESSION_ID)||null;if(t.debug(`Post-action state`,{shouldSaveCache:p,cacheSaved:m,sessionId:h}),p!==`true`){t.info(`Skipping post-action: event was not processed`,{shouldSaveCache:p});return}if(m===`true`){t.info(`Skipping post-action: cache already saved by main action`,{cacheSaved:m});return}try{await c({components:{agentIdentity:`github`,repo:a(),ref:o(),os:n()},runId:i(),logger:t,storagePath:u(),authPath:d()})?t.info(`Post-action cache saved`,{sessionId:h}):t.info(`Post-action: no cache content to save`,{sessionId:h})}catch(e){t.warning(`Post-action cache save failed (non-fatal)`,{error:r(e)})}}await p();export{p as runPost};