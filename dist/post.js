import{M as e,S as t,T as n,_ as r,g as i,h as a,i as o,r as s,t as c,x as l,y as u}from"./state-keys-NAy_UZ5f.js";var d=e(n(),1);async function f(e={}){let n=e.logger??o({phase:`post`}),f=d.getState(c.SHOULD_SAVE_CACHE),p=d.getState(c.CACHE_SAVED),m=d.getState(c.SESSION_ID)||null;if(n.debug(`Post-action state`,{shouldSaveCache:f,cacheSaved:p,sessionId:m}),f!==`true`){n.info(`Skipping post-action: event was not processed`,{shouldSaveCache:f});return}if(p===`true`){n.info(`Skipping post-action: cache already saved by main action`,{cacheSaved:p});return}try{await s({components:{agentIdentity:`github`,repo:i(),ref:a(),os:t()},runId:r(),logger:n,storagePath:l(),authPath:u()})?n.info(`Post-action cache saved`,{sessionId:m}):n.info(`Post-action: no cache content to save`,{sessionId:m})}catch(e){n.warning(`Post-action cache save failed (non-fatal)`,{error:e instanceof Error?e.message:String(e)})}}await f();export{f as runPost};