import{A as e,C as t,S as n,c as r,d as i,f as a,i as o,l as s,p as c,r as l,s as u,t as d}from"./state-keys-CorD8o9k.js";var f=e(t(),1);async function p(e={}){let t=e.logger??o({phase:`post`}),p=f.getState(d.SHOULD_SAVE_CACHE),m=f.getState(d.CACHE_SAVED),h=f.getState(d.SESSION_ID)||null;if(t.debug(`Post-action state`,{shouldSaveCache:p,cacheSaved:m,sessionId:h}),p!==`true`){t.info(`Skipping post-action: event was not processed`,{shouldSaveCache:p});return}if(m===`true`){t.info(`Skipping post-action: cache already saved by main action`,{cacheSaved:m});return}try{await l({components:{agentIdentity:`github`,repo:r(),ref:u(),os:c()},runId:s(),logger:t,storagePath:a(),authPath:i()})?t.info(`Post-action cache saved`,{sessionId:h}):t.info(`Post-action: no cache content to save`,{sessionId:h})}catch(e){t.warning(`Post-action cache save failed (non-fatal)`,{error:n(e)})}}await p();export{p as runPost};