import{b as e,g as t,h as n,i as r,j as i,m as a,r as o,t as s,v as c,w as l,x as u}from"./state-keys-DDfV-nIP.js";var d=i(l(),1);async function f(i={}){let l=i.logger??r({phase:`post`}),f=d.getState(s.SHOULD_SAVE_CACHE),p=d.getState(s.CACHE_SAVED),m=d.getState(s.SESSION_ID)||null;if(l.debug(`Post-action state`,{shouldSaveCache:f,cacheSaved:p,sessionId:m}),f!==`true`){l.info(`Skipping post-action: event was not processed`,{shouldSaveCache:f});return}if(p===`true`){l.info(`Skipping post-action: cache already saved by main action`,{cacheSaved:p});return}try{await o({components:{agentIdentity:`github`,repo:n(),ref:a(),os:u()},runId:t(),logger:l,storagePath:e(),authPath:c()})?l.info(`Post-action cache saved`,{sessionId:m}):l.info(`Post-action: no cache content to save`,{sessionId:m})}catch(e){l.warning(`Post-action cache save failed (non-fatal)`,{error:e instanceof Error?e.message:String(e)})}}await f();export{f as runPost};