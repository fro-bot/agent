import{C as e,E as t,P as n,T as r,a as i,b as a,k as o,r as s,t as c,x as l,y as u}from"./state-keys-CJa_ElUv.js";async function d(d={}){let f=d.logger??i({phase:`post`}),p=n(c.SHOULD_SAVE_CACHE),m=n(c.CACHE_SAVED),h=n(c.SESSION_ID)||null,g=n(c.OPENCODE_VERSION)||null;if(f.debug(`Post-action state`,{shouldSaveCache:p,cacheSaved:m,sessionId:h,opencodeVersion:g}),p!==`true`){f.info(`Skipping post-action: event was not processed`,{shouldSaveCache:p});return}if(m===`true`){f.info(`Skipping post-action: cache already saved by main action`,{cacheSaved:m});return}try{await s({components:{agentIdentity:`github`,repo:a(),ref:u(),os:t()},runId:l(),logger:f,storagePath:r(),authPath:e(),opencodeVersion:g})?f.info(`Post-action cache saved`,{sessionId:h}):f.info(`Post-action: no cache content to save`,{sessionId:h})}catch(e){f.warning(`Post-action cache save failed (non-fatal)`,{error:o(e)})}}await d();export{d as runPost};