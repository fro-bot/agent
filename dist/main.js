import{A as e,B as t,C as n,D as r,E as i,F as a,I as o,L as s,M as c,N as l,P as u,R as d,S as f,T as p,_ as m,a as h,b as g,c as _,d as v,f as y,g as b,h as x,i as S,j as C,k as w,l as T,m as E,n as D,o as O,p as k,r as ee,s as A,t as j,u as M,v as N,w as P,x as F,y as I,z as L}from"./state-keys-CzxkAikl.js";import*as R from"node:path";import{join as z}from"node:path";import B from"node:process";import{EOL as V}from"os";import{existsSync as H,readFileSync as U}from"fs";import{Buffer as W}from"node:buffer";import*as G from"node:crypto";import{pathToFileURL as K}from"node:url";import*as q from"node:fs/promises";import{spawn as te}from"node:child_process";import*as J from"node:os";import Y from"node:os";const ne={maxComments:50,maxCommits:100,maxFiles:100,maxReviews:100,maxBodyBytes:10*1024,maxTotalBytes:100*1024},re=`…[truncated]`;function ie(e,t){if(e.length===0)return{text:``,truncated:!1};let n=new TextEncoder,r=n.encode(e);if(r.length<=t)return{text:e,truncated:!1};let i=t-n.encode(re).length;if(i<=0)return{text:re,truncated:!0};let a=r.slice(0,i),o=new TextDecoder(`utf-8`,{fatal:!1}).decode(a);for(;o.length>0&&o.charCodeAt(o.length-1)===65533;)a=a.slice(0,-1),o=new TextDecoder(`utf-8`,{fatal:!1}).decode(a);return{text:o+re,truncated:!0}}function ae(e){return e.length===0?``:`**Labels:** ${e.map(e=>`\`${e.name}\``).join(`, `)}\n`}function oe(e){return e.length===0?``:`**Assignees:** ${e.map(e=>`@${e.login}`).join(`, `)}\n`}function se(e){let t=[];t.push(`## Issue #${e.number}`),t.push(``),t.push(`**Title:** ${e.title}`),t.push(`**State:** ${e.state}`),t.push(`**Author:** ${e.author??`unknown`}`),t.push(`**Created:** ${e.createdAt}`);let n=ae(e.labels);n.length>0&&t.push(n.trimEnd());let r=oe(e.assignees);if(r.length>0&&t.push(r.trimEnd()),t.push(``),t.push(`### Body`),t.push(``),t.push(e.body),e.bodyTruncated&&(t.push(``),t.push(`*Note: Body was truncated due to size limits.*`)),e.comments.length>0){t.push(``),t.push(`### Comments (${e.comments.length}${e.commentsTruncated?` of ${e.totalComments}`:``})`),e.commentsTruncated&&(t.push(``),t.push(`*Note: Comments were truncated due to limits.*`)),t.push(``);for(let n of e.comments)t.push(`**${n.author??`unknown`}** (${n.createdAt}):`),t.push(n.body),t.push(``)}return t.join(`
`)}function ce(e){let t=[];t.push(`## Pull Request #${e.number}`),t.push(``),t.push(`**Title:** ${e.title}`),t.push(`**State:** ${e.state}`),t.push(`**Author:** ${e.author??`unknown`}`),t.push(`**Created:** ${e.createdAt}`),t.push(`**Base:** ${e.baseBranch} ← **Head:** ${e.headBranch}`),e.isFork&&t.push(`**Fork:** Yes (external contributor)`);let n=ae(e.labels);n.length>0&&t.push(n.trimEnd());let r=oe(e.assignees);if(r.length>0&&t.push(r.trimEnd()),t.push(``),t.push(`### Description`),t.push(``),t.push(e.body),e.bodyTruncated&&(t.push(``),t.push(`*Note: Description was truncated due to size limits.*`)),e.files.length>0){t.push(``),t.push(`### Files Changed (${e.files.length}${e.filesTruncated?` of ${e.totalFiles}`:``})`),t.push(``),t.push(`| File | +/- |`),t.push(`|------|-----|`);for(let n of e.files)t.push(`| \`${n.path}\` | +${n.additions}/-${n.deletions} |`)}if(e.commits.length>0){t.push(``),t.push(`### Commits (${e.commits.length}${e.commitsTruncated?` of ${e.totalCommits}`:``})`),t.push(``);for(let n of e.commits){let e=n.oid.slice(0,7);t.push(`- \`${e}\` ${n.message.split(`
`)[0]}`)}}if(e.reviews.length>0){t.push(``),t.push(`### Reviews (${e.reviews.length}${e.reviewsTruncated?` of ${e.totalReviews}`:``})`),t.push(``);for(let n of e.reviews)t.push(`**${n.author??`unknown`}** - ${n.state}`),n.body.length>0&&t.push(n.body),t.push(``)}if(e.comments.length>0){t.push(``),t.push(`### Comments (${e.comments.length}${e.commentsTruncated?` of ${e.totalComments}`:``})`),t.push(``);for(let n of e.comments)t.push(`**${n.author??`unknown`}** (${n.createdAt}):`),t.push(n.body),t.push(``)}return t.join(`
`)}function le(e){return e.type===`issue`?se(e):ce(e)}async function ue(e,t,n,r,i,a){try{let[a,o]=await Promise.all([e.rest.issues.get({owner:t,repo:n,issue_number:r}),e.rest.issues.listComments({owner:t,repo:n,issue_number:r,per_page:i.maxComments})]),s=a.data,c=ie(s.body??``,i.maxBodyBytes),l=o.data.slice(0,i.maxComments).map(e=>({id:e.node_id??String(e.id),author:e.user?.login??null,body:e.body??``,createdAt:e.created_at,authorAssociation:e.author_association,isMinimized:!1})),u=(s.labels??[]).filter(e=>typeof e==`object`&&!!e&&`name`in e).map(e=>({name:e.name??``,color:e.color})),d=(s.assignees??[]).map(e=>({login:e?.login??``}));return{type:`issue`,number:s.number,title:s.title,body:c.text,bodyTruncated:c.truncated,state:s.state,author:s.user?.login??null,createdAt:s.created_at,labels:u,assignees:d,comments:l,commentsTruncated:o.data.length>=i.maxComments,totalComments:o.data.length}}catch(e){return a.warning(`REST issue fallback failed`,{owner:t,repo:n,number:r,error:P(e)}),null}}async function de(e,t,n,r,i,a){try{let[a,o,s,c,l]=await Promise.all([e.rest.pulls.get({owner:t,repo:n,pull_number:r}),e.rest.pulls.listCommits({owner:t,repo:n,pull_number:r,per_page:i.maxCommits}),e.rest.pulls.listFiles({owner:t,repo:n,pull_number:r,per_page:i.maxFiles}),e.rest.pulls.listReviews({owner:t,repo:n,pull_number:r,per_page:i.maxReviews}),e.rest.issues.listComments({owner:t,repo:n,issue_number:r,per_page:i.maxComments})]),u=a.data,d=ie(u.body??``,i.maxBodyBytes),f=u.base.repo?.owner.login,p=u.head.repo?.owner.login,m=p==null||f!==p,h=l.data.slice(0,i.maxComments).map(e=>({id:e.node_id??String(e.id),author:e.user?.login??null,body:e.body??``,createdAt:e.created_at,authorAssociation:e.author_association,isMinimized:!1})),g=o.data.slice(0,i.maxCommits).map(e=>({oid:e.sha,message:e.commit.message,author:e.commit.author?.name??null})),_=s.data.slice(0,i.maxFiles).map(e=>({path:e.filename,additions:e.additions,deletions:e.deletions,status:e.status})),v=c.data.slice(0,i.maxReviews).map(e=>({author:e.user?.login??null,state:e.state,body:e.body??``,createdAt:e.submitted_at??``,comments:[]})),y=(u.labels??[]).map(e=>({name:e.name??``,color:e.color})),b=(u.assignees??[]).map(e=>({login:e?.login??``}));return{type:`pull_request`,number:u.number,title:u.title,body:d.text,bodyTruncated:d.truncated,state:u.state,author:u.user?.login??null,createdAt:u.created_at,baseBranch:u.base.ref,headBranch:u.head.ref,isFork:m,labels:y,assignees:b,comments:h,commentsTruncated:l.data.length>=i.maxComments,totalComments:l.data.length,commits:g,commitsTruncated:o.data.length>=i.maxCommits,totalCommits:o.data.length,files:_,filesTruncated:s.data.length>=i.maxFiles,totalFiles:s.data.length,reviews:v,reviewsTruncated:c.data.length>=i.maxReviews,totalReviews:c.data.length}}catch(e){return a.warning(`REST pull request fallback failed`,{owner:t,repo:n,number:r,error:P(e)}),null}}async function fe(e,t,n,r,i,a){try{return await e.graphql(`
  query GetIssue($owner: String!, $repo: String!, $number: Int!, $maxComments: Int!) {
    repository(owner: $owner, name: $repo) {
      issue(number: $number) {
        number
        title
        body
        state
        createdAt
        author { login }
        labels(first: 20) {
          nodes { name color }
        }
        assignees(first: 10) {
          nodes { login }
        }
        comments(first: $maxComments) {
          totalCount
          nodes {
            id
            body
            createdAt
            author { login }
            authorAssociation
            isMinimized
          }
        }
      }
    }
  }
`,{owner:t,repo:n,number:r,maxComments:i})}catch(e){return a.warning(`GraphQL issue query failed`,{owner:t,repo:n,number:r,error:P(e)}),null}}async function pe(e,t,n,r,i,a,o,s,c){try{return await e.graphql(`
  query GetPullRequest(
    $owner: String!,
    $repo: String!,
    $number: Int!,
    $maxComments: Int!,
    $maxCommits: Int!,
    $maxFiles: Int!,
    $maxReviews: Int!
  ) {
    repository(owner: $owner, name: $repo) {
      pullRequest(number: $number) {
        number
        title
        body
        state
        createdAt
        author { login }
        baseRefName
        headRefName
        baseRepository { owner { login } }
        headRepository { owner { login } }
        labels(first: 20) {
          nodes { name color }
        }
        assignees(first: 10) {
          nodes { login }
        }
        comments(first: $maxComments) {
          totalCount
          nodes {
            id
            body
            createdAt
            author { login }
            authorAssociation
            isMinimized
          }
        }
        commits(first: $maxCommits) {
          totalCount
          nodes {
            commit {
              oid
              message
              author { name }
            }
          }
        }
        files(first: $maxFiles) {
          totalCount
          nodes {
            path
            additions
            deletions
          }
        }
        reviews(first: $maxReviews) {
          totalCount
          nodes {
            state
            body
            createdAt
            author { login }
            comments(first: 10) {
              nodes {
                id
                body
                path
                line
                createdAt
                author { login }
              }
            }
          }
        }
      }
    }
  }
`,{owner:t,repo:n,number:r,maxComments:i,maxCommits:a,maxFiles:o,maxReviews:s})}catch(e){return c.warning(`GraphQL pull request query failed`,{owner:t,repo:n,number:r,error:P(e)}),null}}async function me(e,t,n,r,i,a){let o=await fe(e,t,n,r,i.maxComments,a);if(o==null)return null;let s=o.repository.issue;if(s==null)return a.debug(`Issue not found`,{owner:t,repo:n,number:r}),null;let c=ie(s.body??``,i.maxBodyBytes),l=s.comments.nodes.slice(0,i.maxComments),u=s.comments.totalCount>l.length,d=l.map(e=>({id:e.id,author:e.author?.login??null,body:e.body,createdAt:e.createdAt,authorAssociation:e.authorAssociation,isMinimized:e.isMinimized})),f=s.labels.nodes.map(e=>({name:e.name,color:e.color})),p=s.assignees.nodes.map(e=>({login:e.login}));return{type:`issue`,number:s.number,title:s.title,body:c.text,bodyTruncated:c.truncated,state:s.state,author:s.author?.login??null,createdAt:s.createdAt,labels:f,assignees:p,comments:d,commentsTruncated:u,totalComments:s.comments.totalCount}}async function he(e,t,n,r,i,a){let o=await pe(e,t,n,r,i.maxComments,i.maxCommits,i.maxFiles,i.maxReviews,a);if(o==null)return null;let s=o.repository.pullRequest;if(s==null)return a.debug(`Pull request not found`,{owner:t,repo:n,number:r}),null;let c=ie(s.body??``,i.maxBodyBytes),l=s.baseRepository?.owner.login,u=s.headRepository?.owner.login,d=u==null||l!==u,f=s.comments.nodes.slice(0,i.maxComments),p=s.comments.totalCount>f.length,m=f.map(e=>({id:e.id,author:e.author?.login??null,body:e.body,createdAt:e.createdAt,authorAssociation:e.authorAssociation,isMinimized:e.isMinimized})),h=s.commits.nodes.slice(0,i.maxCommits),g=s.commits.totalCount>h.length,_=h.map(e=>({oid:e.commit.oid,message:e.commit.message,author:e.commit.author?.name??null})),v=s.files.nodes.slice(0,i.maxFiles),y=s.files.totalCount>v.length,b=v.map(e=>({path:e.path,additions:e.additions,deletions:e.deletions})),x=s.reviews.nodes.slice(0,i.maxReviews),S=s.reviews.totalCount>x.length,C=x.map(e=>({author:e.author?.login??null,state:e.state,body:e.body,createdAt:e.createdAt,comments:e.comments.nodes.map(e=>({id:e.id,author:e.author?.login??null,body:e.body,path:e.path,line:e.line,createdAt:e.createdAt}))})),w=s.labels.nodes.map(e=>({name:e.name,color:e.color})),T=s.assignees.nodes.map(e=>({login:e.login}));return{type:`pull_request`,number:s.number,title:s.title,body:c.text,bodyTruncated:c.truncated,state:s.state,author:s.author?.login??null,createdAt:s.createdAt,baseBranch:s.baseRefName,headBranch:s.headRefName,isFork:d,labels:w,assignees:T,comments:m,commentsTruncated:p,totalComments:s.comments.totalCount,commits:_,commitsTruncated:g,totalCommits:s.commits.totalCount,files:b,filesTruncated:y,totalFiles:s.files.totalCount,reviews:C,reviewsTruncated:S,totalReviews:s.reviews.totalCount}}function X(e){let[t,n]=e.split(`/`);if(t==null||n==null||t.length===0||n.length===0)throw Error(`Invalid repository string: ${e}`);return{owner:t,repo:n}}async function ge(e,t,n,r,i){try{let{owner:a,repo:o}=X(t),{data:s}=await e.rest.reactions.createForIssueComment({owner:a,repo:o,comment_id:n,content:r});return i.debug(`Created comment reaction`,{commentId:n,content:r,reactionId:s.id}),{id:s.id}}catch(e){return i.warning(`Failed to create comment reaction`,{commentId:n,content:r,error:P(e)}),null}}async function _e(e,t,n,r){try{let{owner:r,repo:i}=X(t),{data:a}=await e.rest.reactions.listForIssueComment({owner:r,repo:i,comment_id:n,per_page:100});return a.map(e=>({id:e.id,content:e.content,userLogin:e.user?.login??null}))}catch(e){return r.warning(`Failed to list comment reactions`,{commentId:n,error:P(e)}),[]}}async function ve(e,t,n,r,i){try{let{owner:a,repo:o}=X(t);return await e.rest.reactions.deleteForIssueComment({owner:a,repo:o,comment_id:n,reaction_id:r}),i.debug(`Deleted comment reaction`,{commentId:n,reactionId:r}),!0}catch(e){return i.warning(`Failed to delete comment reaction`,{commentId:n,reactionId:r,error:P(e)}),!1}}async function ye(e,t,n,r,i,a){let{owner:o,repo:s}=X(t);try{return await e.rest.issues.createLabel({owner:o,repo:s,name:n,color:r,description:i}),a.debug(`Created label`,{name:n,color:r}),!0}catch(e){return e instanceof Error&&`status`in e&&e.status===422?(a.debug(`Label already exists`,{name:n}),!0):(a.warning(`Failed to create label`,{name:n,error:P(e)}),!1)}}async function be(e,t,n,r,i){try{let{owner:a,repo:o}=X(t);return await e.rest.issues.addLabels({owner:a,repo:o,issue_number:n,labels:[...r]}),i.debug(`Added labels to issue`,{issueNumber:n,labels:r}),!0}catch(e){return i.warning(`Failed to add labels to issue`,{issueNumber:n,labels:r,error:P(e)}),!1}}async function xe(e,t,n,r,i){try{let{owner:a,repo:o}=X(t);return await e.rest.issues.removeLabel({owner:a,repo:o,issue_number:n,name:r}),i.debug(`Removed label from issue`,{issueNumber:n,label:r}),!0}catch(e){return e instanceof Error&&`status`in e&&e.status===404?(i.debug(`Label was not present on issue`,{issueNumber:n,label:r}),!0):(i.warning(`Failed to remove label from issue`,{issueNumber:n,label:r,error:P(e)}),!1)}}async function Se(e,t,n){try{let{owner:n,repo:r}=X(t),{data:i}=await e.rest.repos.get({owner:n,repo:r});return i.default_branch}catch(e){return n.warning(`Failed to get default branch`,{repo:t,error:P(e)}),`main`}}var Ce=class{constructor(){if(this.payload={},process.env.GITHUB_EVENT_PATH)if(H(process.env.GITHUB_EVENT_PATH))this.payload=JSON.parse(U(process.env.GITHUB_EVENT_PATH,{encoding:`utf8`}));else{let e=process.env.GITHUB_EVENT_PATH;process.stdout.write(`GITHUB_EVENT_PATH ${e} does not exist${V}`)}this.eventName=process.env.GITHUB_EVENT_NAME,this.sha=process.env.GITHUB_SHA,this.ref=process.env.GITHUB_REF,this.workflow=process.env.GITHUB_WORKFLOW,this.action=process.env.GITHUB_ACTION,this.actor=process.env.GITHUB_ACTOR,this.job=process.env.GITHUB_JOB,this.runAttempt=parseInt(process.env.GITHUB_RUN_ATTEMPT,10),this.runNumber=parseInt(process.env.GITHUB_RUN_NUMBER,10),this.runId=parseInt(process.env.GITHUB_RUN_ID,10),this.apiUrl=process.env.GITHUB_API_URL??`https://api.github.com`,this.serverUrl=process.env.GITHUB_SERVER_URL??`https://github.com`,this.graphqlUrl=process.env.GITHUB_GRAPHQL_URL??`https://api.github.com/graphql`}get issue(){let e=this.payload;return Object.assign(Object.assign({},this.repo),{number:(e.issue||e.pull_request||e).number})}get repo(){if(process.env.GITHUB_REPOSITORY){let[e,t]=process.env.GITHUB_REPOSITORY.split(`/`);return{owner:e,repo:t}}if(this.payload.repository)return{owner:this.payload.repository.owner.login,repo:this.payload.repository.name};throw Error(`context.repo requires a GITHUB_REPOSITORY environment variable like 'owner/repo'`)}},we=d((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getProxyUrl=t,e.checkBypass=n;function t(e){let t=e.protocol===`https:`;if(n(e))return;let r=t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY;if(r)try{return new i(r)}catch{if(!r.startsWith(`http://`)&&!r.startsWith(`https://`))return new i(`http://${r}`)}else return}function n(e){if(!e.hostname)return!1;let t=e.hostname;if(r(t))return!0;let n=process.env.no_proxy||process.env.NO_PROXY||``;if(!n)return!1;let i;e.port?i=Number(e.port):e.protocol===`http:`?i=80:e.protocol===`https:`&&(i=443);let a=[e.hostname.toUpperCase()];typeof i==`number`&&a.push(`${a[0]}:${i}`);for(let e of n.split(`,`).map(e=>e.trim().toUpperCase()).filter(e=>e))if(e===`*`||a.some(t=>t===e||t.endsWith(`.${e}`)||e.startsWith(`.`)&&t.endsWith(`${e}`)))return!0;return!1}function r(e){let t=e.toLowerCase();return t===`localhost`||t.startsWith(`127.`)||t.startsWith(`[::1]`)||t.startsWith(`[0:0:0:0:0:0:0:1]`)}var i=class extends URL{constructor(e,t){super(e,t),this._decodedUsername=decodeURIComponent(super.username),this._decodedPassword=decodeURIComponent(super.password)}get username(){return this._decodedUsername}get password(){return this._decodedPassword}}})),Te=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})(),i=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.HttpClient=e.HttpClientResponse=e.HttpClientError=e.MediaTypes=e.Headers=e.HttpCodes=void 0,e.getProxyUrl=h,e.isHttps=x;let a=r(L(`http`)),c=r(L(`https`)),l=r(we()),u=r(s()),d=o();var f;(function(e){e[e.OK=200]=`OK`,e[e.MultipleChoices=300]=`MultipleChoices`,e[e.MovedPermanently=301]=`MovedPermanently`,e[e.ResourceMoved=302]=`ResourceMoved`,e[e.SeeOther=303]=`SeeOther`,e[e.NotModified=304]=`NotModified`,e[e.UseProxy=305]=`UseProxy`,e[e.SwitchProxy=306]=`SwitchProxy`,e[e.TemporaryRedirect=307]=`TemporaryRedirect`,e[e.PermanentRedirect=308]=`PermanentRedirect`,e[e.BadRequest=400]=`BadRequest`,e[e.Unauthorized=401]=`Unauthorized`,e[e.PaymentRequired=402]=`PaymentRequired`,e[e.Forbidden=403]=`Forbidden`,e[e.NotFound=404]=`NotFound`,e[e.MethodNotAllowed=405]=`MethodNotAllowed`,e[e.NotAcceptable=406]=`NotAcceptable`,e[e.ProxyAuthenticationRequired=407]=`ProxyAuthenticationRequired`,e[e.RequestTimeout=408]=`RequestTimeout`,e[e.Conflict=409]=`Conflict`,e[e.Gone=410]=`Gone`,e[e.TooManyRequests=429]=`TooManyRequests`,e[e.InternalServerError=500]=`InternalServerError`,e[e.NotImplemented=501]=`NotImplemented`,e[e.BadGateway=502]=`BadGateway`,e[e.ServiceUnavailable=503]=`ServiceUnavailable`,e[e.GatewayTimeout=504]=`GatewayTimeout`})(f||(e.HttpCodes=f={}));var p;(function(e){e.Accept=`accept`,e.ContentType=`content-type`})(p||(e.Headers=p={}));var m;(function(e){e.ApplicationJson=`application/json`})(m||(e.MediaTypes=m={}));function h(e){let t=l.getProxyUrl(new URL(e));return t?t.href:``}let g=[f.MovedPermanently,f.ResourceMoved,f.SeeOther,f.TemporaryRedirect,f.PermanentRedirect],_=[f.BadGateway,f.ServiceUnavailable,f.GatewayTimeout],v=[`OPTIONS`,`GET`,`DELETE`,`HEAD`];var y=class e extends Error{constructor(t,n){super(t),this.name=`HttpClientError`,this.statusCode=n,Object.setPrototypeOf(this,e.prototype)}};e.HttpClientError=y;var b=class{constructor(e){this.message=e}readBody(){return i(this,void 0,void 0,function*(){return new Promise(e=>i(this,void 0,void 0,function*(){let t=Buffer.alloc(0);this.message.on(`data`,e=>{t=Buffer.concat([t,e])}),this.message.on(`end`,()=>{e(t.toString())})}))})}readBodyBuffer(){return i(this,void 0,void 0,function*(){return new Promise(e=>i(this,void 0,void 0,function*(){let t=[];this.message.on(`data`,e=>{t.push(e)}),this.message.on(`end`,()=>{e(Buffer.concat(t))})}))})}};e.HttpClientResponse=b;function x(e){return new URL(e).protocol===`https:`}e.HttpClient=class{constructor(e,t,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=this._getUserAgentWithOrchestrationId(e),this.handlers=t||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(e,t){return i(this,void 0,void 0,function*(){return this.request(`OPTIONS`,e,null,t||{})})}get(e,t){return i(this,void 0,void 0,function*(){return this.request(`GET`,e,null,t||{})})}del(e,t){return i(this,void 0,void 0,function*(){return this.request(`DELETE`,e,null,t||{})})}post(e,t,n){return i(this,void 0,void 0,function*(){return this.request(`POST`,e,t,n||{})})}patch(e,t,n){return i(this,void 0,void 0,function*(){return this.request(`PATCH`,e,t,n||{})})}put(e,t,n){return i(this,void 0,void 0,function*(){return this.request(`PUT`,e,t,n||{})})}head(e,t){return i(this,void 0,void 0,function*(){return this.request(`HEAD`,e,null,t||{})})}sendStream(e,t,n,r){return i(this,void 0,void 0,function*(){return this.request(e,t,n,r)})}getJson(e){return i(this,arguments,void 0,function*(e,t={}){t[p.Accept]=this._getExistingOrDefaultHeader(t,p.Accept,m.ApplicationJson);let n=yield this.get(e,t);return this._processResponse(n,this.requestOptions)})}postJson(e,t){return i(this,arguments,void 0,function*(e,t,n={}){let r=JSON.stringify(t,null,2);n[p.Accept]=this._getExistingOrDefaultHeader(n,p.Accept,m.ApplicationJson),n[p.ContentType]=this._getExistingOrDefaultContentTypeHeader(n,m.ApplicationJson);let i=yield this.post(e,r,n);return this._processResponse(i,this.requestOptions)})}putJson(e,t){return i(this,arguments,void 0,function*(e,t,n={}){let r=JSON.stringify(t,null,2);n[p.Accept]=this._getExistingOrDefaultHeader(n,p.Accept,m.ApplicationJson),n[p.ContentType]=this._getExistingOrDefaultContentTypeHeader(n,m.ApplicationJson);let i=yield this.put(e,r,n);return this._processResponse(i,this.requestOptions)})}patchJson(e,t){return i(this,arguments,void 0,function*(e,t,n={}){let r=JSON.stringify(t,null,2);n[p.Accept]=this._getExistingOrDefaultHeader(n,p.Accept,m.ApplicationJson),n[p.ContentType]=this._getExistingOrDefaultContentTypeHeader(n,m.ApplicationJson);let i=yield this.patch(e,r,n);return this._processResponse(i,this.requestOptions)})}request(e,t,n,r){return i(this,void 0,void 0,function*(){if(this._disposed)throw Error(`Client has already been disposed.`);let i=new URL(t),a=this._prepareRequest(e,i,r),o=this._allowRetries&&v.includes(e)?this._maxRetries+1:1,s=0,c;do{if(c=yield this.requestRaw(a,n),c&&c.message&&c.message.statusCode===f.Unauthorized){let e;for(let t of this.handlers)if(t.canHandleAuthentication(c)){e=t;break}return e?e.handleAuthentication(this,a,n):c}let t=this._maxRedirects;for(;c.message.statusCode&&g.includes(c.message.statusCode)&&this._allowRedirects&&t>0;){let o=c.message.headers.location;if(!o)break;let s=new URL(o);if(i.protocol===`https:`&&i.protocol!==s.protocol&&!this._allowRedirectDowngrade)throw Error(`Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.`);if(yield c.readBody(),s.hostname!==i.hostname)for(let e in r)e.toLowerCase()===`authorization`&&delete r[e];a=this._prepareRequest(e,s,r),c=yield this.requestRaw(a,n),t--}if(!c.message.statusCode||!_.includes(c.message.statusCode))return c;s+=1,s<o&&(yield c.readBody(),yield this._performExponentialBackoff(s))}while(s<o);return c})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,t){return i(this,void 0,void 0,function*(){return new Promise((n,r)=>{function i(e,t){e?r(e):t?n(t):r(Error(`Unknown error`))}this.requestRawWithCallback(e,t,i)})})}requestRawWithCallback(e,t,n){typeof t==`string`&&(e.options.headers||(e.options.headers={}),e.options.headers[`Content-Length`]=Buffer.byteLength(t,`utf8`));let r=!1;function i(e,t){r||(r=!0,n(e,t))}let a=e.httpModule.request(e.options,e=>{i(void 0,new b(e))}),o;a.on(`socket`,e=>{o=e}),a.setTimeout(this._socketTimeout||3*6e4,()=>{o&&o.end(),i(Error(`Request timeout: ${e.options.path}`))}),a.on(`error`,function(e){i(e)}),t&&typeof t==`string`&&a.write(t,`utf8`),t&&typeof t!=`string`?(t.on(`close`,function(){a.end()}),t.pipe(a)):a.end()}getAgent(e){let t=new URL(e);return this._getAgent(t)}getAgentDispatcher(e){let t=new URL(e),n=l.getProxyUrl(t);if(n&&n.hostname)return this._getProxyAgentDispatcher(t,n)}_prepareRequest(e,t,n){let r={};r.parsedUrl=t;let i=r.parsedUrl.protocol===`https:`;r.httpModule=i?c:a;let o=i?443:80;if(r.options={},r.options.host=r.parsedUrl.hostname,r.options.port=r.parsedUrl.port?parseInt(r.parsedUrl.port):o,r.options.path=(r.parsedUrl.pathname||``)+(r.parsedUrl.search||``),r.options.method=e,r.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(r.options.headers[`user-agent`]=this.userAgent),r.options.agent=this._getAgent(r.parsedUrl),this.handlers)for(let e of this.handlers)e.prepareRequest(r.options);return r}_mergeHeaders(e){return this.requestOptions&&this.requestOptions.headers?Object.assign({},S(this.requestOptions.headers),S(e||{})):S(e||{})}_getExistingOrDefaultHeader(e,t,n){let r;if(this.requestOptions&&this.requestOptions.headers){let e=S(this.requestOptions.headers)[t];e&&(r=typeof e==`number`?e.toString():e)}let i=e[t];return i===void 0?r===void 0?n:r:typeof i==`number`?i.toString():i}_getExistingOrDefaultContentTypeHeader(e,t){let n;if(this.requestOptions&&this.requestOptions.headers){let e=S(this.requestOptions.headers)[p.ContentType];e&&(n=typeof e==`number`?String(e):Array.isArray(e)?e.join(`, `):e)}let r=e[p.ContentType];return r===void 0?n===void 0?t:n:typeof r==`number`?String(r):Array.isArray(r)?r.join(`, `):r}_getAgent(e){let t,n=l.getProxyUrl(e),r=n&&n.hostname;if(this._keepAlive&&r&&(t=this._proxyAgent),r||(t=this._agent),t)return t;let i=e.protocol===`https:`,o=100;if(this.requestOptions&&(o=this.requestOptions.maxSockets||a.globalAgent.maxSockets),n&&n.hostname){let e={maxSockets:o,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},r,a=n.protocol===`https:`;r=i?a?u.httpsOverHttps:u.httpsOverHttp:a?u.httpOverHttps:u.httpOverHttp,t=r(e),this._proxyAgent=t}if(!t){let e={keepAlive:this._keepAlive,maxSockets:o};t=i?new c.Agent(e):new a.Agent(e),this._agent=t}return i&&this._ignoreSslError&&(t.options=Object.assign(t.options||{},{rejectUnauthorized:!1})),t}_getProxyAgentDispatcher(e,t){let n;if(this._keepAlive&&(n=this._proxyAgentDispatcher),n)return n;let r=e.protocol===`https:`;return n=new d.ProxyAgent(Object.assign({uri:t.href,pipelining:this._keepAlive?1:0},(t.username||t.password)&&{token:`Basic ${Buffer.from(`${t.username}:${t.password}`).toString(`base64`)}`})),this._proxyAgentDispatcher=n,r&&this._ignoreSslError&&(n.options=Object.assign(n.options.requestTls||{},{rejectUnauthorized:!1})),n}_getUserAgentWithOrchestrationId(e){let t=e||`actions/http-client`,n=process.env.ACTIONS_ORCHESTRATION_ID;return n?`${t} actions_orchestration_id/${n.replace(/[^a-z0-9_.-]/gi,`_`)}`:t}_performExponentialBackoff(e){return i(this,void 0,void 0,function*(){e=Math.min(10,e);let t=5*2**e;return new Promise(e=>setTimeout(()=>e(),t))})}_processResponse(e,t){return i(this,void 0,void 0,function*(){return new Promise((n,r)=>i(this,void 0,void 0,function*(){let i=e.message.statusCode||0,a={statusCode:i,result:null,headers:{}};i===f.NotFound&&n(a);function o(e,t){if(typeof t==`string`){let e=new Date(t);if(!isNaN(e.valueOf()))return e}return t}let s,c;try{c=yield e.readBody(),c&&c.length>0&&(s=t&&t.deserializeDates?JSON.parse(c,o):JSON.parse(c),a.result=s),a.headers=e.message.headers}catch{}if(i>299){let e;e=s&&s.message?s.message:c&&c.length>0?c:`Failed request: (${i})`;let t=new y(e,i);t.result=a.result,r(t)}else n(a)}))})}};let S=e=>Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})})),Ee=t(Te(),1),De=o(),Oe=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function ke(e,t){if(!e&&!t.auth)throw Error(`Parameter token or opts.auth is required`);if(e&&t.auth)throw Error(`Parameters token and opts.auth may not both be specified`);return typeof t.auth==`string`?t.auth:`token ${e}`}function Ae(e){return new Ee.HttpClient().getAgent(e)}function je(e){return new Ee.HttpClient().getAgentDispatcher(e)}function Me(e){let t=je(e);return(e,n)=>Oe(this,void 0,void 0,function*(){return(0,De.fetch)(e,Object.assign(Object.assign({},n),{dispatcher:t}))})}function Ne(){return process.env.GITHUB_API_URL||`https://api.github.com`}function Pe(){return typeof navigator==`object`&&`userAgent`in navigator?navigator.userAgent:typeof process==`object`&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:`<environment undetectable>`}function Fe(e,t,n,r){if(typeof n!=`function`)throw Error(`method for before hook must be a function`);return r||={},Array.isArray(t)?t.reverse().reduce((t,n)=>Fe.bind(null,e,n,t,r),n)():Promise.resolve().then(()=>e.registry[t]?e.registry[t].reduce((e,t)=>t.hook.bind(null,e,r),n)():n(r))}function Ie(e,t,n,r){let i=r;e.registry[n]||(e.registry[n]=[]),t===`before`&&(r=(e,t)=>Promise.resolve().then(i.bind(null,t)).then(e.bind(null,t))),t===`after`&&(r=(e,t)=>{let n;return Promise.resolve().then(e.bind(null,t)).then(e=>(n=e,i(n,t))).then(()=>n)}),t===`error`&&(r=(e,t)=>Promise.resolve().then(e.bind(null,t)).catch(e=>i(e,t))),e.registry[n].push({hook:r,orig:i})}function Le(e,t,n){if(!e.registry[t])return;let r=e.registry[t].map(e=>e.orig).indexOf(n);r!==-1&&e.registry[t].splice(r,1)}const Re=Function.bind,ze=Re.bind(Re);function Be(e,t,n){let r=ze(Le,null).apply(null,n?[t,n]:[t]);e.api={remove:r},e.remove=r,[`before`,`error`,`after`,`wrap`].forEach(r=>{let i=n?[t,r,n]:[t,r];e[r]=e.api[r]=ze(Ie,null).apply(null,i)})}function Ve(){let e=Symbol(`Singular`),t={registry:{}},n=Fe.bind(null,t,e);return Be(n,t,e),n}function He(){let e={registry:{}},t=Fe.bind(null,e);return Be(t,e),t}var Ue={Singular:Ve,Collection:He},We=`octokit-endpoint.js/0.0.0-development ${Pe()}`,Ge={method:`GET`,baseUrl:`https://api.github.com`,headers:{accept:`application/vnd.github.v3+json`,"user-agent":We},mediaType:{format:``}};function Ke(e){return e?Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{}):{}}function qe(e){if(typeof e!=`object`||!e||Object.prototype.toString.call(e)!==`[object Object]`)return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let n=Object.prototype.hasOwnProperty.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}function Je(e,t){let n=Object.assign({},e);return Object.keys(t).forEach(r=>{qe(t[r])&&r in e?n[r]=Je(e[r],t[r]):Object.assign(n,{[r]:t[r]})}),n}function Ye(e){for(let t in e)e[t]===void 0&&delete e[t];return e}function Xe(e,t,n){if(typeof t==`string`){let[e,r]=t.split(` `);n=Object.assign(r?{method:e,url:r}:{url:e},n)}else n=Object.assign({},t);n.headers=Ke(n.headers),Ye(n),Ye(n.headers);let r=Je(e||{},n);return n.url===`/graphql`&&(e&&e.mediaType.previews?.length&&(r.mediaType.previews=e.mediaType.previews.filter(e=>!r.mediaType.previews.includes(e)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(e=>e.replace(/-preview/,``))),r}function Ze(e,t){let n=/\?/.test(e)?`&`:`?`,r=Object.keys(t);return r.length===0?e:e+n+r.map(e=>e===`q`?`q=`+t.q.split(`+`).map(encodeURIComponent).join(`+`):`${e}=${encodeURIComponent(t[e])}`).join(`&`)}var Qe=/\{[^{}}]+\}/g;function $e(e){return e.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,``).split(/,/)}function et(e){let t=e.match(Qe);return t?t.map($e).reduce((e,t)=>e.concat(t),[]):[]}function tt(e,t){let n={__proto__:null};for(let r of Object.keys(e))t.indexOf(r)===-1&&(n[r]=e[r]);return n}function nt(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,`[`).replace(/%5D/g,`]`)),e}).join(``)}function Z(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return`%`+e.charCodeAt(0).toString(16).toUpperCase()})}function rt(e,t,n){return t=e===`+`||e===`#`?nt(t):Z(t),n?Z(n)+`=`+t:t}function it(e){return e!=null}function at(e){return e===`;`||e===`&`||e===`?`}function ot(e,t,n,r){var i=e[n],a=[];if(it(i)&&i!==``)if(typeof i==`string`||typeof i==`number`||typeof i==`boolean`)i=i.toString(),r&&r!==`*`&&(i=i.substring(0,parseInt(r,10))),a.push(rt(t,i,at(t)?n:``));else if(r===`*`)Array.isArray(i)?i.filter(it).forEach(function(e){a.push(rt(t,e,at(t)?n:``))}):Object.keys(i).forEach(function(e){it(i[e])&&a.push(rt(t,i[e],e))});else{let e=[];Array.isArray(i)?i.filter(it).forEach(function(n){e.push(rt(t,n))}):Object.keys(i).forEach(function(n){it(i[n])&&(e.push(Z(n)),e.push(rt(t,i[n].toString())))}),at(t)?a.push(Z(n)+`=`+e.join(`,`)):e.length!==0&&a.push(e.join(`,`))}else t===`;`?it(i)&&a.push(Z(n)):i===``&&(t===`&`||t===`?`)?a.push(Z(n)+`=`):i===``&&a.push(``);return a}function st(e){return{expand:ct.bind(null,e)}}function ct(e,t){var n=[`+`,`#`,`.`,`/`,`;`,`?`,`&`];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(e,r,i){if(r){let e=``,i=[];if(n.indexOf(r.charAt(0))!==-1&&(e=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach(function(n){var r=/([^:\*]*)(?::(\d+)|(\*))?/.exec(n);i.push(ot(t,e,r[1],r[2]||r[3]))}),e&&e!==`+`){var a=`,`;return e===`?`?a=`&`:e!==`#`&&(a=e),(i.length===0?``:e)+i.join(a)}else return i.join(`,`)}else return nt(i)}),e===`/`?e:e.replace(/\/$/,``)}function lt(e){let t=e.method.toUpperCase(),n=(e.url||`/`).replace(/:([a-z]\w+)/g,`{$1}`),r=Object.assign({},e.headers),i,a=tt(e,[`method`,`baseUrl`,`url`,`headers`,`request`,`mediaType`]),o=et(n);n=st(n).expand(a),/^http/.test(n)||(n=e.baseUrl+n);let s=tt(a,Object.keys(e).filter(e=>o.includes(e)).concat(`baseUrl`));return/application\/octet-stream/i.test(r.accept)||(e.mediaType.format&&(r.accept=r.accept.split(/,/).map(t=>t.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(`,`)),n.endsWith(`/graphql`)&&e.mediaType.previews?.length&&(r.accept=(r.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[]).concat(e.mediaType.previews).map(t=>`application/vnd.github.${t}-preview${e.mediaType.format?`.${e.mediaType.format}`:`+json`}`).join(`,`))),[`GET`,`HEAD`].includes(t)?n=Ze(n,s):`data`in s?i=s.data:Object.keys(s).length&&(i=s),!r[`content-type`]&&i!==void 0&&(r[`content-type`]=`application/json; charset=utf-8`),[`PATCH`,`PUT`].includes(t)&&i===void 0&&(i=``),Object.assign({method:t,url:n,headers:r},i===void 0?null:{body:i},e.request?{request:e.request}:null)}function ut(e,t,n){return lt(Xe(e,t,n))}function dt(e,t){let n=Xe(e,t),r=ut.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:dt.bind(null,n),merge:Xe.bind(null,n),parse:lt})}var ft=dt(null,Ge),pt=d(((e,t)=>{let n=function(){};n.prototype=Object.create(null);let r=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,i=/\\([\v\u0020-\u00ff])/gu,a=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,o={type:``,parameters:new n};Object.freeze(o.parameters),Object.freeze(o);function s(e){if(typeof e!=`string`)throw TypeError(`argument header is required and must be a string`);let t=e.indexOf(`;`),o=t===-1?e.trim():e.slice(0,t).trim();if(a.test(o)===!1)throw TypeError(`invalid media type`);let s={type:o.toLowerCase(),parameters:new n};if(t===-1)return s;let c,l,u;for(r.lastIndex=t;l=r.exec(e);){if(l.index!==t)throw TypeError(`invalid parameter format`);t+=l[0].length,c=l[1].toLowerCase(),u=l[2],u[0]===`"`&&(u=u.slice(1,u.length-1),i.test(u)&&(u=u.replace(i,`$1`))),s.parameters[c]=u}if(t!==e.length)throw TypeError(`invalid parameter format`);return s}function c(e){if(typeof e!=`string`)return o;let t=e.indexOf(`;`),s=t===-1?e.trim():e.slice(0,t).trim();if(a.test(s)===!1)return o;let c={type:s.toLowerCase(),parameters:new n};if(t===-1)return c;let l,u,d;for(r.lastIndex=t;u=r.exec(e);){if(u.index!==t)return o;t+=u[0].length,l=u[1].toLowerCase(),d=u[2],d[0]===`"`&&(d=d.slice(1,d.length-1),i.test(d)&&(d=d.replace(i,`$1`))),c.parameters[l]=d}return t===e.length?c:o}t.exports.default={parse:s,safeParse:c},t.exports.parse=s,t.exports.safeParse=c,t.exports.defaultContentType=o}))(),mt=class extends Error{name;status;request;response;constructor(e,t,n){super(e,{cause:n.cause}),this.name=`HttpError`,this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),`response`in n&&(this.response=n.response);let r=Object.assign({},n.request);n.request.headers.authorization&&(r.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/(?<! ) .*$/,` [REDACTED]`)})),r.url=r.url.replace(/\bclient_secret=\w+/g,`client_secret=[REDACTED]`).replace(/\baccess_token=\w+/g,`access_token=[REDACTED]`),this.request=r}},ht=`10.0.7`,gt={headers:{"user-agent":`octokit-request.js/${ht} ${Pe()}`}};function _t(e){if(typeof e!=`object`||!e||Object.prototype.toString.call(e)!==`[object Object]`)return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let n=Object.prototype.hasOwnProperty.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}var vt=()=>``;async function yt(e){let t=e.request?.fetch||globalThis.fetch;if(!t)throw Error(`fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing`);let n=e.request?.log||console,r=e.request?.parseSuccessResponseBody!==!1,i=_t(e.body)||Array.isArray(e.body)?JSON.stringify(e.body):e.body,a=Object.fromEntries(Object.entries(e.headers).map(([e,t])=>[e,String(t)])),o;try{o=await t(e.url,{method:e.method,body:i,redirect:e.request?.redirect,headers:a,signal:e.request?.signal,...e.body&&{duplex:`half`}})}catch(t){let n=`Unknown Error`;if(t instanceof Error){if(t.name===`AbortError`)throw t.status=500,t;n=t.message,t.name===`TypeError`&&`cause`in t&&(t.cause instanceof Error?n=t.cause.message:typeof t.cause==`string`&&(n=t.cause))}let r=new mt(n,500,{request:e});throw r.cause=t,r}let s=o.status,c=o.url,l={};for(let[e,t]of o.headers)l[e]=t;let u={url:c,status:s,headers:l,data:``};if(`deprecation`in l){let t=l.link&&l.link.match(/<([^<>]+)>; rel="deprecation"/),r=t&&t.pop();n.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${l.sunset}${r?`. See ${r}`:``}`)}if(s===204||s===205)return u;if(e.method===`HEAD`){if(s<400)return u;throw new mt(o.statusText,s,{response:u,request:e})}if(s===304)throw u.data=await bt(o),new mt(`Not modified`,s,{response:u,request:e});if(s>=400)throw u.data=await bt(o),new mt(St(u.data),s,{response:u,request:e});return u.data=r?await bt(o):o.body,u}async function bt(e){let t=e.headers.get(`content-type`);if(!t)return e.text().catch(vt);let n=(0,pt.safeParse)(t);if(xt(n)){let t=``;try{return t=await e.text(),JSON.parse(t)}catch{return t}}else if(n.type.startsWith(`text/`)||n.parameters.charset?.toLowerCase()===`utf-8`)return e.text().catch(vt);else return e.arrayBuffer().catch(()=>new ArrayBuffer(0))}function xt(e){return e.type===`application/json`||e.type===`application/scim+json`}function St(e){if(typeof e==`string`)return e;if(e instanceof ArrayBuffer)return`Unknown error`;if(`message`in e){let t=`documentation_url`in e?` - ${e.documentation_url}`:``;return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(e=>JSON.stringify(e)).join(`, `)}${t}`:`${e.message}${t}`}return`Unknown error: ${JSON.stringify(e)}`}function Ct(e,t){let n=e.defaults(t);return Object.assign(function(e,t){let r=n.merge(e,t);if(!r.request||!r.request.hook)return yt(n.parse(r));let i=(e,t)=>yt(n.parse(n.merge(e,t)));return Object.assign(i,{endpoint:n,defaults:Ct.bind(null,n)}),r.request.hook(i,r)},{endpoint:n,defaults:Ct.bind(null,n)})}var wt=Ct(ft,gt),Tt=`0.0.0-development`;function Et(e){return`Request failed due to following response errors:
`+e.errors.map(e=>` - ${e.message}`).join(`
`)}var Dt=class extends Error{constructor(e,t,n){super(Et(n)),this.request=e,this.headers=t,this.response=n,this.errors=n.errors,this.data=n.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name=`GraphqlResponseError`;errors;data},Ot=[`method`,`baseUrl`,`url`,`headers`,`request`,`query`,`mediaType`,`operationName`],kt=[`query`,`method`,`url`],At=/\/api\/v3\/?$/;function jt(e,t,n){if(n){if(typeof t==`string`&&`query`in n)return Promise.reject(Error(`[@octokit/graphql] "query" cannot be used as variable name`));for(let e in n)if(kt.includes(e))return Promise.reject(Error(`[@octokit/graphql] "${e}" cannot be used as variable name`))}let r=typeof t==`string`?Object.assign({query:t},n):t,i=Object.keys(r).reduce((e,t)=>Ot.includes(t)?(e[t]=r[t],e):(e.variables||={},e.variables[t]=r[t],e),{}),a=r.baseUrl||e.endpoint.DEFAULTS.baseUrl;return At.test(a)&&(i.url=a.replace(At,`/api/graphql`)),e(i).then(e=>{if(e.data.errors){let t={};for(let n of Object.keys(e.headers))t[n]=e.headers[n];throw new Dt(i,t,e.data)}return e.data.data})}function Mt(e,t){let n=e.defaults(t);return Object.assign((e,t)=>jt(n,e,t),{defaults:Mt.bind(null,n),endpoint:n.endpoint})}Mt(wt,{headers:{"user-agent":`octokit-graphql.js/${Tt} ${Pe()}`},method:`POST`,url:`/graphql`});function Nt(e){return Mt(e,{method:`POST`,url:`/graphql`})}var Pt=`(?:[a-zA-Z0-9_-]+)`,Ft=`\\.`,It=RegExp(`^${Pt}${Ft}${Pt}${Ft}${Pt}$`),Lt=It.test.bind(It);async function Rt(e){let t=Lt(e),n=e.startsWith(`v1.`)||e.startsWith(`ghs_`),r=e.startsWith(`ghu_`);return{type:`token`,token:e,tokenType:t?`app`:n?`installation`:r?`user-to-server`:`oauth`}}function zt(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}async function Bt(e,t,n,r){let i=t.endpoint.merge(n,r);return i.headers.authorization=zt(e),t(i)}var Vt=function(e){if(!e)throw Error(`[@octokit/auth-token] No token passed to createTokenAuth`);if(typeof e!=`string`)throw Error(`[@octokit/auth-token] Token passed to createTokenAuth is not a string`);return e=e.replace(/^(token|bearer) +/i,``),Object.assign(Rt.bind(null,e),{hook:Bt.bind(null,e)})};const Ht=`7.0.6`,Ut=()=>{},Wt=console.warn.bind(console),Gt=console.error.bind(console);function Kt(e={}){return typeof e.debug!=`function`&&(e.debug=Ut),typeof e.info!=`function`&&(e.info=Ut),typeof e.warn!=`function`&&(e.warn=Wt),typeof e.error!=`function`&&(e.error=Gt),e}const qt=`octokit-core.js/${Ht} ${Pe()}`;var Jt=class{static VERSION=Ht;static defaults(e){return class extends this{constructor(...t){let n=t[0]||{};if(typeof e==`function`){super(e(n));return}super(Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){let t=this.plugins;return class extends this{static plugins=t.concat(e.filter(e=>!t.includes(e)))}}constructor(e={}){let t=new Ue.Collection,n={baseUrl:wt.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:t.bind(null,`request`)}),mediaType:{previews:[],format:``}};if(n.headers[`user-agent`]=e.userAgent?`${e.userAgent} ${qt}`:qt,e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers[`time-zone`]=e.timeZone),this.request=wt.defaults(n),this.graphql=Nt(this.request).defaults(n),this.log=Kt(e.log),this.hook=t,e.authStrategy){let{authStrategy:n,...r}=e,i=n(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:r},e.auth));t.wrap(`request`,i.hook),this.auth=i}else if(!e.auth)this.auth=async()=>({type:`unauthenticated`});else{let n=Vt(e.auth);t.wrap(`request`,n.hook),this.auth=n}let r=this.constructor;for(let t=0;t<r.plugins.length;++t)Object.assign(this,r.plugins[t](this,e))}request;graphql;log;hook;auth};const Yt=`17.0.0`;var Xt={actions:{addCustomLabelsToSelfHostedRunnerForOrg:[`POST /orgs/{org}/actions/runners/{runner_id}/labels`],addCustomLabelsToSelfHostedRunnerForRepo:[`POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],addRepoAccessToSelfHostedRunnerGroupInOrg:[`PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}`],addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}`],addSelectedRepoToOrgVariable:[`PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}`],approveWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve`],cancelWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel`],createEnvironmentVariable:[`POST /repos/{owner}/{repo}/environments/{environment_name}/variables`],createHostedRunnerForOrg:[`POST /orgs/{org}/actions/hosted-runners`],createOrUpdateEnvironmentSecret:[`PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}`],createOrgVariable:[`POST /orgs/{org}/actions/variables`],createRegistrationTokenForOrg:[`POST /orgs/{org}/actions/runners/registration-token`],createRegistrationTokenForRepo:[`POST /repos/{owner}/{repo}/actions/runners/registration-token`],createRemoveTokenForOrg:[`POST /orgs/{org}/actions/runners/remove-token`],createRemoveTokenForRepo:[`POST /repos/{owner}/{repo}/actions/runners/remove-token`],createRepoVariable:[`POST /repos/{owner}/{repo}/actions/variables`],createWorkflowDispatch:[`POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches`],deleteActionsCacheById:[`DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}`],deleteActionsCacheByKey:[`DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}`],deleteArtifact:[`DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}`],deleteCustomImageFromOrg:[`DELETE /orgs/{org}/actions/hosted-runners/images/custom/{image_definition_id}`],deleteCustomImageVersionFromOrg:[`DELETE /orgs/{org}/actions/hosted-runners/images/custom/{image_definition_id}/versions/{version}`],deleteEnvironmentSecret:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],deleteEnvironmentVariable:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],deleteHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],deleteOrgSecret:[`DELETE /orgs/{org}/actions/secrets/{secret_name}`],deleteOrgVariable:[`DELETE /orgs/{org}/actions/variables/{name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}`],deleteRepoVariable:[`DELETE /repos/{owner}/{repo}/actions/variables/{name}`],deleteSelfHostedRunnerFromOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}`],deleteSelfHostedRunnerFromRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}`],deleteWorkflowRun:[`DELETE /repos/{owner}/{repo}/actions/runs/{run_id}`],deleteWorkflowRunLogs:[`DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs`],disableSelectedRepositoryGithubActionsOrganization:[`DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}`],disableWorkflow:[`PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable`],downloadArtifact:[`GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}`],downloadJobLogsForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs`],downloadWorkflowRunAttemptLogs:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs`],downloadWorkflowRunLogs:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs`],enableSelectedRepositoryGithubActionsOrganization:[`PUT /orgs/{org}/actions/permissions/repositories/{repository_id}`],enableWorkflow:[`PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable`],forceCancelWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel`],generateRunnerJitconfigForOrg:[`POST /orgs/{org}/actions/runners/generate-jitconfig`],generateRunnerJitconfigForRepo:[`POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig`],getActionsCacheList:[`GET /repos/{owner}/{repo}/actions/caches`],getActionsCacheUsage:[`GET /repos/{owner}/{repo}/actions/cache/usage`],getActionsCacheUsageByRepoForOrg:[`GET /orgs/{org}/actions/cache/usage-by-repository`],getActionsCacheUsageForOrg:[`GET /orgs/{org}/actions/cache/usage`],getAllowedActionsOrganization:[`GET /orgs/{org}/actions/permissions/selected-actions`],getAllowedActionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions/selected-actions`],getArtifact:[`GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}`],getCustomImageForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/custom/{image_definition_id}`],getCustomImageVersionForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/custom/{image_definition_id}/versions/{version}`],getCustomOidcSubClaimForRepo:[`GET /repos/{owner}/{repo}/actions/oidc/customization/sub`],getEnvironmentPublicKey:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key`],getEnvironmentSecret:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],getEnvironmentVariable:[`GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],getGithubActionsDefaultWorkflowPermissionsOrganization:[`GET /orgs/{org}/actions/permissions/workflow`],getGithubActionsDefaultWorkflowPermissionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions/workflow`],getGithubActionsPermissionsOrganization:[`GET /orgs/{org}/actions/permissions`],getGithubActionsPermissionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions`],getHostedRunnerForOrg:[`GET /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],getHostedRunnersGithubOwnedImagesForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/github-owned`],getHostedRunnersLimitsForOrg:[`GET /orgs/{org}/actions/hosted-runners/limits`],getHostedRunnersMachineSpecsForOrg:[`GET /orgs/{org}/actions/hosted-runners/machine-sizes`],getHostedRunnersPartnerImagesForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/partner`],getHostedRunnersPlatformsForOrg:[`GET /orgs/{org}/actions/hosted-runners/platforms`],getJobForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/jobs/{job_id}`],getOrgPublicKey:[`GET /orgs/{org}/actions/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/actions/secrets/{secret_name}`],getOrgVariable:[`GET /orgs/{org}/actions/variables/{name}`],getPendingDeploymentsForRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments`],getRepoPermissions:[`GET /repos/{owner}/{repo}/actions/permissions`,{},{renamed:[`actions`,`getGithubActionsPermissionsRepository`]}],getRepoPublicKey:[`GET /repos/{owner}/{repo}/actions/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/actions/secrets/{secret_name}`],getRepoVariable:[`GET /repos/{owner}/{repo}/actions/variables/{name}`],getReviewsForRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals`],getSelfHostedRunnerForOrg:[`GET /orgs/{org}/actions/runners/{runner_id}`],getSelfHostedRunnerForRepo:[`GET /repos/{owner}/{repo}/actions/runners/{runner_id}`],getWorkflow:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}`],getWorkflowAccessToRepository:[`GET /repos/{owner}/{repo}/actions/permissions/access`],getWorkflowRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}`],getWorkflowRunAttempt:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}`],getWorkflowRunUsage:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing`],getWorkflowUsage:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing`],listArtifactsForRepo:[`GET /repos/{owner}/{repo}/actions/artifacts`],listCustomImageVersionsForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/custom/{image_definition_id}/versions`],listCustomImagesForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/custom`],listEnvironmentSecrets:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets`],listEnvironmentVariables:[`GET /repos/{owner}/{repo}/environments/{environment_name}/variables`],listGithubHostedRunnersInGroupForOrg:[`GET /orgs/{org}/actions/runner-groups/{runner_group_id}/hosted-runners`],listHostedRunnersForOrg:[`GET /orgs/{org}/actions/hosted-runners`],listJobsForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs`],listJobsForWorkflowRunAttempt:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs`],listLabelsForSelfHostedRunnerForOrg:[`GET /orgs/{org}/actions/runners/{runner_id}/labels`],listLabelsForSelfHostedRunnerForRepo:[`GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],listOrgSecrets:[`GET /orgs/{org}/actions/secrets`],listOrgVariables:[`GET /orgs/{org}/actions/variables`],listRepoOrganizationSecrets:[`GET /repos/{owner}/{repo}/actions/organization-secrets`],listRepoOrganizationVariables:[`GET /repos/{owner}/{repo}/actions/organization-variables`],listRepoSecrets:[`GET /repos/{owner}/{repo}/actions/secrets`],listRepoVariables:[`GET /repos/{owner}/{repo}/actions/variables`],listRepoWorkflows:[`GET /repos/{owner}/{repo}/actions/workflows`],listRunnerApplicationsForOrg:[`GET /orgs/{org}/actions/runners/downloads`],listRunnerApplicationsForRepo:[`GET /repos/{owner}/{repo}/actions/runners/downloads`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/actions/secrets/{secret_name}/repositories`],listSelectedReposForOrgVariable:[`GET /orgs/{org}/actions/variables/{name}/repositories`],listSelectedRepositoriesEnabledGithubActionsOrganization:[`GET /orgs/{org}/actions/permissions/repositories`],listSelfHostedRunnersForOrg:[`GET /orgs/{org}/actions/runners`],listSelfHostedRunnersForRepo:[`GET /repos/{owner}/{repo}/actions/runners`],listWorkflowRunArtifacts:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts`],listWorkflowRuns:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs`],listWorkflowRunsForRepo:[`GET /repos/{owner}/{repo}/actions/runs`],reRunJobForWorkflowRun:[`POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun`],reRunWorkflow:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun`],reRunWorkflowFailedJobs:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs`],removeAllCustomLabelsFromSelfHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}/labels`],removeAllCustomLabelsFromSelfHostedRunnerForRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],removeCustomLabelFromSelfHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}`],removeCustomLabelFromSelfHostedRunnerForRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}`],removeSelectedRepoFromOrgVariable:[`DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}`],reviewCustomGatesForRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule`],reviewPendingDeploymentsForRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments`],setAllowedActionsOrganization:[`PUT /orgs/{org}/actions/permissions/selected-actions`],setAllowedActionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/selected-actions`],setCustomLabelsForSelfHostedRunnerForOrg:[`PUT /orgs/{org}/actions/runners/{runner_id}/labels`],setCustomLabelsForSelfHostedRunnerForRepo:[`PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],setCustomOidcSubClaimForRepo:[`PUT /repos/{owner}/{repo}/actions/oidc/customization/sub`],setGithubActionsDefaultWorkflowPermissionsOrganization:[`PUT /orgs/{org}/actions/permissions/workflow`],setGithubActionsDefaultWorkflowPermissionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/workflow`],setGithubActionsPermissionsOrganization:[`PUT /orgs/{org}/actions/permissions`],setGithubActionsPermissionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}/repositories`],setSelectedReposForOrgVariable:[`PUT /orgs/{org}/actions/variables/{name}/repositories`],setSelectedRepositoriesEnabledGithubActionsOrganization:[`PUT /orgs/{org}/actions/permissions/repositories`],setWorkflowAccessToRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/access`],updateEnvironmentVariable:[`PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],updateHostedRunnerForOrg:[`PATCH /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],updateOrgVariable:[`PATCH /orgs/{org}/actions/variables/{name}`],updateRepoVariable:[`PATCH /repos/{owner}/{repo}/actions/variables/{name}`]},activity:{checkRepoIsStarredByAuthenticatedUser:[`GET /user/starred/{owner}/{repo}`],deleteRepoSubscription:[`DELETE /repos/{owner}/{repo}/subscription`],deleteThreadSubscription:[`DELETE /notifications/threads/{thread_id}/subscription`],getFeeds:[`GET /feeds`],getRepoSubscription:[`GET /repos/{owner}/{repo}/subscription`],getThread:[`GET /notifications/threads/{thread_id}`],getThreadSubscriptionForAuthenticatedUser:[`GET /notifications/threads/{thread_id}/subscription`],listEventsForAuthenticatedUser:[`GET /users/{username}/events`],listNotificationsForAuthenticatedUser:[`GET /notifications`],listOrgEventsForAuthenticatedUser:[`GET /users/{username}/events/orgs/{org}`],listPublicEvents:[`GET /events`],listPublicEventsForRepoNetwork:[`GET /networks/{owner}/{repo}/events`],listPublicEventsForUser:[`GET /users/{username}/events/public`],listPublicOrgEvents:[`GET /orgs/{org}/events`],listReceivedEventsForUser:[`GET /users/{username}/received_events`],listReceivedPublicEventsForUser:[`GET /users/{username}/received_events/public`],listRepoEvents:[`GET /repos/{owner}/{repo}/events`],listRepoNotificationsForAuthenticatedUser:[`GET /repos/{owner}/{repo}/notifications`],listReposStarredByAuthenticatedUser:[`GET /user/starred`],listReposStarredByUser:[`GET /users/{username}/starred`],listReposWatchedByUser:[`GET /users/{username}/subscriptions`],listStargazersForRepo:[`GET /repos/{owner}/{repo}/stargazers`],listWatchedReposForAuthenticatedUser:[`GET /user/subscriptions`],listWatchersForRepo:[`GET /repos/{owner}/{repo}/subscribers`],markNotificationsAsRead:[`PUT /notifications`],markRepoNotificationsAsRead:[`PUT /repos/{owner}/{repo}/notifications`],markThreadAsDone:[`DELETE /notifications/threads/{thread_id}`],markThreadAsRead:[`PATCH /notifications/threads/{thread_id}`],setRepoSubscription:[`PUT /repos/{owner}/{repo}/subscription`],setThreadSubscription:[`PUT /notifications/threads/{thread_id}/subscription`],starRepoForAuthenticatedUser:[`PUT /user/starred/{owner}/{repo}`],unstarRepoForAuthenticatedUser:[`DELETE /user/starred/{owner}/{repo}`]},apps:{addRepoToInstallation:[`PUT /user/installations/{installation_id}/repositories/{repository_id}`,{},{renamed:[`apps`,`addRepoToInstallationForAuthenticatedUser`]}],addRepoToInstallationForAuthenticatedUser:[`PUT /user/installations/{installation_id}/repositories/{repository_id}`],checkToken:[`POST /applications/{client_id}/token`],createFromManifest:[`POST /app-manifests/{code}/conversions`],createInstallationAccessToken:[`POST /app/installations/{installation_id}/access_tokens`],deleteAuthorization:[`DELETE /applications/{client_id}/grant`],deleteInstallation:[`DELETE /app/installations/{installation_id}`],deleteToken:[`DELETE /applications/{client_id}/token`],getAuthenticated:[`GET /app`],getBySlug:[`GET /apps/{app_slug}`],getInstallation:[`GET /app/installations/{installation_id}`],getOrgInstallation:[`GET /orgs/{org}/installation`],getRepoInstallation:[`GET /repos/{owner}/{repo}/installation`],getSubscriptionPlanForAccount:[`GET /marketplace_listing/accounts/{account_id}`],getSubscriptionPlanForAccountStubbed:[`GET /marketplace_listing/stubbed/accounts/{account_id}`],getUserInstallation:[`GET /users/{username}/installation`],getWebhookConfigForApp:[`GET /app/hook/config`],getWebhookDelivery:[`GET /app/hook/deliveries/{delivery_id}`],listAccountsForPlan:[`GET /marketplace_listing/plans/{plan_id}/accounts`],listAccountsForPlanStubbed:[`GET /marketplace_listing/stubbed/plans/{plan_id}/accounts`],listInstallationReposForAuthenticatedUser:[`GET /user/installations/{installation_id}/repositories`],listInstallationRequestsForAuthenticatedApp:[`GET /app/installation-requests`],listInstallations:[`GET /app/installations`],listInstallationsForAuthenticatedUser:[`GET /user/installations`],listPlans:[`GET /marketplace_listing/plans`],listPlansStubbed:[`GET /marketplace_listing/stubbed/plans`],listReposAccessibleToInstallation:[`GET /installation/repositories`],listSubscriptionsForAuthenticatedUser:[`GET /user/marketplace_purchases`],listSubscriptionsForAuthenticatedUserStubbed:[`GET /user/marketplace_purchases/stubbed`],listWebhookDeliveries:[`GET /app/hook/deliveries`],redeliverWebhookDelivery:[`POST /app/hook/deliveries/{delivery_id}/attempts`],removeRepoFromInstallation:[`DELETE /user/installations/{installation_id}/repositories/{repository_id}`,{},{renamed:[`apps`,`removeRepoFromInstallationForAuthenticatedUser`]}],removeRepoFromInstallationForAuthenticatedUser:[`DELETE /user/installations/{installation_id}/repositories/{repository_id}`],resetToken:[`PATCH /applications/{client_id}/token`],revokeInstallationAccessToken:[`DELETE /installation/token`],scopeToken:[`POST /applications/{client_id}/token/scoped`],suspendInstallation:[`PUT /app/installations/{installation_id}/suspended`],unsuspendInstallation:[`DELETE /app/installations/{installation_id}/suspended`],updateWebhookConfigForApp:[`PATCH /app/hook/config`]},billing:{getGithubActionsBillingOrg:[`GET /orgs/{org}/settings/billing/actions`],getGithubActionsBillingUser:[`GET /users/{username}/settings/billing/actions`],getGithubBillingPremiumRequestUsageReportOrg:[`GET /organizations/{org}/settings/billing/premium_request/usage`],getGithubBillingPremiumRequestUsageReportUser:[`GET /users/{username}/settings/billing/premium_request/usage`],getGithubBillingUsageReportOrg:[`GET /organizations/{org}/settings/billing/usage`],getGithubBillingUsageReportUser:[`GET /users/{username}/settings/billing/usage`],getGithubPackagesBillingOrg:[`GET /orgs/{org}/settings/billing/packages`],getGithubPackagesBillingUser:[`GET /users/{username}/settings/billing/packages`],getSharedStorageBillingOrg:[`GET /orgs/{org}/settings/billing/shared-storage`],getSharedStorageBillingUser:[`GET /users/{username}/settings/billing/shared-storage`]},campaigns:{createCampaign:[`POST /orgs/{org}/campaigns`],deleteCampaign:[`DELETE /orgs/{org}/campaigns/{campaign_number}`],getCampaignSummary:[`GET /orgs/{org}/campaigns/{campaign_number}`],listOrgCampaigns:[`GET /orgs/{org}/campaigns`],updateCampaign:[`PATCH /orgs/{org}/campaigns/{campaign_number}`]},checks:{create:[`POST /repos/{owner}/{repo}/check-runs`],createSuite:[`POST /repos/{owner}/{repo}/check-suites`],get:[`GET /repos/{owner}/{repo}/check-runs/{check_run_id}`],getSuite:[`GET /repos/{owner}/{repo}/check-suites/{check_suite_id}`],listAnnotations:[`GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations`],listForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/check-runs`],listForSuite:[`GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs`],listSuitesForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/check-suites`],rerequestRun:[`POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest`],rerequestSuite:[`POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest`],setSuitesPreferences:[`PATCH /repos/{owner}/{repo}/check-suites/preferences`],update:[`PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}`]},codeScanning:{commitAutofix:[`POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits`],createAutofix:[`POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix`],createVariantAnalysis:[`POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses`],deleteAnalysis:[`DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}`],deleteCodeqlDatabase:[`DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}`],getAlert:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}`,{},{renamedParameters:{alert_id:`alert_number`}}],getAnalysis:[`GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}`],getAutofix:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix`],getCodeqlDatabase:[`GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}`],getDefaultSetup:[`GET /repos/{owner}/{repo}/code-scanning/default-setup`],getSarif:[`GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}`],getVariantAnalysis:[`GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}`],getVariantAnalysisRepoTask:[`GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}`],listAlertInstances:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances`],listAlertsForOrg:[`GET /orgs/{org}/code-scanning/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/code-scanning/alerts`],listAlertsInstances:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances`,{},{renamed:[`codeScanning`,`listAlertInstances`]}],listCodeqlDatabases:[`GET /repos/{owner}/{repo}/code-scanning/codeql/databases`],listRecentAnalyses:[`GET /repos/{owner}/{repo}/code-scanning/analyses`],updateAlert:[`PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}`],updateDefaultSetup:[`PATCH /repos/{owner}/{repo}/code-scanning/default-setup`],uploadSarif:[`POST /repos/{owner}/{repo}/code-scanning/sarifs`]},codeSecurity:{attachConfiguration:[`POST /orgs/{org}/code-security/configurations/{configuration_id}/attach`],attachEnterpriseConfiguration:[`POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach`],createConfiguration:[`POST /orgs/{org}/code-security/configurations`],createConfigurationForEnterprise:[`POST /enterprises/{enterprise}/code-security/configurations`],deleteConfiguration:[`DELETE /orgs/{org}/code-security/configurations/{configuration_id}`],deleteConfigurationForEnterprise:[`DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}`],detachConfiguration:[`DELETE /orgs/{org}/code-security/configurations/detach`],getConfiguration:[`GET /orgs/{org}/code-security/configurations/{configuration_id}`],getConfigurationForRepository:[`GET /repos/{owner}/{repo}/code-security-configuration`],getConfigurationsForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations`],getConfigurationsForOrg:[`GET /orgs/{org}/code-security/configurations`],getDefaultConfigurations:[`GET /orgs/{org}/code-security/configurations/defaults`],getDefaultConfigurationsForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations/defaults`],getRepositoriesForConfiguration:[`GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories`],getRepositoriesForEnterpriseConfiguration:[`GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories`],getSingleConfigurationForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}`],setConfigurationAsDefault:[`PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults`],setConfigurationAsDefaultForEnterprise:[`PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults`],updateConfiguration:[`PATCH /orgs/{org}/code-security/configurations/{configuration_id}`],updateEnterpriseConfiguration:[`PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}`]},codesOfConduct:{getAllCodesOfConduct:[`GET /codes_of_conduct`],getConductCode:[`GET /codes_of_conduct/{key}`]},codespaces:{addRepositoryForSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}`],addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}`],checkPermissionsForDevcontainer:[`GET /repos/{owner}/{repo}/codespaces/permissions_check`],codespaceMachinesForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}/machines`],createForAuthenticatedUser:[`POST /user/codespaces`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],createOrUpdateSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}`],createWithPrForAuthenticatedUser:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces`],createWithRepoForAuthenticatedUser:[`POST /repos/{owner}/{repo}/codespaces`],deleteForAuthenticatedUser:[`DELETE /user/codespaces/{codespace_name}`],deleteFromOrganization:[`DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}`],deleteOrgSecret:[`DELETE /orgs/{org}/codespaces/secrets/{secret_name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],deleteSecretForAuthenticatedUser:[`DELETE /user/codespaces/secrets/{secret_name}`],exportForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/exports`],getCodespacesForUserInOrg:[`GET /orgs/{org}/members/{username}/codespaces`],getExportDetailsForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}/exports/{export_id}`],getForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}`],getOrgPublicKey:[`GET /orgs/{org}/codespaces/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/codespaces/secrets/{secret_name}`],getPublicKeyForAuthenticatedUser:[`GET /user/codespaces/secrets/public-key`],getRepoPublicKey:[`GET /repos/{owner}/{repo}/codespaces/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],getSecretForAuthenticatedUser:[`GET /user/codespaces/secrets/{secret_name}`],listDevcontainersInRepositoryForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/devcontainers`],listForAuthenticatedUser:[`GET /user/codespaces`],listInOrganization:[`GET /orgs/{org}/codespaces`,{},{renamedParameters:{org_id:`org`}}],listInRepositoryForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces`],listOrgSecrets:[`GET /orgs/{org}/codespaces/secrets`],listRepoSecrets:[`GET /repos/{owner}/{repo}/codespaces/secrets`],listRepositoriesForSecretForAuthenticatedUser:[`GET /user/codespaces/secrets/{secret_name}/repositories`],listSecretsForAuthenticatedUser:[`GET /user/codespaces/secrets`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories`],preFlightWithRepoForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/new`],publishForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/publish`],removeRepositoryForSecretForAuthenticatedUser:[`DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}`],repoMachinesForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/machines`],setRepositoriesForSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}/repositories`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories`],startForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/start`],stopForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/stop`],stopInOrganization:[`POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop`],updateForAuthenticatedUser:[`PATCH /user/codespaces/{codespace_name}`]},copilot:{addCopilotSeatsForTeams:[`POST /orgs/{org}/copilot/billing/selected_teams`],addCopilotSeatsForUsers:[`POST /orgs/{org}/copilot/billing/selected_users`],cancelCopilotSeatAssignmentForTeams:[`DELETE /orgs/{org}/copilot/billing/selected_teams`],cancelCopilotSeatAssignmentForUsers:[`DELETE /orgs/{org}/copilot/billing/selected_users`],copilotMetricsForOrganization:[`GET /orgs/{org}/copilot/metrics`],copilotMetricsForTeam:[`GET /orgs/{org}/team/{team_slug}/copilot/metrics`],getCopilotOrganizationDetails:[`GET /orgs/{org}/copilot/billing`],getCopilotSeatDetailsForUser:[`GET /orgs/{org}/members/{username}/copilot`],listCopilotSeats:[`GET /orgs/{org}/copilot/billing/seats`]},credentials:{revoke:[`POST /credentials/revoke`]},dependabot:{addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],deleteOrgSecret:[`DELETE /orgs/{org}/dependabot/secrets/{secret_name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],getAlert:[`GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}`],getOrgPublicKey:[`GET /orgs/{org}/dependabot/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/dependabot/secrets/{secret_name}`],getRepoPublicKey:[`GET /repos/{owner}/{repo}/dependabot/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],listAlertsForEnterprise:[`GET /enterprises/{enterprise}/dependabot/alerts`],listAlertsForOrg:[`GET /orgs/{org}/dependabot/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/dependabot/alerts`],listOrgSecrets:[`GET /orgs/{org}/dependabot/secrets`],listRepoSecrets:[`GET /repos/{owner}/{repo}/dependabot/secrets`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}`],repositoryAccessForOrg:[`GET /organizations/{org}/dependabot/repository-access`],setRepositoryAccessDefaultLevel:[`PUT /organizations/{org}/dependabot/repository-access/default-level`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories`],updateAlert:[`PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}`],updateRepositoryAccessForOrg:[`PATCH /organizations/{org}/dependabot/repository-access`]},dependencyGraph:{createRepositorySnapshot:[`POST /repos/{owner}/{repo}/dependency-graph/snapshots`],diffRange:[`GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}`],exportSbom:[`GET /repos/{owner}/{repo}/dependency-graph/sbom`]},emojis:{get:[`GET /emojis`]},enterpriseTeamMemberships:{add:[`PUT /enterprises/{enterprise}/teams/{enterprise-team}/memberships/{username}`],bulkAdd:[`POST /enterprises/{enterprise}/teams/{enterprise-team}/memberships/add`],bulkRemove:[`POST /enterprises/{enterprise}/teams/{enterprise-team}/memberships/remove`],get:[`GET /enterprises/{enterprise}/teams/{enterprise-team}/memberships/{username}`],list:[`GET /enterprises/{enterprise}/teams/{enterprise-team}/memberships`],remove:[`DELETE /enterprises/{enterprise}/teams/{enterprise-team}/memberships/{username}`]},enterpriseTeamOrganizations:{add:[`PUT /enterprises/{enterprise}/teams/{enterprise-team}/organizations/{org}`],bulkAdd:[`POST /enterprises/{enterprise}/teams/{enterprise-team}/organizations/add`],bulkRemove:[`POST /enterprises/{enterprise}/teams/{enterprise-team}/organizations/remove`],delete:[`DELETE /enterprises/{enterprise}/teams/{enterprise-team}/organizations/{org}`],getAssignment:[`GET /enterprises/{enterprise}/teams/{enterprise-team}/organizations/{org}`],getAssignments:[`GET /enterprises/{enterprise}/teams/{enterprise-team}/organizations`]},enterpriseTeams:{create:[`POST /enterprises/{enterprise}/teams`],delete:[`DELETE /enterprises/{enterprise}/teams/{team_slug}`],get:[`GET /enterprises/{enterprise}/teams/{team_slug}`],list:[`GET /enterprises/{enterprise}/teams`],update:[`PATCH /enterprises/{enterprise}/teams/{team_slug}`]},gists:{checkIsStarred:[`GET /gists/{gist_id}/star`],create:[`POST /gists`],createComment:[`POST /gists/{gist_id}/comments`],delete:[`DELETE /gists/{gist_id}`],deleteComment:[`DELETE /gists/{gist_id}/comments/{comment_id}`],fork:[`POST /gists/{gist_id}/forks`],get:[`GET /gists/{gist_id}`],getComment:[`GET /gists/{gist_id}/comments/{comment_id}`],getRevision:[`GET /gists/{gist_id}/{sha}`],list:[`GET /gists`],listComments:[`GET /gists/{gist_id}/comments`],listCommits:[`GET /gists/{gist_id}/commits`],listForUser:[`GET /users/{username}/gists`],listForks:[`GET /gists/{gist_id}/forks`],listPublic:[`GET /gists/public`],listStarred:[`GET /gists/starred`],star:[`PUT /gists/{gist_id}/star`],unstar:[`DELETE /gists/{gist_id}/star`],update:[`PATCH /gists/{gist_id}`],updateComment:[`PATCH /gists/{gist_id}/comments/{comment_id}`]},git:{createBlob:[`POST /repos/{owner}/{repo}/git/blobs`],createCommit:[`POST /repos/{owner}/{repo}/git/commits`],createRef:[`POST /repos/{owner}/{repo}/git/refs`],createTag:[`POST /repos/{owner}/{repo}/git/tags`],createTree:[`POST /repos/{owner}/{repo}/git/trees`],deleteRef:[`DELETE /repos/{owner}/{repo}/git/refs/{ref}`],getBlob:[`GET /repos/{owner}/{repo}/git/blobs/{file_sha}`],getCommit:[`GET /repos/{owner}/{repo}/git/commits/{commit_sha}`],getRef:[`GET /repos/{owner}/{repo}/git/ref/{ref}`],getTag:[`GET /repos/{owner}/{repo}/git/tags/{tag_sha}`],getTree:[`GET /repos/{owner}/{repo}/git/trees/{tree_sha}`],listMatchingRefs:[`GET /repos/{owner}/{repo}/git/matching-refs/{ref}`],updateRef:[`PATCH /repos/{owner}/{repo}/git/refs/{ref}`]},gitignore:{getAllTemplates:[`GET /gitignore/templates`],getTemplate:[`GET /gitignore/templates/{name}`]},hostedCompute:{createNetworkConfigurationForOrg:[`POST /orgs/{org}/settings/network-configurations`],deleteNetworkConfigurationFromOrg:[`DELETE /orgs/{org}/settings/network-configurations/{network_configuration_id}`],getNetworkConfigurationForOrg:[`GET /orgs/{org}/settings/network-configurations/{network_configuration_id}`],getNetworkSettingsForOrg:[`GET /orgs/{org}/settings/network-settings/{network_settings_id}`],listNetworkConfigurationsForOrg:[`GET /orgs/{org}/settings/network-configurations`],updateNetworkConfigurationForOrg:[`PATCH /orgs/{org}/settings/network-configurations/{network_configuration_id}`]},interactions:{getRestrictionsForAuthenticatedUser:[`GET /user/interaction-limits`],getRestrictionsForOrg:[`GET /orgs/{org}/interaction-limits`],getRestrictionsForRepo:[`GET /repos/{owner}/{repo}/interaction-limits`],getRestrictionsForYourPublicRepos:[`GET /user/interaction-limits`,{},{renamed:[`interactions`,`getRestrictionsForAuthenticatedUser`]}],removeRestrictionsForAuthenticatedUser:[`DELETE /user/interaction-limits`],removeRestrictionsForOrg:[`DELETE /orgs/{org}/interaction-limits`],removeRestrictionsForRepo:[`DELETE /repos/{owner}/{repo}/interaction-limits`],removeRestrictionsForYourPublicRepos:[`DELETE /user/interaction-limits`,{},{renamed:[`interactions`,`removeRestrictionsForAuthenticatedUser`]}],setRestrictionsForAuthenticatedUser:[`PUT /user/interaction-limits`],setRestrictionsForOrg:[`PUT /orgs/{org}/interaction-limits`],setRestrictionsForRepo:[`PUT /repos/{owner}/{repo}/interaction-limits`],setRestrictionsForYourPublicRepos:[`PUT /user/interaction-limits`,{},{renamed:[`interactions`,`setRestrictionsForAuthenticatedUser`]}]},issues:{addAssignees:[`POST /repos/{owner}/{repo}/issues/{issue_number}/assignees`],addBlockedByDependency:[`POST /repos/{owner}/{repo}/issues/{issue_number}/dependencies/blocked_by`],addLabels:[`POST /repos/{owner}/{repo}/issues/{issue_number}/labels`],addSubIssue:[`POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues`],checkUserCanBeAssigned:[`GET /repos/{owner}/{repo}/assignees/{assignee}`],checkUserCanBeAssignedToIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}`],create:[`POST /repos/{owner}/{repo}/issues`],createComment:[`POST /repos/{owner}/{repo}/issues/{issue_number}/comments`],createLabel:[`POST /repos/{owner}/{repo}/labels`],createMilestone:[`POST /repos/{owner}/{repo}/milestones`],deleteComment:[`DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}`],deleteLabel:[`DELETE /repos/{owner}/{repo}/labels/{name}`],deleteMilestone:[`DELETE /repos/{owner}/{repo}/milestones/{milestone_number}`],get:[`GET /repos/{owner}/{repo}/issues/{issue_number}`],getComment:[`GET /repos/{owner}/{repo}/issues/comments/{comment_id}`],getEvent:[`GET /repos/{owner}/{repo}/issues/events/{event_id}`],getLabel:[`GET /repos/{owner}/{repo}/labels/{name}`],getMilestone:[`GET /repos/{owner}/{repo}/milestones/{milestone_number}`],getParent:[`GET /repos/{owner}/{repo}/issues/{issue_number}/parent`],list:[`GET /issues`],listAssignees:[`GET /repos/{owner}/{repo}/assignees`],listComments:[`GET /repos/{owner}/{repo}/issues/{issue_number}/comments`],listCommentsForRepo:[`GET /repos/{owner}/{repo}/issues/comments`],listDependenciesBlockedBy:[`GET /repos/{owner}/{repo}/issues/{issue_number}/dependencies/blocked_by`],listDependenciesBlocking:[`GET /repos/{owner}/{repo}/issues/{issue_number}/dependencies/blocking`],listEvents:[`GET /repos/{owner}/{repo}/issues/{issue_number}/events`],listEventsForRepo:[`GET /repos/{owner}/{repo}/issues/events`],listEventsForTimeline:[`GET /repos/{owner}/{repo}/issues/{issue_number}/timeline`],listForAuthenticatedUser:[`GET /user/issues`],listForOrg:[`GET /orgs/{org}/issues`],listForRepo:[`GET /repos/{owner}/{repo}/issues`],listLabelsForMilestone:[`GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels`],listLabelsForRepo:[`GET /repos/{owner}/{repo}/labels`],listLabelsOnIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/labels`],listMilestones:[`GET /repos/{owner}/{repo}/milestones`],listSubIssues:[`GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues`],lock:[`PUT /repos/{owner}/{repo}/issues/{issue_number}/lock`],removeAllLabels:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels`],removeAssignees:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees`],removeDependencyBlockedBy:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/dependencies/blocked_by/{issue_id}`],removeLabel:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}`],removeSubIssue:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue`],reprioritizeSubIssue:[`PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority`],setLabels:[`PUT /repos/{owner}/{repo}/issues/{issue_number}/labels`],unlock:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock`],update:[`PATCH /repos/{owner}/{repo}/issues/{issue_number}`],updateComment:[`PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}`],updateLabel:[`PATCH /repos/{owner}/{repo}/labels/{name}`],updateMilestone:[`PATCH /repos/{owner}/{repo}/milestones/{milestone_number}`]},licenses:{get:[`GET /licenses/{license}`],getAllCommonlyUsed:[`GET /licenses`],getForRepo:[`GET /repos/{owner}/{repo}/license`]},markdown:{render:[`POST /markdown`],renderRaw:[`POST /markdown/raw`,{headers:{"content-type":`text/plain; charset=utf-8`}}]},meta:{get:[`GET /meta`],getAllVersions:[`GET /versions`],getOctocat:[`GET /octocat`],getZen:[`GET /zen`],root:[`GET /`]},migrations:{deleteArchiveForAuthenticatedUser:[`DELETE /user/migrations/{migration_id}/archive`],deleteArchiveForOrg:[`DELETE /orgs/{org}/migrations/{migration_id}/archive`],downloadArchiveForOrg:[`GET /orgs/{org}/migrations/{migration_id}/archive`],getArchiveForAuthenticatedUser:[`GET /user/migrations/{migration_id}/archive`],getStatusForAuthenticatedUser:[`GET /user/migrations/{migration_id}`],getStatusForOrg:[`GET /orgs/{org}/migrations/{migration_id}`],listForAuthenticatedUser:[`GET /user/migrations`],listForOrg:[`GET /orgs/{org}/migrations`],listReposForAuthenticatedUser:[`GET /user/migrations/{migration_id}/repositories`],listReposForOrg:[`GET /orgs/{org}/migrations/{migration_id}/repositories`],listReposForUser:[`GET /user/migrations/{migration_id}/repositories`,{},{renamed:[`migrations`,`listReposForAuthenticatedUser`]}],startForAuthenticatedUser:[`POST /user/migrations`],startForOrg:[`POST /orgs/{org}/migrations`],unlockRepoForAuthenticatedUser:[`DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock`],unlockRepoForOrg:[`DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock`]},oidc:{getOidcCustomSubTemplateForOrg:[`GET /orgs/{org}/actions/oidc/customization/sub`],updateOidcCustomSubTemplateForOrg:[`PUT /orgs/{org}/actions/oidc/customization/sub`]},orgs:{addSecurityManagerTeam:[`PUT /orgs/{org}/security-managers/teams/{team_slug}`,{},{deprecated:`octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team`}],assignTeamToOrgRole:[`PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}`],assignUserToOrgRole:[`PUT /orgs/{org}/organization-roles/users/{username}/{role_id}`],blockUser:[`PUT /orgs/{org}/blocks/{username}`],cancelInvitation:[`DELETE /orgs/{org}/invitations/{invitation_id}`],checkBlockedUser:[`GET /orgs/{org}/blocks/{username}`],checkMembershipForUser:[`GET /orgs/{org}/members/{username}`],checkPublicMembershipForUser:[`GET /orgs/{org}/public_members/{username}`],convertMemberToOutsideCollaborator:[`PUT /orgs/{org}/outside_collaborators/{username}`],createArtifactStorageRecord:[`POST /orgs/{org}/artifacts/metadata/storage-record`],createInvitation:[`POST /orgs/{org}/invitations`],createIssueType:[`POST /orgs/{org}/issue-types`],createWebhook:[`POST /orgs/{org}/hooks`],customPropertiesForOrgsCreateOrUpdateOrganizationValues:[`PATCH /organizations/{org}/org-properties/values`],customPropertiesForOrgsGetOrganizationValues:[`GET /organizations/{org}/org-properties/values`],customPropertiesForReposCreateOrUpdateOrganizationDefinition:[`PUT /orgs/{org}/properties/schema/{custom_property_name}`],customPropertiesForReposCreateOrUpdateOrganizationDefinitions:[`PATCH /orgs/{org}/properties/schema`],customPropertiesForReposCreateOrUpdateOrganizationValues:[`PATCH /orgs/{org}/properties/values`],customPropertiesForReposDeleteOrganizationDefinition:[`DELETE /orgs/{org}/properties/schema/{custom_property_name}`],customPropertiesForReposGetOrganizationDefinition:[`GET /orgs/{org}/properties/schema/{custom_property_name}`],customPropertiesForReposGetOrganizationDefinitions:[`GET /orgs/{org}/properties/schema`],customPropertiesForReposGetOrganizationValues:[`GET /orgs/{org}/properties/values`],delete:[`DELETE /orgs/{org}`],deleteAttestationsBulk:[`POST /orgs/{org}/attestations/delete-request`],deleteAttestationsById:[`DELETE /orgs/{org}/attestations/{attestation_id}`],deleteAttestationsBySubjectDigest:[`DELETE /orgs/{org}/attestations/digest/{subject_digest}`],deleteIssueType:[`DELETE /orgs/{org}/issue-types/{issue_type_id}`],deleteWebhook:[`DELETE /orgs/{org}/hooks/{hook_id}`],disableSelectedRepositoryImmutableReleasesOrganization:[`DELETE /orgs/{org}/settings/immutable-releases/repositories/{repository_id}`],enableSelectedRepositoryImmutableReleasesOrganization:[`PUT /orgs/{org}/settings/immutable-releases/repositories/{repository_id}`],get:[`GET /orgs/{org}`],getImmutableReleasesSettings:[`GET /orgs/{org}/settings/immutable-releases`],getImmutableReleasesSettingsRepositories:[`GET /orgs/{org}/settings/immutable-releases/repositories`],getMembershipForAuthenticatedUser:[`GET /user/memberships/orgs/{org}`],getMembershipForUser:[`GET /orgs/{org}/memberships/{username}`],getOrgRole:[`GET /orgs/{org}/organization-roles/{role_id}`],getOrgRulesetHistory:[`GET /orgs/{org}/rulesets/{ruleset_id}/history`],getOrgRulesetVersion:[`GET /orgs/{org}/rulesets/{ruleset_id}/history/{version_id}`],getWebhook:[`GET /orgs/{org}/hooks/{hook_id}`],getWebhookConfigForOrg:[`GET /orgs/{org}/hooks/{hook_id}/config`],getWebhookDelivery:[`GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}`],list:[`GET /organizations`],listAppInstallations:[`GET /orgs/{org}/installations`],listArtifactStorageRecords:[`GET /orgs/{org}/artifacts/{subject_digest}/metadata/storage-records`],listAttestationRepositories:[`GET /orgs/{org}/attestations/repositories`],listAttestations:[`GET /orgs/{org}/attestations/{subject_digest}`],listAttestationsBulk:[`POST /orgs/{org}/attestations/bulk-list{?per_page,before,after}`],listBlockedUsers:[`GET /orgs/{org}/blocks`],listFailedInvitations:[`GET /orgs/{org}/failed_invitations`],listForAuthenticatedUser:[`GET /user/orgs`],listForUser:[`GET /users/{username}/orgs`],listInvitationTeams:[`GET /orgs/{org}/invitations/{invitation_id}/teams`],listIssueTypes:[`GET /orgs/{org}/issue-types`],listMembers:[`GET /orgs/{org}/members`],listMembershipsForAuthenticatedUser:[`GET /user/memberships/orgs`],listOrgRoleTeams:[`GET /orgs/{org}/organization-roles/{role_id}/teams`],listOrgRoleUsers:[`GET /orgs/{org}/organization-roles/{role_id}/users`],listOrgRoles:[`GET /orgs/{org}/organization-roles`],listOrganizationFineGrainedPermissions:[`GET /orgs/{org}/organization-fine-grained-permissions`],listOutsideCollaborators:[`GET /orgs/{org}/outside_collaborators`],listPatGrantRepositories:[`GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories`],listPatGrantRequestRepositories:[`GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories`],listPatGrantRequests:[`GET /orgs/{org}/personal-access-token-requests`],listPatGrants:[`GET /orgs/{org}/personal-access-tokens`],listPendingInvitations:[`GET /orgs/{org}/invitations`],listPublicMembers:[`GET /orgs/{org}/public_members`],listSecurityManagerTeams:[`GET /orgs/{org}/security-managers`,{},{deprecated:`octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams`}],listWebhookDeliveries:[`GET /orgs/{org}/hooks/{hook_id}/deliveries`],listWebhooks:[`GET /orgs/{org}/hooks`],pingWebhook:[`POST /orgs/{org}/hooks/{hook_id}/pings`],redeliverWebhookDelivery:[`POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts`],removeMember:[`DELETE /orgs/{org}/members/{username}`],removeMembershipForUser:[`DELETE /orgs/{org}/memberships/{username}`],removeOutsideCollaborator:[`DELETE /orgs/{org}/outside_collaborators/{username}`],removePublicMembershipForAuthenticatedUser:[`DELETE /orgs/{org}/public_members/{username}`],removeSecurityManagerTeam:[`DELETE /orgs/{org}/security-managers/teams/{team_slug}`,{},{deprecated:`octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team`}],reviewPatGrantRequest:[`POST /orgs/{org}/personal-access-token-requests/{pat_request_id}`],reviewPatGrantRequestsInBulk:[`POST /orgs/{org}/personal-access-token-requests`],revokeAllOrgRolesTeam:[`DELETE /orgs/{org}/organization-roles/teams/{team_slug}`],revokeAllOrgRolesUser:[`DELETE /orgs/{org}/organization-roles/users/{username}`],revokeOrgRoleTeam:[`DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}`],revokeOrgRoleUser:[`DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}`],setImmutableReleasesSettings:[`PUT /orgs/{org}/settings/immutable-releases`],setImmutableReleasesSettingsRepositories:[`PUT /orgs/{org}/settings/immutable-releases/repositories`],setMembershipForUser:[`PUT /orgs/{org}/memberships/{username}`],setPublicMembershipForAuthenticatedUser:[`PUT /orgs/{org}/public_members/{username}`],unblockUser:[`DELETE /orgs/{org}/blocks/{username}`],update:[`PATCH /orgs/{org}`],updateIssueType:[`PUT /orgs/{org}/issue-types/{issue_type_id}`],updateMembershipForAuthenticatedUser:[`PATCH /user/memberships/orgs/{org}`],updatePatAccess:[`POST /orgs/{org}/personal-access-tokens/{pat_id}`],updatePatAccesses:[`POST /orgs/{org}/personal-access-tokens`],updateWebhook:[`PATCH /orgs/{org}/hooks/{hook_id}`],updateWebhookConfigForOrg:[`PATCH /orgs/{org}/hooks/{hook_id}/config`]},packages:{deletePackageForAuthenticatedUser:[`DELETE /user/packages/{package_type}/{package_name}`],deletePackageForOrg:[`DELETE /orgs/{org}/packages/{package_type}/{package_name}`],deletePackageForUser:[`DELETE /users/{username}/packages/{package_type}/{package_name}`],deletePackageVersionForAuthenticatedUser:[`DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}`],deletePackageVersionForOrg:[`DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}`],deletePackageVersionForUser:[`DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}`],getAllPackageVersionsForAPackageOwnedByAnOrg:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions`,{},{renamed:[`packages`,`getAllPackageVersionsForPackageOwnedByOrg`]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions`,{},{renamed:[`packages`,`getAllPackageVersionsForPackageOwnedByAuthenticatedUser`]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions`],getAllPackageVersionsForPackageOwnedByOrg:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions`],getAllPackageVersionsForPackageOwnedByUser:[`GET /users/{username}/packages/{package_type}/{package_name}/versions`],getPackageForAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}`],getPackageForOrganization:[`GET /orgs/{org}/packages/{package_type}/{package_name}`],getPackageForUser:[`GET /users/{username}/packages/{package_type}/{package_name}`],getPackageVersionForAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}`],getPackageVersionForOrganization:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}`],getPackageVersionForUser:[`GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}`],listDockerMigrationConflictingPackagesForAuthenticatedUser:[`GET /user/docker/conflicts`],listDockerMigrationConflictingPackagesForOrganization:[`GET /orgs/{org}/docker/conflicts`],listDockerMigrationConflictingPackagesForUser:[`GET /users/{username}/docker/conflicts`],listPackagesForAuthenticatedUser:[`GET /user/packages`],listPackagesForOrganization:[`GET /orgs/{org}/packages`],listPackagesForUser:[`GET /users/{username}/packages`],restorePackageForAuthenticatedUser:[`POST /user/packages/{package_type}/{package_name}/restore{?token}`],restorePackageForOrg:[`POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}`],restorePackageForUser:[`POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}`],restorePackageVersionForAuthenticatedUser:[`POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`],restorePackageVersionForOrg:[`POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`],restorePackageVersionForUser:[`POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`]},privateRegistries:{createOrgPrivateRegistry:[`POST /orgs/{org}/private-registries`],deleteOrgPrivateRegistry:[`DELETE /orgs/{org}/private-registries/{secret_name}`],getOrgPrivateRegistry:[`GET /orgs/{org}/private-registries/{secret_name}`],getOrgPublicKey:[`GET /orgs/{org}/private-registries/public-key`],listOrgPrivateRegistries:[`GET /orgs/{org}/private-registries`],updateOrgPrivateRegistry:[`PATCH /orgs/{org}/private-registries/{secret_name}`]},projects:{addItemForOrg:[`POST /orgs/{org}/projectsV2/{project_number}/items`],addItemForUser:[`POST /users/{username}/projectsV2/{project_number}/items`],deleteItemForOrg:[`DELETE /orgs/{org}/projectsV2/{project_number}/items/{item_id}`],deleteItemForUser:[`DELETE /users/{username}/projectsV2/{project_number}/items/{item_id}`],getFieldForOrg:[`GET /orgs/{org}/projectsV2/{project_number}/fields/{field_id}`],getFieldForUser:[`GET /users/{username}/projectsV2/{project_number}/fields/{field_id}`],getForOrg:[`GET /orgs/{org}/projectsV2/{project_number}`],getForUser:[`GET /users/{username}/projectsV2/{project_number}`],getOrgItem:[`GET /orgs/{org}/projectsV2/{project_number}/items/{item_id}`],getUserItem:[`GET /users/{username}/projectsV2/{project_number}/items/{item_id}`],listFieldsForOrg:[`GET /orgs/{org}/projectsV2/{project_number}/fields`],listFieldsForUser:[`GET /users/{username}/projectsV2/{project_number}/fields`],listForOrg:[`GET /orgs/{org}/projectsV2`],listForUser:[`GET /users/{username}/projectsV2`],listItemsForOrg:[`GET /orgs/{org}/projectsV2/{project_number}/items`],listItemsForUser:[`GET /users/{username}/projectsV2/{project_number}/items`],updateItemForOrg:[`PATCH /orgs/{org}/projectsV2/{project_number}/items/{item_id}`],updateItemForUser:[`PATCH /users/{username}/projectsV2/{project_number}/items/{item_id}`]},pulls:{checkIfMerged:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/merge`],create:[`POST /repos/{owner}/{repo}/pulls`],createReplyForReviewComment:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies`],createReview:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews`],createReviewComment:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/comments`],deletePendingReview:[`DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],deleteReviewComment:[`DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}`],dismissReview:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals`],get:[`GET /repos/{owner}/{repo}/pulls/{pull_number}`],getReview:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],getReviewComment:[`GET /repos/{owner}/{repo}/pulls/comments/{comment_id}`],list:[`GET /repos/{owner}/{repo}/pulls`],listCommentsForReview:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments`],listCommits:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/commits`],listFiles:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/files`],listRequestedReviewers:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],listReviewComments:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/comments`],listReviewCommentsForRepo:[`GET /repos/{owner}/{repo}/pulls/comments`],listReviews:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews`],merge:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge`],removeRequestedReviewers:[`DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],requestReviewers:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],submitReview:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events`],update:[`PATCH /repos/{owner}/{repo}/pulls/{pull_number}`],updateBranch:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch`],updateReview:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],updateReviewComment:[`PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}`]},rateLimit:{get:[`GET /rate_limit`]},reactions:{createForCommitComment:[`POST /repos/{owner}/{repo}/comments/{comment_id}/reactions`],createForIssue:[`POST /repos/{owner}/{repo}/issues/{issue_number}/reactions`],createForIssueComment:[`POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions`],createForPullRequestReviewComment:[`POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions`],createForRelease:[`POST /repos/{owner}/{repo}/releases/{release_id}/reactions`],createForTeamDiscussionCommentInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions`],createForTeamDiscussionInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions`],deleteForCommitComment:[`DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}`],deleteForIssue:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}`],deleteForIssueComment:[`DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}`],deleteForPullRequestComment:[`DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}`],deleteForRelease:[`DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}`],deleteForTeamDiscussion:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}`],deleteForTeamDiscussionComment:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}`],listForCommitComment:[`GET /repos/{owner}/{repo}/comments/{comment_id}/reactions`],listForIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/reactions`],listForIssueComment:[`GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions`],listForPullRequestReviewComment:[`GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions`],listForRelease:[`GET /repos/{owner}/{repo}/releases/{release_id}/reactions`],listForTeamDiscussionCommentInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions`],listForTeamDiscussionInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions`]},repos:{acceptInvitation:[`PATCH /user/repository_invitations/{invitation_id}`,{},{renamed:[`repos`,`acceptInvitationForAuthenticatedUser`]}],acceptInvitationForAuthenticatedUser:[`PATCH /user/repository_invitations/{invitation_id}`],addAppAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],addCollaborator:[`PUT /repos/{owner}/{repo}/collaborators/{username}`],addStatusCheckContexts:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],addTeamAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],addUserAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],cancelPagesDeployment:[`POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel`],checkAutomatedSecurityFixes:[`GET /repos/{owner}/{repo}/automated-security-fixes`],checkCollaborator:[`GET /repos/{owner}/{repo}/collaborators/{username}`],checkImmutableReleases:[`GET /repos/{owner}/{repo}/immutable-releases`],checkPrivateVulnerabilityReporting:[`GET /repos/{owner}/{repo}/private-vulnerability-reporting`],checkVulnerabilityAlerts:[`GET /repos/{owner}/{repo}/vulnerability-alerts`],codeownersErrors:[`GET /repos/{owner}/{repo}/codeowners/errors`],compareCommits:[`GET /repos/{owner}/{repo}/compare/{base}...{head}`],compareCommitsWithBasehead:[`GET /repos/{owner}/{repo}/compare/{basehead}`],createAttestation:[`POST /repos/{owner}/{repo}/attestations`],createAutolink:[`POST /repos/{owner}/{repo}/autolinks`],createCommitComment:[`POST /repos/{owner}/{repo}/commits/{commit_sha}/comments`],createCommitSignatureProtection:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],createCommitStatus:[`POST /repos/{owner}/{repo}/statuses/{sha}`],createDeployKey:[`POST /repos/{owner}/{repo}/keys`],createDeployment:[`POST /repos/{owner}/{repo}/deployments`],createDeploymentBranchPolicy:[`POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies`],createDeploymentProtectionRule:[`POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules`],createDeploymentStatus:[`POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses`],createDispatchEvent:[`POST /repos/{owner}/{repo}/dispatches`],createForAuthenticatedUser:[`POST /user/repos`],createFork:[`POST /repos/{owner}/{repo}/forks`],createInOrg:[`POST /orgs/{org}/repos`],createOrUpdateEnvironment:[`PUT /repos/{owner}/{repo}/environments/{environment_name}`],createOrUpdateFileContents:[`PUT /repos/{owner}/{repo}/contents/{path}`],createOrgRuleset:[`POST /orgs/{org}/rulesets`],createPagesDeployment:[`POST /repos/{owner}/{repo}/pages/deployments`],createPagesSite:[`POST /repos/{owner}/{repo}/pages`],createRelease:[`POST /repos/{owner}/{repo}/releases`],createRepoRuleset:[`POST /repos/{owner}/{repo}/rulesets`],createUsingTemplate:[`POST /repos/{template_owner}/{template_repo}/generate`],createWebhook:[`POST /repos/{owner}/{repo}/hooks`],customPropertiesForReposCreateOrUpdateRepositoryValues:[`PATCH /repos/{owner}/{repo}/properties/values`],customPropertiesForReposGetRepositoryValues:[`GET /repos/{owner}/{repo}/properties/values`],declineInvitation:[`DELETE /user/repository_invitations/{invitation_id}`,{},{renamed:[`repos`,`declineInvitationForAuthenticatedUser`]}],declineInvitationForAuthenticatedUser:[`DELETE /user/repository_invitations/{invitation_id}`],delete:[`DELETE /repos/{owner}/{repo}`],deleteAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions`],deleteAdminBranchProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],deleteAnEnvironment:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}`],deleteAutolink:[`DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}`],deleteBranchProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection`],deleteCommitComment:[`DELETE /repos/{owner}/{repo}/comments/{comment_id}`],deleteCommitSignatureProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],deleteDeployKey:[`DELETE /repos/{owner}/{repo}/keys/{key_id}`],deleteDeployment:[`DELETE /repos/{owner}/{repo}/deployments/{deployment_id}`],deleteDeploymentBranchPolicy:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],deleteFile:[`DELETE /repos/{owner}/{repo}/contents/{path}`],deleteInvitation:[`DELETE /repos/{owner}/{repo}/invitations/{invitation_id}`],deleteOrgRuleset:[`DELETE /orgs/{org}/rulesets/{ruleset_id}`],deletePagesSite:[`DELETE /repos/{owner}/{repo}/pages`],deletePullRequestReviewProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],deleteRelease:[`DELETE /repos/{owner}/{repo}/releases/{release_id}`],deleteReleaseAsset:[`DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}`],deleteRepoRuleset:[`DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}`],deleteWebhook:[`DELETE /repos/{owner}/{repo}/hooks/{hook_id}`],disableAutomatedSecurityFixes:[`DELETE /repos/{owner}/{repo}/automated-security-fixes`],disableDeploymentProtectionRule:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}`],disableImmutableReleases:[`DELETE /repos/{owner}/{repo}/immutable-releases`],disablePrivateVulnerabilityReporting:[`DELETE /repos/{owner}/{repo}/private-vulnerability-reporting`],disableVulnerabilityAlerts:[`DELETE /repos/{owner}/{repo}/vulnerability-alerts`],downloadArchive:[`GET /repos/{owner}/{repo}/zipball/{ref}`,{},{renamed:[`repos`,`downloadZipballArchive`]}],downloadTarballArchive:[`GET /repos/{owner}/{repo}/tarball/{ref}`],downloadZipballArchive:[`GET /repos/{owner}/{repo}/zipball/{ref}`],enableAutomatedSecurityFixes:[`PUT /repos/{owner}/{repo}/automated-security-fixes`],enableImmutableReleases:[`PUT /repos/{owner}/{repo}/immutable-releases`],enablePrivateVulnerabilityReporting:[`PUT /repos/{owner}/{repo}/private-vulnerability-reporting`],enableVulnerabilityAlerts:[`PUT /repos/{owner}/{repo}/vulnerability-alerts`],generateReleaseNotes:[`POST /repos/{owner}/{repo}/releases/generate-notes`],get:[`GET /repos/{owner}/{repo}`],getAccessRestrictions:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions`],getAdminBranchProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],getAllDeploymentProtectionRules:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules`],getAllEnvironments:[`GET /repos/{owner}/{repo}/environments`],getAllStatusCheckContexts:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`],getAllTopics:[`GET /repos/{owner}/{repo}/topics`],getAppsWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`],getAutolink:[`GET /repos/{owner}/{repo}/autolinks/{autolink_id}`],getBranch:[`GET /repos/{owner}/{repo}/branches/{branch}`],getBranchProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection`],getBranchRules:[`GET /repos/{owner}/{repo}/rules/branches/{branch}`],getClones:[`GET /repos/{owner}/{repo}/traffic/clones`],getCodeFrequencyStats:[`GET /repos/{owner}/{repo}/stats/code_frequency`],getCollaboratorPermissionLevel:[`GET /repos/{owner}/{repo}/collaborators/{username}/permission`],getCombinedStatusForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/status`],getCommit:[`GET /repos/{owner}/{repo}/commits/{ref}`],getCommitActivityStats:[`GET /repos/{owner}/{repo}/stats/commit_activity`],getCommitComment:[`GET /repos/{owner}/{repo}/comments/{comment_id}`],getCommitSignatureProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],getCommunityProfileMetrics:[`GET /repos/{owner}/{repo}/community/profile`],getContent:[`GET /repos/{owner}/{repo}/contents/{path}`],getContributorsStats:[`GET /repos/{owner}/{repo}/stats/contributors`],getCustomDeploymentProtectionRule:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}`],getDeployKey:[`GET /repos/{owner}/{repo}/keys/{key_id}`],getDeployment:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}`],getDeploymentBranchPolicy:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],getDeploymentStatus:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}`],getEnvironment:[`GET /repos/{owner}/{repo}/environments/{environment_name}`],getLatestPagesBuild:[`GET /repos/{owner}/{repo}/pages/builds/latest`],getLatestRelease:[`GET /repos/{owner}/{repo}/releases/latest`],getOrgRuleSuite:[`GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}`],getOrgRuleSuites:[`GET /orgs/{org}/rulesets/rule-suites`],getOrgRuleset:[`GET /orgs/{org}/rulesets/{ruleset_id}`],getOrgRulesets:[`GET /orgs/{org}/rulesets`],getPages:[`GET /repos/{owner}/{repo}/pages`],getPagesBuild:[`GET /repos/{owner}/{repo}/pages/builds/{build_id}`],getPagesDeployment:[`GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}`],getPagesHealthCheck:[`GET /repos/{owner}/{repo}/pages/health`],getParticipationStats:[`GET /repos/{owner}/{repo}/stats/participation`],getPullRequestReviewProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],getPunchCardStats:[`GET /repos/{owner}/{repo}/stats/punch_card`],getReadme:[`GET /repos/{owner}/{repo}/readme`],getReadmeInDirectory:[`GET /repos/{owner}/{repo}/readme/{dir}`],getRelease:[`GET /repos/{owner}/{repo}/releases/{release_id}`],getReleaseAsset:[`GET /repos/{owner}/{repo}/releases/assets/{asset_id}`],getReleaseByTag:[`GET /repos/{owner}/{repo}/releases/tags/{tag}`],getRepoRuleSuite:[`GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}`],getRepoRuleSuites:[`GET /repos/{owner}/{repo}/rulesets/rule-suites`],getRepoRuleset:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}`],getRepoRulesetHistory:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history`],getRepoRulesetVersion:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history/{version_id}`],getRepoRulesets:[`GET /repos/{owner}/{repo}/rulesets`],getStatusChecksProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],getTeamsWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`],getTopPaths:[`GET /repos/{owner}/{repo}/traffic/popular/paths`],getTopReferrers:[`GET /repos/{owner}/{repo}/traffic/popular/referrers`],getUsersWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`],getViews:[`GET /repos/{owner}/{repo}/traffic/views`],getWebhook:[`GET /repos/{owner}/{repo}/hooks/{hook_id}`],getWebhookConfigForRepo:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/config`],getWebhookDelivery:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}`],listActivities:[`GET /repos/{owner}/{repo}/activity`],listAttestations:[`GET /repos/{owner}/{repo}/attestations/{subject_digest}`],listAutolinks:[`GET /repos/{owner}/{repo}/autolinks`],listBranches:[`GET /repos/{owner}/{repo}/branches`],listBranchesForHeadCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head`],listCollaborators:[`GET /repos/{owner}/{repo}/collaborators`],listCommentsForCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/comments`],listCommitCommentsForRepo:[`GET /repos/{owner}/{repo}/comments`],listCommitStatusesForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/statuses`],listCommits:[`GET /repos/{owner}/{repo}/commits`],listContributors:[`GET /repos/{owner}/{repo}/contributors`],listCustomDeploymentRuleIntegrations:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps`],listDeployKeys:[`GET /repos/{owner}/{repo}/keys`],listDeploymentBranchPolicies:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies`],listDeploymentStatuses:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses`],listDeployments:[`GET /repos/{owner}/{repo}/deployments`],listForAuthenticatedUser:[`GET /user/repos`],listForOrg:[`GET /orgs/{org}/repos`],listForUser:[`GET /users/{username}/repos`],listForks:[`GET /repos/{owner}/{repo}/forks`],listInvitations:[`GET /repos/{owner}/{repo}/invitations`],listInvitationsForAuthenticatedUser:[`GET /user/repository_invitations`],listLanguages:[`GET /repos/{owner}/{repo}/languages`],listPagesBuilds:[`GET /repos/{owner}/{repo}/pages/builds`],listPublic:[`GET /repositories`],listPullRequestsAssociatedWithCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls`],listReleaseAssets:[`GET /repos/{owner}/{repo}/releases/{release_id}/assets`],listReleases:[`GET /repos/{owner}/{repo}/releases`],listTags:[`GET /repos/{owner}/{repo}/tags`],listTeams:[`GET /repos/{owner}/{repo}/teams`],listWebhookDeliveries:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries`],listWebhooks:[`GET /repos/{owner}/{repo}/hooks`],merge:[`POST /repos/{owner}/{repo}/merges`],mergeUpstream:[`POST /repos/{owner}/{repo}/merge-upstream`],pingWebhook:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/pings`],redeliverWebhookDelivery:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts`],removeAppAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],removeCollaborator:[`DELETE /repos/{owner}/{repo}/collaborators/{username}`],removeStatusCheckContexts:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],removeStatusCheckProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],removeTeamAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],removeUserAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],renameBranch:[`POST /repos/{owner}/{repo}/branches/{branch}/rename`],replaceAllTopics:[`PUT /repos/{owner}/{repo}/topics`],requestPagesBuild:[`POST /repos/{owner}/{repo}/pages/builds`],setAdminBranchProtection:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],setAppAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],setStatusCheckContexts:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],setTeamAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],setUserAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],testPushWebhook:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/tests`],transfer:[`POST /repos/{owner}/{repo}/transfer`],update:[`PATCH /repos/{owner}/{repo}`],updateBranchProtection:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection`],updateCommitComment:[`PATCH /repos/{owner}/{repo}/comments/{comment_id}`],updateDeploymentBranchPolicy:[`PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],updateInformationAboutPagesSite:[`PUT /repos/{owner}/{repo}/pages`],updateInvitation:[`PATCH /repos/{owner}/{repo}/invitations/{invitation_id}`],updateOrgRuleset:[`PUT /orgs/{org}/rulesets/{ruleset_id}`],updatePullRequestReviewProtection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],updateRelease:[`PATCH /repos/{owner}/{repo}/releases/{release_id}`],updateReleaseAsset:[`PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}`],updateRepoRuleset:[`PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}`],updateStatusCheckPotection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`,{},{renamed:[`repos`,`updateStatusCheckProtection`]}],updateStatusCheckProtection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],updateWebhook:[`PATCH /repos/{owner}/{repo}/hooks/{hook_id}`],updateWebhookConfigForRepo:[`PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config`],uploadReleaseAsset:[`POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}`,{baseUrl:`https://uploads.github.com`}]},search:{code:[`GET /search/code`],commits:[`GET /search/commits`],issuesAndPullRequests:[`GET /search/issues`],labels:[`GET /search/labels`],repos:[`GET /search/repositories`],topics:[`GET /search/topics`],users:[`GET /search/users`]},secretScanning:{createPushProtectionBypass:[`POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses`],getAlert:[`GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}`],getScanHistory:[`GET /repos/{owner}/{repo}/secret-scanning/scan-history`],listAlertsForOrg:[`GET /orgs/{org}/secret-scanning/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/secret-scanning/alerts`],listLocationsForAlert:[`GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations`],listOrgPatternConfigs:[`GET /orgs/{org}/secret-scanning/pattern-configurations`],updateAlert:[`PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}`],updateOrgPatternConfigs:[`PATCH /orgs/{org}/secret-scanning/pattern-configurations`]},securityAdvisories:{createFork:[`POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks`],createPrivateVulnerabilityReport:[`POST /repos/{owner}/{repo}/security-advisories/reports`],createRepositoryAdvisory:[`POST /repos/{owner}/{repo}/security-advisories`],createRepositoryAdvisoryCveRequest:[`POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve`],getGlobalAdvisory:[`GET /advisories/{ghsa_id}`],getRepositoryAdvisory:[`GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}`],listGlobalAdvisories:[`GET /advisories`],listOrgRepositoryAdvisories:[`GET /orgs/{org}/security-advisories`],listRepositoryAdvisories:[`GET /repos/{owner}/{repo}/security-advisories`],updateRepositoryAdvisory:[`PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}`]},teams:{addOrUpdateMembershipForUserInOrg:[`PUT /orgs/{org}/teams/{team_slug}/memberships/{username}`],addOrUpdateRepoPermissionsInOrg:[`PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],checkPermissionsForRepoInOrg:[`GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],create:[`POST /orgs/{org}/teams`],createDiscussionCommentInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments`],createDiscussionInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions`],deleteDiscussionCommentInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],deleteDiscussionInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],deleteInOrg:[`DELETE /orgs/{org}/teams/{team_slug}`],getByName:[`GET /orgs/{org}/teams/{team_slug}`],getDiscussionCommentInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],getDiscussionInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],getMembershipForUserInOrg:[`GET /orgs/{org}/teams/{team_slug}/memberships/{username}`],list:[`GET /orgs/{org}/teams`],listChildInOrg:[`GET /orgs/{org}/teams/{team_slug}/teams`],listDiscussionCommentsInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments`],listDiscussionsInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions`],listForAuthenticatedUser:[`GET /user/teams`],listMembersInOrg:[`GET /orgs/{org}/teams/{team_slug}/members`],listPendingInvitationsInOrg:[`GET /orgs/{org}/teams/{team_slug}/invitations`],listReposInOrg:[`GET /orgs/{org}/teams/{team_slug}/repos`],removeMembershipForUserInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}`],removeRepoInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],updateDiscussionCommentInOrg:[`PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],updateDiscussionInOrg:[`PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],updateInOrg:[`PATCH /orgs/{org}/teams/{team_slug}`]},users:{addEmailForAuthenticated:[`POST /user/emails`,{},{renamed:[`users`,`addEmailForAuthenticatedUser`]}],addEmailForAuthenticatedUser:[`POST /user/emails`],addSocialAccountForAuthenticatedUser:[`POST /user/social_accounts`],block:[`PUT /user/blocks/{username}`],checkBlocked:[`GET /user/blocks/{username}`],checkFollowingForUser:[`GET /users/{username}/following/{target_user}`],checkPersonIsFollowedByAuthenticated:[`GET /user/following/{username}`],createGpgKeyForAuthenticated:[`POST /user/gpg_keys`,{},{renamed:[`users`,`createGpgKeyForAuthenticatedUser`]}],createGpgKeyForAuthenticatedUser:[`POST /user/gpg_keys`],createPublicSshKeyForAuthenticated:[`POST /user/keys`,{},{renamed:[`users`,`createPublicSshKeyForAuthenticatedUser`]}],createPublicSshKeyForAuthenticatedUser:[`POST /user/keys`],createSshSigningKeyForAuthenticatedUser:[`POST /user/ssh_signing_keys`],deleteAttestationsBulk:[`POST /users/{username}/attestations/delete-request`],deleteAttestationsById:[`DELETE /users/{username}/attestations/{attestation_id}`],deleteAttestationsBySubjectDigest:[`DELETE /users/{username}/attestations/digest/{subject_digest}`],deleteEmailForAuthenticated:[`DELETE /user/emails`,{},{renamed:[`users`,`deleteEmailForAuthenticatedUser`]}],deleteEmailForAuthenticatedUser:[`DELETE /user/emails`],deleteGpgKeyForAuthenticated:[`DELETE /user/gpg_keys/{gpg_key_id}`,{},{renamed:[`users`,`deleteGpgKeyForAuthenticatedUser`]}],deleteGpgKeyForAuthenticatedUser:[`DELETE /user/gpg_keys/{gpg_key_id}`],deletePublicSshKeyForAuthenticated:[`DELETE /user/keys/{key_id}`,{},{renamed:[`users`,`deletePublicSshKeyForAuthenticatedUser`]}],deletePublicSshKeyForAuthenticatedUser:[`DELETE /user/keys/{key_id}`],deleteSocialAccountForAuthenticatedUser:[`DELETE /user/social_accounts`],deleteSshSigningKeyForAuthenticatedUser:[`DELETE /user/ssh_signing_keys/{ssh_signing_key_id}`],follow:[`PUT /user/following/{username}`],getAuthenticated:[`GET /user`],getById:[`GET /user/{account_id}`],getByUsername:[`GET /users/{username}`],getContextForUser:[`GET /users/{username}/hovercard`],getGpgKeyForAuthenticated:[`GET /user/gpg_keys/{gpg_key_id}`,{},{renamed:[`users`,`getGpgKeyForAuthenticatedUser`]}],getGpgKeyForAuthenticatedUser:[`GET /user/gpg_keys/{gpg_key_id}`],getPublicSshKeyForAuthenticated:[`GET /user/keys/{key_id}`,{},{renamed:[`users`,`getPublicSshKeyForAuthenticatedUser`]}],getPublicSshKeyForAuthenticatedUser:[`GET /user/keys/{key_id}`],getSshSigningKeyForAuthenticatedUser:[`GET /user/ssh_signing_keys/{ssh_signing_key_id}`],list:[`GET /users`],listAttestations:[`GET /users/{username}/attestations/{subject_digest}`],listAttestationsBulk:[`POST /users/{username}/attestations/bulk-list{?per_page,before,after}`],listBlockedByAuthenticated:[`GET /user/blocks`,{},{renamed:[`users`,`listBlockedByAuthenticatedUser`]}],listBlockedByAuthenticatedUser:[`GET /user/blocks`],listEmailsForAuthenticated:[`GET /user/emails`,{},{renamed:[`users`,`listEmailsForAuthenticatedUser`]}],listEmailsForAuthenticatedUser:[`GET /user/emails`],listFollowedByAuthenticated:[`GET /user/following`,{},{renamed:[`users`,`listFollowedByAuthenticatedUser`]}],listFollowedByAuthenticatedUser:[`GET /user/following`],listFollowersForAuthenticatedUser:[`GET /user/followers`],listFollowersForUser:[`GET /users/{username}/followers`],listFollowingForUser:[`GET /users/{username}/following`],listGpgKeysForAuthenticated:[`GET /user/gpg_keys`,{},{renamed:[`users`,`listGpgKeysForAuthenticatedUser`]}],listGpgKeysForAuthenticatedUser:[`GET /user/gpg_keys`],listGpgKeysForUser:[`GET /users/{username}/gpg_keys`],listPublicEmailsForAuthenticated:[`GET /user/public_emails`,{},{renamed:[`users`,`listPublicEmailsForAuthenticatedUser`]}],listPublicEmailsForAuthenticatedUser:[`GET /user/public_emails`],listPublicKeysForUser:[`GET /users/{username}/keys`],listPublicSshKeysForAuthenticated:[`GET /user/keys`,{},{renamed:[`users`,`listPublicSshKeysForAuthenticatedUser`]}],listPublicSshKeysForAuthenticatedUser:[`GET /user/keys`],listSocialAccountsForAuthenticatedUser:[`GET /user/social_accounts`],listSocialAccountsForUser:[`GET /users/{username}/social_accounts`],listSshSigningKeysForAuthenticatedUser:[`GET /user/ssh_signing_keys`],listSshSigningKeysForUser:[`GET /users/{username}/ssh_signing_keys`],setPrimaryEmailVisibilityForAuthenticated:[`PATCH /user/email/visibility`,{},{renamed:[`users`,`setPrimaryEmailVisibilityForAuthenticatedUser`]}],setPrimaryEmailVisibilityForAuthenticatedUser:[`PATCH /user/email/visibility`],unblock:[`DELETE /user/blocks/{username}`],unfollow:[`DELETE /user/following/{username}`],updateAuthenticated:[`PATCH /user`]}};const Q=new Map;for(let[e,t]of Object.entries(Xt))for(let[n,r]of Object.entries(t)){let[t,i,a]=r,[o,s]=t.split(/ /),c=Object.assign({method:o,url:s},i);Q.has(e)||Q.set(e,new Map),Q.get(e).set(n,{scope:e,methodName:n,endpointDefaults:c,decorations:a})}const Zt={has({scope:e},t){return Q.get(e).has(t)},getOwnPropertyDescriptor(e,t){return{value:this.get(e,t),configurable:!0,writable:!0,enumerable:!0}},defineProperty(e,t,n){return Object.defineProperty(e.cache,t,n),!0},deleteProperty(e,t){return delete e.cache[t],!0},ownKeys({scope:e}){return[...Q.get(e).keys()]},set(e,t,n){return e.cache[t]=n},get({octokit:e,scope:t,cache:n},r){if(n[r])return n[r];let i=Q.get(t).get(r);if(!i)return;let{endpointDefaults:a,decorations:o}=i;return o?n[r]=$t(e,t,r,a,o):n[r]=e.request.defaults(a),n[r]}};function Qt(e){let t={};for(let n of Q.keys())t[n]=new Proxy({octokit:e,scope:n,cache:{}},Zt);return t}function $t(e,t,n,r,i){let a=e.request.defaults(r);function o(...r){let o=a.endpoint.merge(...r);if(i.mapToData)return o=Object.assign({},o,{data:o[i.mapToData],[i.mapToData]:void 0}),a(o);if(i.renamed){let[r,a]=i.renamed;e.log.warn(`octokit.${t}.${n}() has been renamed to octokit.${r}.${a}()`)}if(i.deprecated&&e.log.warn(i.deprecated),i.renamedParameters){let o=a.endpoint.merge(...r);for(let[r,a]of Object.entries(i.renamedParameters))r in o&&(e.log.warn(`"${r}" parameter is deprecated for "octokit.${t}.${n}()". Use "${a}" instead`),a in o||(o[a]=o[r]),delete o[r]);return a(o)}return a(...r)}return Object.assign(o,a)}function en(e){return{rest:Qt(e)}}en.VERSION=Yt;function tn(e){let t=Qt(e);return{...t,rest:t}}tn.VERSION=Yt;var nn=`0.0.0-development`;function rn(e){if(!e.data)return{...e,data:[]};if(!((`total_count`in e.data||`total_commits`in e.data)&&!(`url`in e.data)))return e;let t=e.data.incomplete_results,n=e.data.repository_selection,r=e.data.total_count,i=e.data.total_commits;delete e.data.incomplete_results,delete e.data.repository_selection,delete e.data.total_count,delete e.data.total_commits;let a=Object.keys(e.data)[0];return e.data=e.data[a],t!==void 0&&(e.data.incomplete_results=t),n!==void 0&&(e.data.repository_selection=n),e.data.total_count=r,e.data.total_commits=i,e}function an(e,t,n){let r=typeof t==`function`?t.endpoint(n):e.request.endpoint(t,n),i=typeof t==`function`?t:e.request,a=r.method,o=r.headers,s=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!s)return{done:!0};try{let e=rn(await i({method:a,url:s,headers:o}));if(s=((e.headers.link||``).match(/<([^<>]+)>;\s*rel="next"/)||[])[1],!s&&`total_commits`in e.data){let t=new URL(e.url),n=t.searchParams,r=parseInt(n.get(`page`)||`1`,10);r*parseInt(n.get(`per_page`)||`250`,10)<e.data.total_commits&&(n.set(`page`,String(r+1)),s=t.toString())}return{value:e}}catch(e){if(e.status!==409)throw e;return s=``,{value:{status:200,headers:{},data:[]}}}}})}}function on(e,t,n,r){return typeof n==`function`&&(r=n,n=void 0),sn(e,[],an(e,t,n)[Symbol.asyncIterator](),r)}function sn(e,t,n,r){return n.next().then(i=>{if(i.done)return t;let a=!1;function o(){a=!0}return t=t.concat(r?r(i.value,o):i.value.data),a?t:sn(e,t,n,r)})}Object.assign(on,{iterator:an});function cn(e){return{paginate:Object.assign(on.bind(null,e),{iterator:an.bind(null,e)})}}cn.VERSION=nn,new Ce;const ln=Ne(),un={baseUrl:ln,request:{agent:Ae(ln),fetch:Me(ln)}},dn=Jt.plugin(en,cn).defaults(un);function fn(e,t){let n=Object.assign({},t||{}),r=ke(e,n);return r&&(n.auth=r),n}const pn=new Ce;function mn(e,t,...n){return new(dn.plugin(...n))(fn(e,t))}function hn(e){switch(e){case`issue_comment`:return`issue_comment`;case`discussion`:case`discussion_comment`:return`discussion_comment`;case`workflow_dispatch`:return`workflow_dispatch`;case`issues`:return`issues`;case`pull_request`:return`pull_request`;case`pull_request_review_comment`:return`pull_request_review_comment`;case`schedule`:return`schedule`;default:return`unsupported`}}function gn(e){let t=pn,n=hn(t.eventName);return e.debug(`Parsed GitHub context`,{eventName:t.eventName,eventType:n,repo:`${t.repo.owner}/${t.repo.repo}`}),{eventName:t.eventName,eventType:n,repo:t.repo,ref:t.ref,sha:t.sha,runId:t.runId,actor:t.actor,payload:t.payload}}function _n(e){return e.issue.pull_request!=null}function vn(e){let{eventType:t,payload:n,repo:r}=e;if(t===`issue_comment`){let e=n;return{type:_n(e)?`pr`:`issue`,number:e.issue.number,owner:r.owner,repo:r.repo}}return t===`discussion_comment`?{type:`discussion`,number:n.discussion.number,owner:r.owner,repo:r.repo}:null}function yn(e){return e.comment.author_association}function bn(e){return e.comment.user.login}function xn(e){return e.issue.locked}const Sn={PER_PAGE:100,MAX_PAGES:50};async function Cn(e,t,n,r,i){i.debug(`Fetching PR diff`,{prNumber:r});let a=[],o=1,s=!1;for(;o<=Sn.MAX_PAGES;){let{data:c}=await e.rest.pulls.listFiles({owner:t,repo:n,pull_number:r,per_page:Sn.PER_PAGE,page:o}),l=c.map(e=>({filename:e.filename,status:e.status,additions:e.additions,deletions:e.deletions,patch:e.patch??null,previousFilename:e.previous_filename??null}));if(a.push(...l),c.length<Sn.PER_PAGE)break;o++,o>Sn.MAX_PAGES&&(s=!0,i.warning(`PR diff pagination limit reached`,{filesLoaded:a.length,maxPages:Sn.MAX_PAGES}))}let c=a.reduce((e,t)=>({additions:e.additions+t.additions,deletions:e.deletions+t.deletions}),{additions:0,deletions:0});return i.debug(`Fetched diff`,{files:a.length,additions:c.additions,deletions:c.deletions,truncated:s}),{files:a,additions:c.additions,deletions:c.deletions,changedFiles:a.length,truncated:s}}async function wn(e,t,n,r){if(e.eventType!==`pull_request`)return null;let i=e.target?.number;if(i==null)return r.debug(`No PR number in trigger context, skipping diff collection`),null;let[a,o]=n.split(`/`);if(a==null||o==null)return r.warning(`Invalid repo format, skipping diff collection`,{repo:n}),null;try{let e=await Cn(t,a,o,i,r),n={changedFiles:e.changedFiles,additions:e.additions,deletions:e.deletions,truncated:e.truncated,files:e.files.slice(0,50).map(e=>({filename:e.filename,status:e.status,additions:e.additions,deletions:e.deletions}))};return r.debug(`Collected diff context`,{files:n.changedFiles,additions:n.additions,deletions:n.deletions,truncated:n.truncated}),n}catch(e){return r.warning(`Failed to fetch PR diff`,{error:P(e)}),null}}async function Tn(e){let{logger:t,octokit:n,triggerContext:r}=e,i=gn(t),a=`${i.repo.owner}/${i.repo.repo}`,o=vn(i),s=o?.type===`issue`||o?.type===`pr`?o.type:null,c=null,l=null,u=null,d=null;if(i.eventType===`issue_comment`){let e=i.payload;c=e.comment.body,l=bn(e),u=e.comment.id,d=e.issue.title}let f=await wn(r,n,a,t),p=await En(n,i.repo.owner,i.repo.repo,o?.number??null,s,t);return t.info(`Collected agent context`,{eventName:i.eventName,repo:a,issueNumber:o?.number??null,issueType:s,hasComment:c!=null,hasDiffContext:f!=null,hasHydratedContext:p!=null}),{eventName:i.eventName,repo:a,ref:i.ref,actor:i.actor,runId:String(i.runId),issueNumber:o?.number??null,issueTitle:d,issueType:s,commentBody:c,commentAuthor:l,commentId:u,defaultBranch:await Se(n,a,t),diffContext:f,hydratedContext:p}}async function En(e,t,n,r,i,a){if(r==null||i==null)return null;let o=ne;return i===`issue`?await me(e,t,n,r,o,a)??ue(e,t,n,r,o,a):await he(e,t,n,r,o,a)??de(e,t,n,r,o,a)}const Dn=({onSseError:e,onSseEvent:t,responseTransformer:n,responseValidator:r,sseDefaultRetryDelay:i,sseMaxRetryAttempts:a,sseMaxRetryDelay:o,sseSleepFn:s,url:c,...l})=>{let u,d=s??(e=>new Promise(t=>setTimeout(t,e)));return{stream:async function*(){let s=i??3e3,f=0,p=l.signal??new AbortController().signal;for(;!p.aborted;){f++;let i=l.headers instanceof Headers?l.headers:new Headers(l.headers);u!==void 0&&i.set(`Last-Event-ID`,u);try{let e=await fetch(c,{...l,headers:i,signal:p});if(!e.ok)throw Error(`SSE failed: ${e.status} ${e.statusText}`);if(!e.body)throw Error(`No body in SSE response`);let a=e.body.pipeThrough(new TextDecoderStream).getReader(),o=``,d=()=>{try{a.cancel()}catch{}};p.addEventListener(`abort`,d);try{for(;;){let{done:e,value:i}=await a.read();if(e)break;o+=i;let c=o.split(`

`);o=c.pop()??``;for(let e of c){let i=e.split(`
`),a=[],o;for(let e of i)if(e.startsWith(`data:`))a.push(e.replace(/^data:\s*/,``));else if(e.startsWith(`event:`))o=e.replace(/^event:\s*/,``);else if(e.startsWith(`id:`))u=e.replace(/^id:\s*/,``);else if(e.startsWith(`retry:`)){let t=Number.parseInt(e.replace(/^retry:\s*/,``),10);Number.isNaN(t)||(s=t)}let c,l=!1;if(a.length){let e=a.join(`
`);try{c=JSON.parse(e),l=!0}catch{c=e}}l&&(r&&await r(c),n&&(c=await n(c))),t?.({data:c,event:o,id:u,retry:s}),a.length&&(yield c)}}}finally{p.removeEventListener(`abort`,d),a.releaseLock()}break}catch(t){if(e?.(t),a!==void 0&&f>=a)break;await d(Math.min(s*2**(f-1),o??3e4))}}}()}},On=async(e,t)=>{let n=typeof t==`function`?await t(e):t;if(n)return e.scheme===`bearer`?`Bearer ${n}`:e.scheme===`basic`?`Basic ${btoa(n)}`:n},kn={bodySerializer:e=>JSON.stringify(e,(e,t)=>typeof t==`bigint`?t.toString():t)},An=e=>{switch(e){case`label`:return`.`;case`matrix`:return`;`;case`simple`:return`,`;default:return`&`}},jn=e=>{switch(e){case`form`:return`,`;case`pipeDelimited`:return`|`;case`spaceDelimited`:return`%20`;default:return`,`}},Mn=e=>{switch(e){case`label`:return`.`;case`matrix`:return`;`;case`simple`:return`,`;default:return`&`}},Nn=({allowReserved:e,explode:t,name:n,style:r,value:i})=>{if(!t){let t=(e?i:i.map(e=>encodeURIComponent(e))).join(jn(r));switch(r){case`label`:return`.${t}`;case`matrix`:return`;${n}=${t}`;case`simple`:return t;default:return`${n}=${t}`}}let a=An(r),o=i.map(t=>r===`label`||r===`simple`?e?t:encodeURIComponent(t):Pn({allowReserved:e,name:n,value:t})).join(a);return r===`label`||r===`matrix`?a+o:o},Pn=({allowReserved:e,name:t,value:n})=>{if(n==null)return``;if(typeof n==`object`)throw Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${t}=${e?n:encodeURIComponent(n)}`},Fn=({allowReserved:e,explode:t,name:n,style:r,value:i,valueOnly:a})=>{if(i instanceof Date)return a?i.toISOString():`${n}=${i.toISOString()}`;if(r!==`deepObject`&&!t){let t=[];Object.entries(i).forEach(([n,r])=>{t=[...t,n,e?r:encodeURIComponent(r)]});let a=t.join(`,`);switch(r){case`form`:return`${n}=${a}`;case`label`:return`.${a}`;case`matrix`:return`;${n}=${a}`;default:return a}}let o=Mn(r),s=Object.entries(i).map(([t,i])=>Pn({allowReserved:e,name:r===`deepObject`?`${n}[${t}]`:t,value:i})).join(o);return r===`label`||r===`matrix`?o+s:s},In=/\{[^{}]+\}/g,Ln=({path:e,url:t})=>{let n=t,r=t.match(In);if(r)for(let t of r){let r=!1,i=t.substring(1,t.length-1),a=`simple`;i.endsWith(`*`)&&(r=!0,i=i.substring(0,i.length-1)),i.startsWith(`.`)?(i=i.substring(1),a=`label`):i.startsWith(`;`)&&(i=i.substring(1),a=`matrix`);let o=e[i];if(o==null)continue;if(Array.isArray(o)){n=n.replace(t,Nn({explode:r,name:i,style:a,value:o}));continue}if(typeof o==`object`){n=n.replace(t,Fn({explode:r,name:i,style:a,value:o,valueOnly:!0}));continue}if(a===`matrix`){n=n.replace(t,`;${Pn({name:i,value:o})}`);continue}let s=encodeURIComponent(a===`label`?`.${o}`:o);n=n.replace(t,s)}return n},Rn=({baseUrl:e,path:t,query:n,querySerializer:r,url:i})=>{let a=i.startsWith(`/`)?i:`/${i}`,o=(e??``)+a;t&&(o=Ln({path:t,url:o}));let s=n?r(n):``;return s.startsWith(`?`)&&(s=s.substring(1)),s&&(o+=`?${s}`),o},zn=({allowReserved:e,array:t,object:n}={})=>r=>{let i=[];if(r&&typeof r==`object`)for(let a in r){let o=r[a];if(o!=null)if(Array.isArray(o)){let n=Nn({allowReserved:e,explode:!0,name:a,style:`form`,value:o,...t});n&&i.push(n)}else if(typeof o==`object`){let t=Fn({allowReserved:e,explode:!0,name:a,style:`deepObject`,value:o,...n});t&&i.push(t)}else{let t=Pn({allowReserved:e,name:a,value:o});t&&i.push(t)}}return i.join(`&`)},Bn=e=>{if(!e)return`stream`;let t=e.split(`;`)[0]?.trim();if(t){if(t.startsWith(`application/json`)||t.endsWith(`+json`))return`json`;if(t===`multipart/form-data`)return`formData`;if([`application/`,`audio/`,`image/`,`video/`].some(e=>t.startsWith(e)))return`blob`;if(t.startsWith(`text/`))return`text`}},Vn=(e,t)=>t?!!(e.headers.has(t)||e.query?.[t]||e.headers.get(`Cookie`)?.includes(`${t}=`)):!1,Hn=async({security:e,...t})=>{for(let n of e){if(Vn(t,n.name))continue;let e=await On(n,t.auth);if(!e)continue;let r=n.name??`Authorization`;switch(n.in){case`query`:t.query||={},t.query[r]=e;break;case`cookie`:t.headers.append(`Cookie`,`${r}=${e}`);break;default:t.headers.set(r,e);break}}},Un=e=>Rn({baseUrl:e.baseUrl,path:e.path,query:e.query,querySerializer:typeof e.querySerializer==`function`?e.querySerializer:zn(e.querySerializer),url:e.url}),Wn=(e,t)=>{let n={...e,...t};return n.baseUrl?.endsWith(`/`)&&(n.baseUrl=n.baseUrl.substring(0,n.baseUrl.length-1)),n.headers=Gn(e.headers,t.headers),n},Gn=(...e)=>{let t=new Headers;for(let n of e){if(!n||typeof n!=`object`)continue;let e=n instanceof Headers?n.entries():Object.entries(n);for(let[n,r]of e)if(r===null)t.delete(n);else if(Array.isArray(r))for(let e of r)t.append(n,e);else r!==void 0&&t.set(n,typeof r==`object`?JSON.stringify(r):r)}return t};var Kn=class{_fns;constructor(){this._fns=[]}clear(){this._fns=[]}getInterceptorIndex(e){return typeof e==`number`?this._fns[e]?e:-1:this._fns.indexOf(e)}exists(e){let t=this.getInterceptorIndex(e);return!!this._fns[t]}eject(e){let t=this.getInterceptorIndex(e);this._fns[t]&&(this._fns[t]=null)}update(e,t){let n=this.getInterceptorIndex(e);return this._fns[n]?(this._fns[n]=t,e):!1}use(e){return this._fns=[...this._fns,e],this._fns.length-1}};const qn=()=>({error:new Kn,request:new Kn,response:new Kn}),Jn=zn({allowReserved:!1,array:{explode:!0,style:`form`},object:{explode:!0,style:`deepObject`}}),Yn={"Content-Type":`application/json`},Xn=(e={})=>({...kn,headers:Yn,parseAs:`auto`,querySerializer:Jn,...e}),Zn=(e={})=>{let t=Wn(Xn(),e),n=()=>({...t}),r=e=>(t=Wn(t,e),n()),i=qn(),a=async e=>{let n={...t,...e,fetch:e.fetch??t.fetch??globalThis.fetch,headers:Gn(t.headers,e.headers),serializedBody:void 0};return n.security&&await Hn({...n,security:n.security}),n.requestValidator&&await n.requestValidator(n),n.body&&n.bodySerializer&&(n.serializedBody=n.bodySerializer(n.body)),(n.serializedBody===void 0||n.serializedBody===``)&&n.headers.delete(`Content-Type`),{opts:n,url:Un(n)}},o=async e=>{let{opts:t,url:n}=await a(e),r={redirect:`follow`,...t,body:t.serializedBody},o=new Request(n,r);for(let e of i.request._fns)e&&(o=await e(o,t));let s=t.fetch,c=await s(o);for(let e of i.response._fns)e&&(c=await e(c,o,t));let l={request:o,response:c};if(c.ok){if(c.status===204||c.headers.get(`Content-Length`)===`0`)return t.responseStyle===`data`?{}:{data:{},...l};let e=(t.parseAs===`auto`?Bn(c.headers.get(`Content-Type`)):t.parseAs)??`json`,n;switch(e){case`arrayBuffer`:case`blob`:case`formData`:case`json`:case`text`:n=await c[e]();break;case`stream`:return t.responseStyle===`data`?c.body:{data:c.body,...l}}return e===`json`&&(t.responseValidator&&await t.responseValidator(n),t.responseTransformer&&(n=await t.responseTransformer(n))),t.responseStyle===`data`?n:{data:n,...l}}let u=await c.text(),d;try{d=JSON.parse(u)}catch{}let f=d??u,p=f;for(let e of i.error._fns)e&&(p=await e(f,c,o,t));if(p||={},t.throwOnError)throw p;return t.responseStyle===`data`?void 0:{error:p,...l}},s=e=>{let t=t=>o({...t,method:e});return t.sse=async t=>{let{opts:n,url:r}=await a(t);return Dn({...n,body:n.body,headers:n.headers,method:e,url:r})},t};return{buildUrl:Un,connect:s(`CONNECT`),delete:s(`DELETE`),get:s(`GET`),getConfig:n,head:s(`HEAD`),interceptors:i,options:s(`OPTIONS`),patch:s(`PATCH`),post:s(`POST`),put:s(`PUT`),request:o,setConfig:r,trace:s(`TRACE`)}};Object.entries({$body_:`body`,$headers_:`headers`,$path_:`path`,$query_:`query`});const Qn=Zn(Xn({baseUrl:`http://localhost:4096`}));var $=class{_client=Qn;constructor(e){e?.client&&(this._client=e.client)}},$n=class extends ${event(e){return(e?.client??this._client).get.sse({url:`/global/event`,...e})}},er=class extends ${list(e){return(e?.client??this._client).get({url:`/project`,...e})}current(e){return(e?.client??this._client).get({url:`/project/current`,...e})}},tr=class extends ${list(e){return(e?.client??this._client).get({url:`/pty`,...e})}create(e){return(e?.client??this._client).post({url:`/pty`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}remove(e){return(e.client??this._client).delete({url:`/pty/{id}`,...e})}get(e){return(e.client??this._client).get({url:`/pty/{id}`,...e})}update(e){return(e.client??this._client).put({url:`/pty/{id}`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}connect(e){return(e.client??this._client).get({url:`/pty/{id}/connect`,...e})}},nr=class extends ${get(e){return(e?.client??this._client).get({url:`/config`,...e})}update(e){return(e?.client??this._client).patch({url:`/config`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}providers(e){return(e?.client??this._client).get({url:`/config/providers`,...e})}},rr=class extends ${ids(e){return(e?.client??this._client).get({url:`/experimental/tool/ids`,...e})}list(e){return(e.client??this._client).get({url:`/experimental/tool`,...e})}},ir=class extends ${dispose(e){return(e?.client??this._client).post({url:`/instance/dispose`,...e})}},ar=class extends ${get(e){return(e?.client??this._client).get({url:`/path`,...e})}},or=class extends ${get(e){return(e?.client??this._client).get({url:`/vcs`,...e})}},sr=class extends ${list(e){return(e?.client??this._client).get({url:`/session`,...e})}create(e){return(e?.client??this._client).post({url:`/session`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}status(e){return(e?.client??this._client).get({url:`/session/status`,...e})}delete(e){return(e.client??this._client).delete({url:`/session/{id}`,...e})}get(e){return(e.client??this._client).get({url:`/session/{id}`,...e})}update(e){return(e.client??this._client).patch({url:`/session/{id}`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}children(e){return(e.client??this._client).get({url:`/session/{id}/children`,...e})}todo(e){return(e.client??this._client).get({url:`/session/{id}/todo`,...e})}init(e){return(e.client??this._client).post({url:`/session/{id}/init`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}fork(e){return(e.client??this._client).post({url:`/session/{id}/fork`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}abort(e){return(e.client??this._client).post({url:`/session/{id}/abort`,...e})}unshare(e){return(e.client??this._client).delete({url:`/session/{id}/share`,...e})}share(e){return(e.client??this._client).post({url:`/session/{id}/share`,...e})}diff(e){return(e.client??this._client).get({url:`/session/{id}/diff`,...e})}summarize(e){return(e.client??this._client).post({url:`/session/{id}/summarize`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}messages(e){return(e.client??this._client).get({url:`/session/{id}/message`,...e})}prompt(e){return(e.client??this._client).post({url:`/session/{id}/message`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}message(e){return(e.client??this._client).get({url:`/session/{id}/message/{messageID}`,...e})}promptAsync(e){return(e.client??this._client).post({url:`/session/{id}/prompt_async`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}command(e){return(e.client??this._client).post({url:`/session/{id}/command`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}shell(e){return(e.client??this._client).post({url:`/session/{id}/shell`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}revert(e){return(e.client??this._client).post({url:`/session/{id}/revert`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}unrevert(e){return(e.client??this._client).post({url:`/session/{id}/unrevert`,...e})}},cr=class extends ${list(e){return(e?.client??this._client).get({url:`/command`,...e})}},lr=class extends ${authorize(e){return(e.client??this._client).post({url:`/provider/{id}/oauth/authorize`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}callback(e){return(e.client??this._client).post({url:`/provider/{id}/oauth/callback`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}},ur=class extends ${list(e){return(e?.client??this._client).get({url:`/provider`,...e})}auth(e){return(e?.client??this._client).get({url:`/provider/auth`,...e})}oauth=new lr({client:this._client})},dr=class extends ${text(e){return(e.client??this._client).get({url:`/find`,...e})}files(e){return(e.client??this._client).get({url:`/find/file`,...e})}symbols(e){return(e.client??this._client).get({url:`/find/symbol`,...e})}},fr=class extends ${list(e){return(e.client??this._client).get({url:`/file`,...e})}read(e){return(e.client??this._client).get({url:`/file/content`,...e})}status(e){return(e?.client??this._client).get({url:`/file/status`,...e})}},pr=class extends ${log(e){return(e?.client??this._client).post({url:`/log`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}agents(e){return(e?.client??this._client).get({url:`/agent`,...e})}},mr=class extends ${remove(e){return(e.client??this._client).delete({url:`/mcp/{name}/auth`,...e})}start(e){return(e.client??this._client).post({url:`/mcp/{name}/auth`,...e})}callback(e){return(e.client??this._client).post({url:`/mcp/{name}/auth/callback`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}authenticate(e){return(e.client??this._client).post({url:`/mcp/{name}/auth/authenticate`,...e})}set(e){return(e.client??this._client).put({url:`/auth/{id}`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}},hr=class extends ${status(e){return(e?.client??this._client).get({url:`/mcp`,...e})}add(e){return(e?.client??this._client).post({url:`/mcp`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}connect(e){return(e.client??this._client).post({url:`/mcp/{name}/connect`,...e})}disconnect(e){return(e.client??this._client).post({url:`/mcp/{name}/disconnect`,...e})}auth=new mr({client:this._client})},gr=class extends ${status(e){return(e?.client??this._client).get({url:`/lsp`,...e})}},_r=class extends ${status(e){return(e?.client??this._client).get({url:`/formatter`,...e})}},vr=class extends ${next(e){return(e?.client??this._client).get({url:`/tui/control/next`,...e})}response(e){return(e?.client??this._client).post({url:`/tui/control/response`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}},yr=class extends ${appendPrompt(e){return(e?.client??this._client).post({url:`/tui/append-prompt`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}openHelp(e){return(e?.client??this._client).post({url:`/tui/open-help`,...e})}openSessions(e){return(e?.client??this._client).post({url:`/tui/open-sessions`,...e})}openThemes(e){return(e?.client??this._client).post({url:`/tui/open-themes`,...e})}openModels(e){return(e?.client??this._client).post({url:`/tui/open-models`,...e})}submitPrompt(e){return(e?.client??this._client).post({url:`/tui/submit-prompt`,...e})}clearPrompt(e){return(e?.client??this._client).post({url:`/tui/clear-prompt`,...e})}executeCommand(e){return(e?.client??this._client).post({url:`/tui/execute-command`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}showToast(e){return(e?.client??this._client).post({url:`/tui/show-toast`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}publish(e){return(e?.client??this._client).post({url:`/tui/publish`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}control=new vr({client:this._client})},br=class extends ${subscribe(e){return(e?.client??this._client).get.sse({url:`/event`,...e})}},xr=class extends ${postSessionIdPermissionsPermissionId(e){return(e.client??this._client).post({url:`/session/{id}/permissions/{permissionID}`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}global=new $n({client:this._client});project=new er({client:this._client});pty=new tr({client:this._client});config=new nr({client:this._client});tool=new rr({client:this._client});instance=new ir({client:this._client});path=new ar({client:this._client});vcs=new or({client:this._client});session=new sr({client:this._client});command=new cr({client:this._client});provider=new ur({client:this._client});find=new dr({client:this._client});file=new fr({client:this._client});app=new pr({client:this._client});mcp=new hr({client:this._client});lsp=new gr({client:this._client});formatter=new _r({client:this._client});tui=new yr({client:this._client});auth=new mr({client:this._client});event=new br({client:this._client})};function Sr(e){if(!e?.fetch){let t=e=>(e.timeout=!1,fetch(e));e={...e,fetch:t}}return e?.directory&&(e.headers={...e.headers,"x-opencode-directory":e.directory}),new xr({client:Zn(e)})}async function Cr(e){e=Object.assign({hostname:`127.0.0.1`,port:4096,timeout:5e3},e??{});let t=[`serve`,`--hostname=${e.hostname}`,`--port=${e.port}`];e.config?.logLevel&&t.push(`--log-level=${e.config.logLevel}`);let n=te(`opencode`,t,{signal:e.signal,env:{...process.env,OPENCODE_CONFIG_CONTENT:JSON.stringify(e.config??{})}});return{url:await new Promise((t,r)=>{let i=setTimeout(()=>{r(Error(`Timeout waiting for server to start after ${e.timeout}ms`))},e.timeout),a=``;n.stdout?.on(`data`,e=>{a+=e.toString();let n=a.split(`
`);for(let e of n)if(e.startsWith(`opencode server listening`)){let n=e.match(/on\s+(https?:\/\/[^\s]+)/);if(!n)throw Error(`Failed to parse server url from output: ${e}`);clearTimeout(i),t(n[1]);return}}),n.stderr?.on(`data`,e=>{a+=e.toString()}),n.on(`exit`,e=>{clearTimeout(i);let t=`Server exited with code ${e}`;a.trim()&&(t+=`\nServer output: ${a}`),r(Error(t))}),n.on(`error`,e=>{clearTimeout(i),r(e)}),e.signal&&e.signal.addEventListener(`abort`,()=>{clearTimeout(i),r(Error(`Aborted`))})}),close(){n.kill()}}}async function wr(e){let t=await Cr({...e});return{client:Sr({baseUrl:t.url}),server:t}}async function Tr(e){if(e<0||!Number.isFinite(e))throw Error(`Invalid sleep duration: ${e}`);return new Promise(t=>setTimeout(t,e))}const Er={todowrite:[`Todo`,`\x1B[33m\x1B[1m`],todoread:[`Todo`,`\x1B[33m\x1B[1m`],bash:[`Bash`,`\x1B[31m\x1B[1m`],edit:[`Edit`,`\x1B[32m\x1B[1m`],glob:[`Glob`,`\x1B[34m\x1B[1m`],grep:[`Grep`,`\x1B[34m\x1B[1m`],list:[`List`,`\x1B[34m\x1B[1m`],read:[`Read`,`\x1B[35m\x1B[1m`],write:[`Write`,`\x1B[32m\x1B[1m`],websearch:[`Search`,`\x1B[2m\x1B[1m`]},Dr=`\x1B[0m`;function Or(){return B.env.NO_COLOR==null}function kr(e,t){let[n,r]=Er[e.toLowerCase()]??[e,`\x1B[36m\x1B[1m`],i=n.padEnd(10,` `);Or()?B.stdout.write(`\n${r}|${Dr}[2m ${i} ${Dr}${t}\n`):B.stdout.write(`\n| ${i} ${t}\n`)}function Ar(e){B.stdout.write(`\n${e}\n`)}const jr={api_error:`API Error`,configuration:`Configuration Error`,internal:`Internal Error`,llm_fetch_error:`LLM Fetch Error`,llm_timeout:`LLM Timeout`,permission:`Permission Error`,rate_limit:`Rate Limit`,validation:`Validation Error`};function Mr(e){return e.type===`rate_limit`?`:warning:`:e.type===`llm_timeout`?`:hourglass:`:e.type===`llm_fetch_error`||e.retryable?`:warning:`:`:x:`}function Nr(e){let t=Mr(e),n=jr[e.type],r=[];return r.push(`${t} **${n}**`),r.push(``),r.push(e.message),e.details!=null&&(r.push(``),r.push(`> ${e.details}`)),e.suggestedAction!=null&&(r.push(``),r.push(`**Suggested action:** ${e.suggestedAction}`)),e.retryable&&(r.push(``),r.push(`_This error is retryable._`)),e.resetTime!=null&&(r.push(``),r.push(`_Rate limit resets at: ${e.resetTime.toISOString()}_`)),r.join(`
`)}function Pr(e,t,n,r){return{type:e,message:t,retryable:n,details:r?.details,suggestedAction:r?.suggestedAction,resetTime:r?.resetTime}}const Fr=[/fetch failed/i,/connect\s*timeout/i,/connecttimeouterror/i,/timed?\s*out/i,/econnrefused/i,/econnreset/i,/etimedout/i,/network error/i];function Ir(e){if(e==null)return!1;let t=``;if(typeof e==`string`)t=e;else if(e instanceof Error)t=e.message,`cause`in e&&typeof e.cause==`string`&&(t+=` ${e.cause}`);else if(typeof e==`object`){let n=e;typeof n.message==`string`&&(t=n.message),typeof n.cause==`string`&&(t+=` ${n.cause}`)}return Fr.some(e=>e.test(t))}function Lr(e,t){return Pr(`llm_fetch_error`,`LLM request failed: ${e}`,!0,{details:t==null?void 0:`Model: ${t}`,suggestedAction:`This is a transient network error. The request may succeed on retry, or try a different model.`})}const Rr=[/agent\s+not\s+found/i,/unknown\s+agent/i,/invalid\s+agent/i,/agent\s+\S+\s+does\s+not\s+exist/i,/no\s+agent\s+named/i,/agent\s+\S+\s+is\s+not\s+available/i];function zr(e){if(e==null)return!1;let t=``;if(typeof e==`string`)t=e;else if(e instanceof Error)t=e.message;else if(typeof e==`object`){let n=e;typeof n.message==`string`&&(t=n.message)}return Rr.some(e=>e.test(t))}function Br(e,t){return Pr(`configuration`,`Agent error: ${e}`,!1,{details:t==null?void 0:`Requested agent: ${t}`,suggestedAction:`Verify the agent name is correct and the required plugins (e.g., oMo) are installed.`})}function Vr(e){try{let t=new URL(e);return t.hostname===`github.com`||t.hostname===`api.github.com`}catch{return!1}}function Hr(e){try{let t=new URL(e);return t.hostname===`github.com`&&(t.pathname.startsWith(`/user-attachments/assets/`)||t.pathname.startsWith(`/user-attachments/files/`))}catch{return!1}}function Ur(e){let t=e.match(/https:\/\/github\.com\/[a-zA-Z0-9-]+\/[\w.-]+\/(?:pull|issues)\/\d+(?:#issuecomment-\d+)?/g)??[];return[...new Set(t)].filter(Vr)}function Wr(e){let t=/\[[\w-]+\s+([a-f0-9]{7,40})\]/g,n=[];for(let r of e.matchAll(t))r[1]!=null&&n.push(r[1]);return[...new Set(n)]}var Gr=d((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.toCommandValue=t,e.toCommandProperties=n;function t(e){return e==null?``:typeof e==`string`||e instanceof String?e:JSON.stringify(e)}function n(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}})),Kr=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})();Object.defineProperty(e,`__esModule`,{value:!0}),e.issueCommand=o,e.issue=s;let i=r(L(`os`)),a=Gr();function o(e,t,n){let r=new c(e,t,n);process.stdout.write(r.toString()+i.EOL)}function s(e,t=``){o(e,{},t)}var c=class{constructor(e,t,n){e||=`missing.command`,this.command=e,this.properties=t,this.message=n}toString(){let e=`::`+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=` `;let t=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let r=this.properties[n];r&&(t?t=!1:e+=`,`,e+=`${n}=${u(r)}`)}}return e+=`::${l(this.message)}`,e}};function l(e){return(0,a.toCommandValue)(e).replace(/%/g,`%25`).replace(/\r/g,`%0D`).replace(/\n/g,`%0A`)}function u(e){return(0,a.toCommandValue)(e).replace(/%/g,`%25`).replace(/\r/g,`%0D`).replace(/\n/g,`%0A`).replace(/:/g,`%3A`).replace(/,/g,`%2C`)}})),qr=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})();Object.defineProperty(e,`__esModule`,{value:!0}),e.issueFileCommand=c,e.prepareKeyValueMessage=l;let i=r(L(`crypto`)),a=r(L(`fs`)),o=r(L(`os`)),s=Gr();function c(e,t){let n=process.env[`GITHUB_${e}`];if(!n)throw Error(`Unable to find environment variable for file command ${e}`);if(!a.existsSync(n))throw Error(`Missing file at path: ${n}`);a.appendFileSync(n,`${(0,s.toCommandValue)(t)}${o.EOL}`,{encoding:`utf8`})}function l(e,t){let n=`ghadelimiter_${i.randomUUID()}`,r=(0,s.toCommandValue)(t);if(e.includes(n))throw Error(`Unexpected input: name should not contain the delimiter "${n}"`);if(r.includes(n))throw Error(`Unexpected input: value should not contain the delimiter "${n}"`);return`${e}<<${n}${o.EOL}${r}${o.EOL}${n}`}})),Jr=d((e=>{var t=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.PersonalAccessTokenCredentialHandler=e.BearerCredentialHandler=e.BasicCredentialHandler=void 0,e.BasicCredentialHandler=class{constructor(e,t){this.username=e,this.password=t}prepareRequest(e){if(!e.headers)throw Error(`The request has no headers`);e.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString(`base64`)}`}canHandleAuthentication(){return!1}handleAuthentication(){return t(this,void 0,void 0,function*(){throw Error(`not implemented`)})}},e.BearerCredentialHandler=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error(`The request has no headers`);e.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return t(this,void 0,void 0,function*(){throw Error(`not implemented`)})}},e.PersonalAccessTokenCredentialHandler=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error(`The request has no headers`);e.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString(`base64`)}`}canHandleAuthentication(){return!1}handleAuthentication(){return t(this,void 0,void 0,function*(){throw Error(`not implemented`)})}}})),Yr=d((e=>{var t=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.OidcClient=void 0;let n=Te(),r=Jr(),i=ri();e.OidcClient=class e{static createHttpClient(t=!0,i=10){let a={allowRetries:t,maxRetries:i};return new n.HttpClient(`actions/oidc-client`,[new r.BearerCredentialHandler(e.getRequestToken())],a)}static getRequestToken(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw Error(`Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable`);return e}static getIDTokenUrl(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw Error(`Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable`);return e}static getCall(n){return t(this,void 0,void 0,function*(){let t=(yield e.createHttpClient().getJson(n).catch(e=>{throw Error(`Failed to get ID Token. \n 
        Error Code : ${e.statusCode}\n 
        Error Message: ${e.message}`)})).result?.value;if(!t)throw Error(`Response json body do not have ID Token field`);return t})}static getIDToken(n){return t(this,void 0,void 0,function*(){try{let t=e.getIDTokenUrl();n&&(t=`${t}&audience=${encodeURIComponent(n)}`),(0,i.debug)(`ID token url is ${t}`);let r=yield e.getCall(t);return(0,i.setSecret)(r),r}catch(e){throw Error(`Error message: ${e.message}`)}})}}})),Xr=d((e=>{var t=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.summary=e.markdownSummary=e.SUMMARY_DOCS_URL=e.SUMMARY_ENV_VAR=void 0;let n=L(`os`),r=L(`fs`),{access:i,appendFile:a,writeFile:o}=r.promises;e.SUMMARY_ENV_VAR=`GITHUB_STEP_SUMMARY`,e.SUMMARY_DOCS_URL=`https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary`;let s=new class{constructor(){this._buffer=``}filePath(){return t(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[e.SUMMARY_ENV_VAR];if(!t)throw Error(`Unable to find environment variable for $${e.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield i(t,r.constants.R_OK|r.constants.W_OK)}catch{throw Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(e,t,n={}){let r=Object.entries(n).map(([e,t])=>` ${e}="${t}"`).join(``);return t?`<${e}${r}>${t}</${e}>`:`<${e}${r}>`}write(e){return t(this,void 0,void 0,function*(){let t=!!e?.overwrite,n=yield this.filePath();return yield(t?o:a)(n,this._buffer,{encoding:`utf8`}),this.emptyBuffer()})}clear(){return t(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer=``,this}addRaw(e,t=!1){return this._buffer+=e,t?this.addEOL():this}addEOL(){return this.addRaw(n.EOL)}addCodeBlock(e,t){let n=Object.assign({},t&&{lang:t}),r=this.wrap(`pre`,this.wrap(`code`,e),n);return this.addRaw(r).addEOL()}addList(e,t=!1){let n=t?`ol`:`ul`,r=e.map(e=>this.wrap(`li`,e)).join(``),i=this.wrap(n,r);return this.addRaw(i).addEOL()}addTable(e){let t=e.map(e=>{let t=e.map(e=>{if(typeof e==`string`)return this.wrap(`td`,e);let{header:t,data:n,colspan:r,rowspan:i}=e,a=t?`th`:`td`,o=Object.assign(Object.assign({},r&&{colspan:r}),i&&{rowspan:i});return this.wrap(a,n,o)}).join(``);return this.wrap(`tr`,t)}).join(``),n=this.wrap(`table`,t);return this.addRaw(n).addEOL()}addDetails(e,t){let n=this.wrap(`details`,this.wrap(`summary`,e)+t);return this.addRaw(n).addEOL()}addImage(e,t,n){let{width:r,height:i}=n||{},a=Object.assign(Object.assign({},r&&{width:r}),i&&{height:i}),o=this.wrap(`img`,null,Object.assign({src:e,alt:t},a));return this.addRaw(o).addEOL()}addHeading(e,t){let n=`h${t}`,r=[`h1`,`h2`,`h3`,`h4`,`h5`,`h6`].includes(n)?n:`h1`,i=this.wrap(r,e);return this.addRaw(i).addEOL()}addSeparator(){let e=this.wrap(`hr`,null);return this.addRaw(e).addEOL()}addBreak(){let e=this.wrap(`br`,null);return this.addRaw(e).addEOL()}addQuote(e,t){let n=Object.assign({},t&&{cite:t}),r=this.wrap(`blockquote`,e,n);return this.addRaw(r).addEOL()}addLink(e,t){let n=this.wrap(`a`,e,{href:t});return this.addRaw(n).addEOL()}};e.markdownSummary=s,e.summary=s})),Zr=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})();Object.defineProperty(e,`__esModule`,{value:!0}),e.toPosixPath=a,e.toWin32Path=o,e.toPlatformPath=s;let i=r(L(`path`));function a(e){return e.replace(/[\\]/g,`/`)}function o(e){return e.replace(/[/]/g,`\\`)}function s(e){return e.replace(/[/\\]/g,i.sep)}})),Qr=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})(),i=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},a;Object.defineProperty(e,`__esModule`,{value:!0}),e.READONLY=e.UV_FS_O_EXLOCK=e.IS_WINDOWS=e.unlink=e.symlink=e.stat=e.rmdir=e.rm=e.rename=e.readdir=e.open=e.mkdir=e.lstat=e.copyFile=e.chmod=void 0,e.readlink=c,e.exists=l,e.isDirectory=u,e.isRooted=d,e.tryGetExecutablePath=f,e.getCmdPath=h;let o=r(L(`fs`)),s=r(L(`path`));a=o.promises,e.chmod=a.chmod,e.copyFile=a.copyFile,e.lstat=a.lstat,e.mkdir=a.mkdir,e.open=a.open,e.readdir=a.readdir,e.rename=a.rename,e.rm=a.rm,e.rmdir=a.rmdir,e.stat=a.stat,e.symlink=a.symlink,e.unlink=a.unlink,e.IS_WINDOWS=process.platform===`win32`;function c(t){return i(this,void 0,void 0,function*(){let n=yield o.promises.readlink(t);return e.IS_WINDOWS&&!n.endsWith(`\\`)?`${n}\\`:n})}e.UV_FS_O_EXLOCK=268435456,e.READONLY=o.constants.O_RDONLY;function l(t){return i(this,void 0,void 0,function*(){try{yield(0,e.stat)(t)}catch(e){if(e.code===`ENOENT`)return!1;throw e}return!0})}function u(t){return i(this,arguments,void 0,function*(t,n=!1){return(n?yield(0,e.stat)(t):yield(0,e.lstat)(t)).isDirectory()})}function d(t){if(t=p(t),!t)throw Error(`isRooted() parameter "p" cannot be empty`);return e.IS_WINDOWS?t.startsWith(`\\`)||/^[A-Z]:/i.test(t):t.startsWith(`/`)}function f(t,n){return i(this,void 0,void 0,function*(){let r;try{r=yield(0,e.stat)(t)}catch(e){e.code!==`ENOENT`&&console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${e}`)}if(r&&r.isFile()){if(e.IS_WINDOWS){let e=s.extname(t).toUpperCase();if(n.some(t=>t.toUpperCase()===e))return t}else if(m(r))return t}let i=t;for(let a of n){t=i+a,r=void 0;try{r=yield(0,e.stat)(t)}catch(e){e.code!==`ENOENT`&&console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${e}`)}if(r&&r.isFile()){if(e.IS_WINDOWS){try{let n=s.dirname(t),r=s.basename(t).toUpperCase();for(let i of yield(0,e.readdir)(n))if(r===i.toUpperCase()){t=s.join(n,i);break}}catch(e){console.log(`Unexpected error attempting to determine the actual case of the file '${t}': ${e}`)}return t}else if(m(r))return t}}return``})}function p(t){return t||=``,e.IS_WINDOWS?(t=t.replace(/\//g,`\\`),t.replace(/\\\\+/g,`\\`)):t.replace(/\/\/+/g,`/`)}function m(e){return(e.mode&1)>0||(e.mode&8)>0&&process.getgid!==void 0&&e.gid===process.getgid()||(e.mode&64)>0&&process.getuid!==void 0&&e.uid===process.getuid()}function h(){return process.env.COMSPEC??`cmd.exe`}})),$r=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})(),i=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.cp=c,e.mv=l,e.rmRF=u,e.mkdirP=d,e.which=f,e.findInPath=p;let a=L(`assert`),o=r(L(`path`)),s=r(Qr());function c(e,t){return i(this,arguments,void 0,function*(e,t,n={}){let{force:r,recursive:i,copySourceDirectory:a}=m(n),c=(yield s.exists(t))?yield s.stat(t):null;if(c&&c.isFile()&&!r)return;let l=c&&c.isDirectory()&&a?o.join(t,o.basename(e)):t;if(!(yield s.exists(e)))throw Error(`no such file or directory: ${e}`);if((yield s.stat(e)).isDirectory())if(i)yield h(e,l,0,r);else throw Error(`Failed to copy. ${e} is a directory, but tried to copy without recursive flag.`);else{if(o.relative(e,l)===``)throw Error(`'${l}' and '${e}' are the same file`);yield g(e,l,r)}})}function l(e,t){return i(this,arguments,void 0,function*(e,t,n={}){if(yield s.exists(t)){let r=!0;if((yield s.isDirectory(t))&&(t=o.join(t,o.basename(e)),r=yield s.exists(t)),r)if(n.force==null||n.force)yield u(t);else throw Error(`Destination already exists`)}yield d(o.dirname(t)),yield s.rename(e,t)})}function u(e){return i(this,void 0,void 0,function*(){if(s.IS_WINDOWS&&/[*"<>|]/.test(e))throw Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{yield s.rm(e,{force:!0,maxRetries:3,recursive:!0,retryDelay:300})}catch(e){throw Error(`File was unable to be removed ${e}`)}})}function d(e){return i(this,void 0,void 0,function*(){(0,a.ok)(e,`a path argument must be provided`),yield s.mkdir(e,{recursive:!0})})}function f(e,t){return i(this,void 0,void 0,function*(){if(!e)throw Error(`parameter 'tool' is required`);if(t){let t=yield f(e,!1);if(!t)throw s.IS_WINDOWS?Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return t}let n=yield p(e);return n&&n.length>0?n[0]:``})}function p(e){return i(this,void 0,void 0,function*(){if(!e)throw Error(`parameter 'tool' is required`);let t=[];if(s.IS_WINDOWS&&process.env.PATHEXT)for(let e of process.env.PATHEXT.split(o.delimiter))e&&t.push(e);if(s.isRooted(e)){let n=yield s.tryGetExecutablePath(e,t);return n?[n]:[]}if(e.includes(o.sep))return[];let n=[];if(process.env.PATH)for(let e of process.env.PATH.split(o.delimiter))e&&n.push(e);let r=[];for(let i of n){let n=yield s.tryGetExecutablePath(o.join(i,e),t);n&&r.push(n)}return r})}function m(e){return{force:e.force==null?!0:e.force,recursive:!!e.recursive,copySourceDirectory:e.copySourceDirectory==null?!0:!!e.copySourceDirectory}}function h(e,t,n,r){return i(this,void 0,void 0,function*(){if(n>=255)return;n++,yield d(t);let i=yield s.readdir(e);for(let a of i){let i=`${e}/${a}`,o=`${t}/${a}`;(yield s.lstat(i)).isDirectory()?yield h(i,o,n,r):yield g(i,o,r)}yield s.chmod(t,(yield s.stat(e)).mode)})}function g(e,t,n){return i(this,void 0,void 0,function*(){if((yield s.lstat(e)).isSymbolicLink()){try{yield s.lstat(t),yield s.unlink(t)}catch(e){e.code===`EPERM`&&(yield s.chmod(t,`0666`),yield s.unlink(t))}let n=yield s.readlink(e);yield s.symlink(n,t,s.IS_WINDOWS?`junction`:null)}else (!(yield s.exists(t))||n)&&(yield s.copyFile(e,t))})}})),ei=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})(),i=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.ToolRunner=void 0,e.argStringToArray=p;let a=r(L(`os`)),o=r(L(`events`)),s=r(L(`child_process`)),c=r(L(`path`)),l=r($r()),u=r(Qr()),d=L(`timers`),f=process.platform===`win32`;e.ToolRunner=class extends o.EventEmitter{constructor(e,t,n){if(super(),!e)throw Error(`Parameter 'toolPath' cannot be null or empty.`);this.toolPath=e,this.args=t||[],this.options=n||{}}_debug(e){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(e)}_getCommandString(e,t){let n=this._getSpawnFileName(),r=this._getSpawnArgs(e),i=t?``:`[command]`;if(f)if(this._isCmdFile()){i+=n;for(let e of r)i+=` ${e}`}else if(e.windowsVerbatimArguments){i+=`"${n}"`;for(let e of r)i+=` ${e}`}else{i+=this._windowsQuoteCmdArg(n);for(let e of r)i+=` ${this._windowsQuoteCmdArg(e)}`}else{i+=n;for(let e of r)i+=` ${e}`}return i}_processLineBuffer(e,t,n){try{let r=t+e.toString(),i=r.indexOf(a.EOL);for(;i>-1;)n(r.substring(0,i)),r=r.substring(i+a.EOL.length),i=r.indexOf(a.EOL);return r}catch(e){return this._debug(`error processing line. Failed with error ${e}`),``}}_getSpawnFileName(){return f&&this._isCmdFile()?process.env.COMSPEC||`cmd.exe`:this.toolPath}_getSpawnArgs(e){if(f&&this._isCmdFile()){let t=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(let n of this.args)t+=` `,t+=e.windowsVerbatimArguments?n:this._windowsQuoteCmdArg(n);return t+=`"`,[t]}return this.args}_endsWith(e,t){return e.endsWith(t)}_isCmdFile(){let e=this.toolPath.toUpperCase();return this._endsWith(e,`.CMD`)||this._endsWith(e,`.BAT`)}_windowsQuoteCmdArg(e){if(!this._isCmdFile())return this._uvQuoteCmdArg(e);if(!e)return`""`;let t=[` `,`	`,`&`,`(`,`)`,`[`,`]`,`{`,`}`,`^`,`=`,`;`,`!`,`'`,`+`,`,`,"`",`~`,`|`,`<`,`>`,`"`],n=!1;for(let r of e)if(t.some(e=>e===r)){n=!0;break}if(!n)return e;let r=`"`,i=!0;for(let t=e.length;t>0;t--)r+=e[t-1],i&&e[t-1]===`\\`?r+=`\\`:e[t-1]===`"`?(i=!0,r+=`"`):i=!1;return r+=`"`,r.split(``).reverse().join(``)}_uvQuoteCmdArg(e){if(!e)return`""`;if(!e.includes(` `)&&!e.includes(`	`)&&!e.includes(`"`))return e;if(!e.includes(`"`)&&!e.includes(`\\`))return`"${e}"`;let t=`"`,n=!0;for(let r=e.length;r>0;r--)t+=e[r-1],n&&e[r-1]===`\\`?t+=`\\`:e[r-1]===`"`?(n=!0,t+=`\\`):n=!1;return t+=`"`,t.split(``).reverse().join(``)}_cloneExecOptions(e){e||={};let t={cwd:e.cwd||process.cwd(),env:e.env||process.env,silent:e.silent||!1,windowsVerbatimArguments:e.windowsVerbatimArguments||!1,failOnStdErr:e.failOnStdErr||!1,ignoreReturnCode:e.ignoreReturnCode||!1,delay:e.delay||1e4};return t.outStream=e.outStream||process.stdout,t.errStream=e.errStream||process.stderr,t}_getSpawnOptions(e,t){e||={};let n={};return n.cwd=e.cwd,n.env=e.env,n.windowsVerbatimArguments=e.windowsVerbatimArguments||this._isCmdFile(),e.windowsVerbatimArguments&&(n.argv0=`"${t}"`),n}exec(){return i(this,void 0,void 0,function*(){return!u.isRooted(this.toolPath)&&(this.toolPath.includes(`/`)||f&&this.toolPath.includes(`\\`))&&(this.toolPath=c.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield l.which(this.toolPath,!0),new Promise((e,t)=>i(this,void 0,void 0,function*(){this._debug(`exec tool: ${this.toolPath}`),this._debug(`arguments:`);for(let e of this.args)this._debug(`   ${e}`);let n=this._cloneExecOptions(this.options);!n.silent&&n.outStream&&n.outStream.write(this._getCommandString(n)+a.EOL);let r=new m(n,this.toolPath);if(r.on(`debug`,e=>{this._debug(e)}),this.options.cwd&&!(yield u.exists(this.options.cwd)))return t(Error(`The cwd: ${this.options.cwd} does not exist!`));let i=this._getSpawnFileName(),o=s.spawn(i,this._getSpawnArgs(n),this._getSpawnOptions(this.options,i)),c=``;o.stdout&&o.stdout.on(`data`,e=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(e),!n.silent&&n.outStream&&n.outStream.write(e),c=this._processLineBuffer(e,c,e=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(e)})});let l=``;if(o.stderr&&o.stderr.on(`data`,e=>{r.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(e),!n.silent&&n.errStream&&n.outStream&&(n.failOnStdErr?n.errStream:n.outStream).write(e),l=this._processLineBuffer(e,l,e=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(e)})}),o.on(`error`,e=>{r.processError=e.message,r.processExited=!0,r.processClosed=!0,r.CheckComplete()}),o.on(`exit`,e=>{r.processExitCode=e,r.processExited=!0,this._debug(`Exit code ${e} received from tool '${this.toolPath}'`),r.CheckComplete()}),o.on(`close`,e=>{r.processExitCode=e,r.processExited=!0,r.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),r.CheckComplete()}),r.on(`done`,(n,r)=>{c.length>0&&this.emit(`stdline`,c),l.length>0&&this.emit(`errline`,l),o.removeAllListeners(),n?t(n):e(r)}),this.options.input){if(!o.stdin)throw Error(`child process missing stdin`);o.stdin.end(this.options.input)}}))})}};function p(e){let t=[],n=!1,r=!1,i=``;function a(e){r&&e!==`"`&&(i+=`\\`),i+=e,r=!1}for(let o=0;o<e.length;o++){let s=e.charAt(o);if(s===`"`){r?a(s):n=!n;continue}if(s===`\\`&&r){a(s);continue}if(s===`\\`&&n){r=!0;continue}if(s===` `&&!n){i.length>0&&(t.push(i),i=``);continue}a(s)}return i.length>0&&t.push(i.trim()),t}var m=class e extends o.EventEmitter{constructor(e,t){if(super(),this.processClosed=!1,this.processError=``,this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!t)throw Error(`toolPath must not be empty`);this.options=e,this.toolPath=t,e.delay&&(this.delay=e.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=(0,d.setTimeout)(e.HandleTimeout,this.delay,this)))}_debug(e){this.emit(`debug`,e)}_setResult(){let e;this.processExited&&(this.processError?e=Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):this.processExitCode!==0&&!this.options.ignoreReturnCode?e=Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`):this.processStderr&&this.options.failOnStdErr&&(e=Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`))),this.timeout&&=(clearTimeout(this.timeout),null),this.done=!0,this.emit(`done`,e,this.processExitCode)}static HandleTimeout(e){if(!e.done){if(!e.processClosed&&e.processExited){let t=`The STDIO streams did not close within ${e.delay/1e3} seconds of the exit event from process '${e.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;e._debug(t)}e._setResult()}}}})),ti=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})(),i=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.exec=s,e.getExecOutput=c;let a=L(`string_decoder`),o=r(ei());function s(e,t,n){return i(this,void 0,void 0,function*(){let r=o.argStringToArray(e);if(r.length===0)throw Error(`Parameter 'commandLine' cannot be null or empty.`);let i=r[0];return t=r.slice(1).concat(t||[]),new o.ToolRunner(i,t,n).exec()})}function c(e,t,n){return i(this,void 0,void 0,function*(){let r=``,i=``,o=new a.StringDecoder(`utf8`),c=new a.StringDecoder(`utf8`),l=n?.listeners?.stdout,u=n?.listeners?.stderr,d=Object.assign(Object.assign({},n?.listeners),{stdout:e=>{r+=o.write(e),l&&l(e)},stderr:e=>{i+=c.write(e),u&&u(e)}}),f=yield s(e,t,Object.assign(Object.assign({},n),{listeners:d}));return r+=o.end(),i+=c.end(),{exitCode:f,stdout:r,stderr:i}})}})),ni=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})(),i=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},a=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,`__esModule`,{value:!0}),e.isLinux=e.isMacOS=e.isWindows=e.arch=e.platform=void 0,e.getDetails=d;let o=a(L(`os`)),s=r(ti()),c=()=>i(void 0,void 0,void 0,function*(){let{stdout:e}=yield s.getExecOutput(`powershell -command "(Get-CimInstance -ClassName Win32_OperatingSystem).Version"`,void 0,{silent:!0}),{stdout:t}=yield s.getExecOutput(`powershell -command "(Get-CimInstance -ClassName Win32_OperatingSystem).Caption"`,void 0,{silent:!0});return{name:t.trim(),version:e.trim()}}),l=()=>i(void 0,void 0,void 0,function*(){let{stdout:e}=yield s.getExecOutput(`sw_vers`,void 0,{silent:!0}),t=e.match(/ProductVersion:\s*(.+)/)?.[1]??``;return{name:e.match(/ProductName:\s*(.+)/)?.[1]??``,version:t}}),u=()=>i(void 0,void 0,void 0,function*(){let{stdout:e}=yield s.getExecOutput(`lsb_release`,[`-i`,`-r`,`-s`],{silent:!0}),[t,n]=e.trim().split(`
`);return{name:t,version:n}});e.platform=o.default.platform(),e.arch=o.default.arch(),e.isWindows=e.platform===`win32`,e.isMacOS=e.platform===`darwin`,e.isLinux=e.platform===`linux`;function d(){return i(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield e.isWindows?c():e.isMacOS?l():u()),{platform:e.platform,arch:e.arch,isWindows:e.isWindows,isMacOS:e.isMacOS,isLinux:e.isLinux})})}})),ri=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})(),i=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.platform=e.toPlatformPath=e.toWin32Path=e.toPosixPath=e.markdownSummary=e.summary=e.ExitCode=void 0,e.exportVariable=f,e.setSecret=p,e.addPath=m,e.getInput=h,e.getMultilineInput=g,e.getBooleanInput=_,e.setOutput=v,e.setCommandEcho=y,e.setFailed=b,e.isDebug=x,e.debug=S,e.error=C,e.warning=w,e.notice=T,e.info=E,e.startGroup=D,e.endGroup=O,e.group=k,e.saveState=ee,e.getState=A,e.getIDToken=j;let a=Kr(),o=qr(),s=Gr(),c=r(L(`os`)),l=r(L(`path`)),u=Yr();var d;(function(e){e[e.Success=0]=`Success`,e[e.Failure=1]=`Failure`})(d||(e.ExitCode=d={}));function f(e,t){let n=(0,s.toCommandValue)(t);if(process.env[e]=n,process.env.GITHUB_ENV)return(0,o.issueFileCommand)(`ENV`,(0,o.prepareKeyValueMessage)(e,t));(0,a.issueCommand)(`set-env`,{name:e},n)}function p(e){(0,a.issueCommand)(`add-mask`,{},e)}function m(e){process.env.GITHUB_PATH?(0,o.issueFileCommand)(`PATH`,e):(0,a.issueCommand)(`add-path`,{},e),process.env.PATH=`${e}${l.delimiter}${process.env.PATH}`}function h(e,t){let n=process.env[`INPUT_${e.replace(/ /g,`_`).toUpperCase()}`]||``;if(t&&t.required&&!n)throw Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?n:n.trim()}function g(e,t){let n=h(e,t).split(`
`).filter(e=>e!==``);return t&&t.trimWhitespace===!1?n:n.map(e=>e.trim())}function _(e,t){let n=[`true`,`True`,`TRUE`],r=[`false`,`False`,`FALSE`],i=h(e,t);if(n.includes(i))return!0;if(r.includes(i))return!1;throw TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}\nSupport boolean input list: \`true | True | TRUE | false | False | FALSE\``)}function v(e,t){if(process.env.GITHUB_OUTPUT)return(0,o.issueFileCommand)(`OUTPUT`,(0,o.prepareKeyValueMessage)(e,t));process.stdout.write(c.EOL),(0,a.issueCommand)(`set-output`,{name:e},(0,s.toCommandValue)(t))}function y(e){(0,a.issue)(`echo`,e?`on`:`off`)}function b(e){process.exitCode=d.Failure,C(e)}function x(){return process.env.RUNNER_DEBUG===`1`}function S(e){(0,a.issueCommand)(`debug`,{},e)}function C(e,t={}){(0,a.issueCommand)(`error`,(0,s.toCommandProperties)(t),e instanceof Error?e.toString():e)}function w(e,t={}){(0,a.issueCommand)(`warning`,(0,s.toCommandProperties)(t),e instanceof Error?e.toString():e)}function T(e,t={}){(0,a.issueCommand)(`notice`,(0,s.toCommandProperties)(t),e instanceof Error?e.toString():e)}function E(e){process.stdout.write(e+c.EOL)}function D(e){(0,a.issue)(`group`,e)}function O(){(0,a.issue)(`endgroup`)}function k(e,t){return i(this,void 0,void 0,function*(){D(e);let n;try{n=yield t()}finally{O()}return n})}function ee(e,t){if(process.env.GITHUB_STATE)return(0,o.issueFileCommand)(`STATE`,(0,o.prepareKeyValueMessage)(e,t));(0,a.issueCommand)(`save-state`,{name:e},(0,s.toCommandValue)(t))}function A(e){return process.env[`STATE_${e}`]||``}function j(e){return i(this,void 0,void 0,function*(){return yield u.OidcClient.getIDToken(e)})}var M=Xr();Object.defineProperty(e,`summary`,{enumerable:!0,get:function(){return M.summary}});var N=Xr();Object.defineProperty(e,`markdownSummary`,{enumerable:!0,get:function(){return N.markdownSummary}});var P=Zr();Object.defineProperty(e,`toPosixPath`,{enumerable:!0,get:function(){return P.toPosixPath}}),Object.defineProperty(e,`toWin32Path`,{enumerable:!0,get:function(){return P.toWin32Path}}),Object.defineProperty(e,`toPlatformPath`,{enumerable:!0,get:function(){return P.toPlatformPath}}),e.platform=r(ni())})),ii=d(((e,t)=>{e=t.exports=C;var n=typeof process==`object`&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(`SEMVER`),console.log.apply(console,e)}:function(){};e.SEMVER_SPEC_VERSION=`2.0.0`;var r=256,i=2**53-1||9007199254740991,a=16,o=r-6,s=e.re=[],c=e.safeRe=[],l=e.src=[],u=e.tokens={},d=0;function f(e){u[e]=d++}var p=`[a-zA-Z0-9-]`,m=[[`\\s`,1],[`\\d`,r],[p,o]];function h(e){for(var t=0;t<m.length;t++){var n=m[t][0],r=m[t][1];e=e.split(n+`*`).join(n+`{0,`+r+`}`).split(n+`+`).join(n+`{1,`+r+`}`)}return e}f(`NUMERICIDENTIFIER`),l[u.NUMERICIDENTIFIER]=`0|[1-9]\\d*`,f(`NUMERICIDENTIFIERLOOSE`),l[u.NUMERICIDENTIFIERLOOSE]=`\\d+`,f(`NONNUMERICIDENTIFIER`),l[u.NONNUMERICIDENTIFIER]=`\\d*[a-zA-Z-]`+p+`*`,f(`MAINVERSION`),l[u.MAINVERSION]=`(`+l[u.NUMERICIDENTIFIER]+`)\\.(`+l[u.NUMERICIDENTIFIER]+`)\\.(`+l[u.NUMERICIDENTIFIER]+`)`,f(`MAINVERSIONLOOSE`),l[u.MAINVERSIONLOOSE]=`(`+l[u.NUMERICIDENTIFIERLOOSE]+`)\\.(`+l[u.NUMERICIDENTIFIERLOOSE]+`)\\.(`+l[u.NUMERICIDENTIFIERLOOSE]+`)`,f(`PRERELEASEIDENTIFIER`),l[u.PRERELEASEIDENTIFIER]=`(?:`+l[u.NUMERICIDENTIFIER]+`|`+l[u.NONNUMERICIDENTIFIER]+`)`,f(`PRERELEASEIDENTIFIERLOOSE`),l[u.PRERELEASEIDENTIFIERLOOSE]=`(?:`+l[u.NUMERICIDENTIFIERLOOSE]+`|`+l[u.NONNUMERICIDENTIFIER]+`)`,f(`PRERELEASE`),l[u.PRERELEASE]=`(?:-(`+l[u.PRERELEASEIDENTIFIER]+`(?:\\.`+l[u.PRERELEASEIDENTIFIER]+`)*))`,f(`PRERELEASELOOSE`),l[u.PRERELEASELOOSE]=`(?:-?(`+l[u.PRERELEASEIDENTIFIERLOOSE]+`(?:\\.`+l[u.PRERELEASEIDENTIFIERLOOSE]+`)*))`,f(`BUILDIDENTIFIER`),l[u.BUILDIDENTIFIER]=p+`+`,f(`BUILD`),l[u.BUILD]=`(?:\\+(`+l[u.BUILDIDENTIFIER]+`(?:\\.`+l[u.BUILDIDENTIFIER]+`)*))`,f(`FULL`),f(`FULLPLAIN`),l[u.FULLPLAIN]=`v?`+l[u.MAINVERSION]+l[u.PRERELEASE]+`?`+l[u.BUILD]+`?`,l[u.FULL]=`^`+l[u.FULLPLAIN]+`$`,f(`LOOSEPLAIN`),l[u.LOOSEPLAIN]=`[v=\\s]*`+l[u.MAINVERSIONLOOSE]+l[u.PRERELEASELOOSE]+`?`+l[u.BUILD]+`?`,f(`LOOSE`),l[u.LOOSE]=`^`+l[u.LOOSEPLAIN]+`$`,f(`GTLT`),l[u.GTLT]=`((?:<|>)?=?)`,f(`XRANGEIDENTIFIERLOOSE`),l[u.XRANGEIDENTIFIERLOOSE]=l[u.NUMERICIDENTIFIERLOOSE]+`|x|X|\\*`,f(`XRANGEIDENTIFIER`),l[u.XRANGEIDENTIFIER]=l[u.NUMERICIDENTIFIER]+`|x|X|\\*`,f(`XRANGEPLAIN`),l[u.XRANGEPLAIN]=`[v=\\s]*(`+l[u.XRANGEIDENTIFIER]+`)(?:\\.(`+l[u.XRANGEIDENTIFIER]+`)(?:\\.(`+l[u.XRANGEIDENTIFIER]+`)(?:`+l[u.PRERELEASE]+`)?`+l[u.BUILD]+`?)?)?`,f(`XRANGEPLAINLOOSE`),l[u.XRANGEPLAINLOOSE]=`[v=\\s]*(`+l[u.XRANGEIDENTIFIERLOOSE]+`)(?:\\.(`+l[u.XRANGEIDENTIFIERLOOSE]+`)(?:\\.(`+l[u.XRANGEIDENTIFIERLOOSE]+`)(?:`+l[u.PRERELEASELOOSE]+`)?`+l[u.BUILD]+`?)?)?`,f(`XRANGE`),l[u.XRANGE]=`^`+l[u.GTLT]+`\\s*`+l[u.XRANGEPLAIN]+`$`,f(`XRANGELOOSE`),l[u.XRANGELOOSE]=`^`+l[u.GTLT]+`\\s*`+l[u.XRANGEPLAINLOOSE]+`$`,f(`COERCE`),l[u.COERCE]=`(^|[^\\d])(\\d{1,`+a+`})(?:\\.(\\d{1,`+a+`}))?(?:\\.(\\d{1,`+a+`}))?(?:$|[^\\d])`,f(`COERCERTL`),s[u.COERCERTL]=new RegExp(l[u.COERCE],`g`),c[u.COERCERTL]=new RegExp(h(l[u.COERCE]),`g`),f(`LONETILDE`),l[u.LONETILDE]=`(?:~>?)`,f(`TILDETRIM`),l[u.TILDETRIM]=`(\\s*)`+l[u.LONETILDE]+`\\s+`,s[u.TILDETRIM]=new RegExp(l[u.TILDETRIM],`g`),c[u.TILDETRIM]=new RegExp(h(l[u.TILDETRIM]),`g`);var g=`$1~`;f(`TILDE`),l[u.TILDE]=`^`+l[u.LONETILDE]+l[u.XRANGEPLAIN]+`$`,f(`TILDELOOSE`),l[u.TILDELOOSE]=`^`+l[u.LONETILDE]+l[u.XRANGEPLAINLOOSE]+`$`,f(`LONECARET`),l[u.LONECARET]=`(?:\\^)`,f(`CARETTRIM`),l[u.CARETTRIM]=`(\\s*)`+l[u.LONECARET]+`\\s+`,s[u.CARETTRIM]=new RegExp(l[u.CARETTRIM],`g`),c[u.CARETTRIM]=new RegExp(h(l[u.CARETTRIM]),`g`);var _=`$1^`;f(`CARET`),l[u.CARET]=`^`+l[u.LONECARET]+l[u.XRANGEPLAIN]+`$`,f(`CARETLOOSE`),l[u.CARETLOOSE]=`^`+l[u.LONECARET]+l[u.XRANGEPLAINLOOSE]+`$`,f(`COMPARATORLOOSE`),l[u.COMPARATORLOOSE]=`^`+l[u.GTLT]+`\\s*(`+l[u.LOOSEPLAIN]+`)$|^$`,f(`COMPARATOR`),l[u.COMPARATOR]=`^`+l[u.GTLT]+`\\s*(`+l[u.FULLPLAIN]+`)$|^$`,f(`COMPARATORTRIM`),l[u.COMPARATORTRIM]=`(\\s*)`+l[u.GTLT]+`\\s*(`+l[u.LOOSEPLAIN]+`|`+l[u.XRANGEPLAIN]+`)`,s[u.COMPARATORTRIM]=new RegExp(l[u.COMPARATORTRIM],`g`),c[u.COMPARATORTRIM]=new RegExp(h(l[u.COMPARATORTRIM]),`g`);var v=`$1$2$3`;f(`HYPHENRANGE`),l[u.HYPHENRANGE]=`^\\s*(`+l[u.XRANGEPLAIN]+`)\\s+-\\s+(`+l[u.XRANGEPLAIN]+`)\\s*$`,f(`HYPHENRANGELOOSE`),l[u.HYPHENRANGELOOSE]=`^\\s*(`+l[u.XRANGEPLAINLOOSE]+`)\\s+-\\s+(`+l[u.XRANGEPLAINLOOSE]+`)\\s*$`,f(`STAR`),l[u.STAR]=`(<|>)?=?\\s*\\*`;for(var y=0;y<d;y++)n(y,l[y]),s[y]||(s[y]=new RegExp(l[y]),c[y]=new RegExp(h(l[y])));e.parse=b;function b(e,t){if((!t||typeof t!=`object`)&&(t={loose:!!t,includePrerelease:!1}),e instanceof C)return e;if(typeof e!=`string`||e.length>r||!(t.loose?c[u.LOOSE]:c[u.FULL]).test(e))return null;try{return new C(e,t)}catch{return null}}e.valid=x;function x(e,t){var n=b(e,t);return n?n.version:null}e.clean=S;function S(e,t){var n=b(e.trim().replace(/^[=v]+/,``),t);return n?n.version:null}e.SemVer=C;function C(e,t){if((!t||typeof t!=`object`)&&(t={loose:!!t,includePrerelease:!1}),e instanceof C){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!=`string`)throw TypeError(`Invalid Version: `+e);if(e.length>r)throw TypeError(`version is longer than `+r+` characters`);if(!(this instanceof C))return new C(e,t);n(`SemVer`,e,t),this.options=t,this.loose=!!t.loose;var a=e.trim().match(t.loose?c[u.LOOSE]:c[u.FULL]);if(!a)throw TypeError(`Invalid Version: `+e);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>i||this.major<0)throw TypeError(`Invalid major version`);if(this.minor>i||this.minor<0)throw TypeError(`Invalid minor version`);if(this.patch>i||this.patch<0)throw TypeError(`Invalid patch version`);a[4]?this.prerelease=a[4].split(`.`).map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=a[5]?a[5].split(`.`):[],this.format()}C.prototype.format=function(){return this.version=this.major+`.`+this.minor+`.`+this.patch,this.prerelease.length&&(this.version+=`-`+this.prerelease.join(`.`)),this.version},C.prototype.toString=function(){return this.version},C.prototype.compare=function(e){return n(`SemVer.compare`,this.version,this.options,e),e instanceof C||(e=new C(e,this.options)),this.compareMain(e)||this.comparePre(e)},C.prototype.compareMain=function(e){return e instanceof C||(e=new C(e,this.options)),D(this.major,e.major)||D(this.minor,e.minor)||D(this.patch,e.patch)},C.prototype.comparePre=function(e){if(e instanceof C||(e=new C(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n(`prerelease compare`,t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return D(r,i)}while(++t)},C.prototype.compareBuild=function(e){e instanceof C||(e=new C(e,this.options));var t=0;do{var r=this.build[t],i=e.build[t];if(n(`prerelease compare`,t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return D(r,i)}while(++t)},C.prototype.inc=function(e,t){switch(e){case`premajor`:this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc(`pre`,t);break;case`preminor`:this.prerelease.length=0,this.patch=0,this.minor++,this.inc(`pre`,t);break;case`prepatch`:this.prerelease.length=0,this.inc(`patch`,t),this.inc(`pre`,t);break;case`prerelease`:this.prerelease.length===0&&this.inc(`patch`,t),this.inc(`pre`,t);break;case`major`:(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case`minor`:(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case`patch`:this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case`pre`:if(this.prerelease.length===0)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)typeof this.prerelease[n]==`number`&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw Error(`invalid increment argument: `+e)}return this.format(),this.raw=this.version,this},e.inc=w;function w(e,t,n,r){typeof n==`string`&&(r=n,n=void 0);try{return new C(e,n).inc(t,r).version}catch{return null}}e.diff=T;function T(e,t){if(z(e,t))return null;var n=b(e),r=b(t),i=``;if(n.prerelease.length||r.prerelease.length){i=`pre`;var a=`prerelease`}for(var o in n)if((o===`major`||o===`minor`||o===`patch`)&&n[o]!==r[o])return i+o;return a}e.compareIdentifiers=D;var E=/^[0-9]+$/;function D(e,t){var n=E.test(e),r=E.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}e.rcompareIdentifiers=O;function O(e,t){return D(t,e)}e.major=k;function k(e,t){return new C(e,t).major}e.minor=ee;function ee(e,t){return new C(e,t).minor}e.patch=A;function A(e,t){return new C(e,t).patch}e.compare=j;function j(e,t,n){return new C(e,n).compare(new C(t,n))}e.compareLoose=M;function M(e,t){return j(e,t,!0)}e.compareBuild=N;function N(e,t,n){var r=new C(e,n),i=new C(t,n);return r.compare(i)||r.compareBuild(i)}e.rcompare=P;function P(e,t,n){return j(t,e,n)}e.sort=F;function F(t,n){return t.sort(function(t,r){return e.compareBuild(t,r,n)})}e.rsort=I;function I(t,n){return t.sort(function(t,r){return e.compareBuild(r,t,n)})}e.gt=L;function L(e,t,n){return j(e,t,n)>0}e.lt=R;function R(e,t,n){return j(e,t,n)<0}e.eq=z;function z(e,t,n){return j(e,t,n)===0}e.neq=B;function B(e,t,n){return j(e,t,n)!==0}e.gte=V;function V(e,t,n){return j(e,t,n)>=0}e.lte=H;function H(e,t,n){return j(e,t,n)<=0}e.cmp=U;function U(e,t,n,r){switch(t){case`===`:return typeof e==`object`&&(e=e.version),typeof n==`object`&&(n=n.version),e===n;case`!==`:return typeof e==`object`&&(e=e.version),typeof n==`object`&&(n=n.version),e!==n;case``:case`=`:case`==`:return z(e,n,r);case`!=`:return B(e,n,r);case`>`:return L(e,n,r);case`>=`:return V(e,n,r);case`<`:return R(e,n,r);case`<=`:return H(e,n,r);default:throw TypeError(`Invalid operator: `+t)}}e.Comparator=W;function W(e,t){if((!t||typeof t!=`object`)&&(t={loose:!!t,includePrerelease:!1}),e instanceof W){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof W))return new W(e,t);e=e.trim().split(/\s+/).join(` `),n(`comparator`,e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===G?this.value=``:this.value=this.operator+this.semver.version,n(`comp`,this)}var G={};W.prototype.parse=function(e){var t=this.options.loose?c[u.COMPARATORLOOSE]:c[u.COMPARATOR],n=e.match(t);if(!n)throw TypeError(`Invalid comparator: `+e);this.operator=n[1]===void 0?``:n[1],this.operator===`=`&&(this.operator=``),n[2]?this.semver=new C(n[2],this.options.loose):this.semver=G},W.prototype.toString=function(){return this.value},W.prototype.test=function(e){if(n(`Comparator.test`,e,this.options.loose),this.semver===G||e===G)return!0;if(typeof e==`string`)try{e=new C(e,this.options)}catch{return!1}return U(e,this.operator,this.semver,this.options)},W.prototype.intersects=function(e,t){if(!(e instanceof W))throw TypeError(`a Comparator is required`);(!t||typeof t!=`object`)&&(t={loose:!!t,includePrerelease:!1});var n;if(this.operator===``)return this.value===``?!0:(n=new K(e.value,t),de(this.value,n,t));if(e.operator===``)return e.value===``?!0:(n=new K(this.value,t),de(e.semver,n,t));var r=(this.operator===`>=`||this.operator===`>`)&&(e.operator===`>=`||e.operator===`>`),i=(this.operator===`<=`||this.operator===`<`)&&(e.operator===`<=`||e.operator===`<`),a=this.semver.version===e.semver.version,o=(this.operator===`>=`||this.operator===`<=`)&&(e.operator===`>=`||e.operator===`<=`),s=U(this.semver,`<`,e.semver,t)&&(this.operator===`>=`||this.operator===`>`)&&(e.operator===`<=`||e.operator===`<`),c=U(this.semver,`>`,e.semver,t)&&(this.operator===`<=`||this.operator===`<`)&&(e.operator===`>=`||e.operator===`>`);return r||i||a&&o||s||c},e.Range=K;function K(e,t){if((!t||typeof t!=`object`)&&(t={loose:!!t,includePrerelease:!1}),e instanceof K)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new K(e.raw,t);if(e instanceof W)return new K(e.value,t);if(!(this instanceof K))return new K(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(` `),this.set=this.raw.split(`||`).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw TypeError(`Invalid SemVer Range: `+this.raw);this.format()}K.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(` `).trim()}).join(`||`).trim(),this.range},K.prototype.toString=function(){return this.range},K.prototype.parseRange=function(e){var t=this.options.loose,r=t?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];e=e.replace(r,le),n(`hyphen replace`,e),e=e.replace(c[u.COMPARATORTRIM],v),n(`comparator trim`,e,c[u.COMPARATORTRIM]),e=e.replace(c[u.TILDETRIM],g),e=e.replace(c[u.CARETTRIM],_),e=e.split(/\s+/).join(` `);var i=t?c[u.COMPARATORLOOSE]:c[u.COMPARATOR],a=e.split(` `).map(function(e){return J(e,this.options)},this).join(` `).split(/\s+/);return this.options.loose&&(a=a.filter(function(e){return!!e.match(i)})),a=a.map(function(e){return new W(e,this.options)},this),a},K.prototype.intersects=function(e,t){if(!(e instanceof K))throw TypeError(`a Range is required`);return this.set.some(function(n){return q(n,t)&&e.set.some(function(e){return q(e,t)&&n.every(function(n){return e.every(function(e){return n.intersects(e,t)})})})})};function q(e,t){for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every(function(e){return i.intersects(e,t)}),i=r.pop();return n}e.toComparators=te;function te(e,t){return new K(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(` `).trim().split(` `)})}function J(e,t){return n(`comp`,e,t),e=ie(e,t),n(`caret`,e),e=ne(e,t),n(`tildes`,e),e=oe(e,t),n(`xrange`,e),e=ce(e,t),n(`stars`,e),e}function Y(e){return!e||e.toLowerCase()===`x`||e===`*`}function ne(e,t){return e.trim().split(/\s+/).map(function(e){return re(e,t)}).join(` `)}function re(e,t){var r=t.loose?c[u.TILDELOOSE]:c[u.TILDE];return e.replace(r,function(t,r,i,a,o){n(`tilde`,e,t,r,i,a,o);var s;return Y(r)?s=``:Y(i)?s=`>=`+r+`.0.0 <`+(+r+1)+`.0.0`:Y(a)?s=`>=`+r+`.`+i+`.0 <`+r+`.`+(+i+1)+`.0`:o?(n(`replaceTilde pr`,o),s=`>=`+r+`.`+i+`.`+a+`-`+o+` <`+r+`.`+(+i+1)+`.0`):s=`>=`+r+`.`+i+`.`+a+` <`+r+`.`+(+i+1)+`.0`,n(`tilde return`,s),s})}function ie(e,t){return e.trim().split(/\s+/).map(function(e){return ae(e,t)}).join(` `)}function ae(e,t){n(`caret`,e,t);var r=t.loose?c[u.CARETLOOSE]:c[u.CARET];return e.replace(r,function(t,r,i,a,o){n(`caret`,e,t,r,i,a,o);var s;return Y(r)?s=``:Y(i)?s=`>=`+r+`.0.0 <`+(+r+1)+`.0.0`:Y(a)?s=r===`0`?`>=`+r+`.`+i+`.0 <`+r+`.`+(+i+1)+`.0`:`>=`+r+`.`+i+`.0 <`+(+r+1)+`.0.0`:o?(n(`replaceCaret pr`,o),s=r===`0`?i===`0`?`>=`+r+`.`+i+`.`+a+`-`+o+` <`+r+`.`+i+`.`+(+a+1):`>=`+r+`.`+i+`.`+a+`-`+o+` <`+r+`.`+(+i+1)+`.0`:`>=`+r+`.`+i+`.`+a+`-`+o+` <`+(+r+1)+`.0.0`):(n(`no pr`),s=r===`0`?i===`0`?`>=`+r+`.`+i+`.`+a+` <`+r+`.`+i+`.`+(+a+1):`>=`+r+`.`+i+`.`+a+` <`+r+`.`+(+i+1)+`.0`:`>=`+r+`.`+i+`.`+a+` <`+(+r+1)+`.0.0`),n(`caret return`,s),s})}function oe(e,t){return n(`replaceXRanges`,e,t),e.split(/\s+/).map(function(e){return se(e,t)}).join(` `)}function se(e,t){e=e.trim();var r=t.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return e.replace(r,function(r,i,a,o,s,c){n(`xRange`,e,r,i,a,o,s,c);var l=Y(a),u=l||Y(o),d=u||Y(s),f=d;return i===`=`&&f&&(i=``),c=t.includePrerelease?`-0`:``,l?r=i===`>`||i===`<`?`<0.0.0-0`:`*`:i&&f?(u&&(o=0),s=0,i===`>`?(i=`>=`,u?(a=+a+1,o=0,s=0):(o=+o+1,s=0)):i===`<=`&&(i=`<`,u?a=+a+1:o=+o+1),r=i+a+`.`+o+`.`+s+c):u?r=`>=`+a+`.0.0`+c+` <`+(+a+1)+`.0.0`+c:d&&(r=`>=`+a+`.`+o+`.0`+c+` <`+a+`.`+(+o+1)+`.0`+c),n(`xRange return`,r),r})}function ce(e,t){return n(`replaceStars`,e,t),e.trim().replace(c[u.STAR],``)}function le(e,t,n,r,i,a,o,s,c,l,u,d,f){return t=Y(n)?``:Y(r)?`>=`+n+`.0.0`:Y(i)?`>=`+n+`.`+r+`.0`:`>=`+t,s=Y(c)?``:Y(l)?`<`+(+c+1)+`.0.0`:Y(u)?`<`+c+`.`+(+l+1)+`.0`:d?`<=`+c+`.`+l+`.`+u+`-`+d:`<=`+s,(t+` `+s).trim()}K.prototype.test=function(e){if(!e)return!1;if(typeof e==`string`)try{e=new C(e,this.options)}catch{return!1}for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1};function ue(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==G&&e[i].semver.prerelease.length>0){var a=e[i].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0}e.satisfies=de;function de(e,t,n){try{t=new K(t,n)}catch{return!1}return t.test(e)}e.maxSatisfying=fe;function fe(e,t,n){var r=null,i=null;try{var a=new K(t,n)}catch{return null}return e.forEach(function(e){a.test(e)&&(!r||i.compare(e)===-1)&&(r=e,i=new C(r,n))}),r}e.minSatisfying=pe;function pe(e,t,n){var r=null,i=null;try{var a=new K(t,n)}catch{return null}return e.forEach(function(e){a.test(e)&&(!r||i.compare(e)===1)&&(r=e,i=new C(r,n))}),r}e.minVersion=me;function me(e,t){e=new K(e,t);var n=new C(`0.0.0`);if(e.test(n)||(n=new C(`0.0.0-0`),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach(function(e){var t=new C(e.semver.version);switch(e.operator){case`>`:t.prerelease.length===0?t.patch++:t.prerelease.push(0),t.raw=t.format();case``:case`>=`:(!n||L(n,t))&&(n=t);break;case`<`:case`<=`:break;default:throw Error(`Unexpected operation: `+e.operator)}});return n&&e.test(n)?n:null}e.validRange=he;function he(e,t){try{return new K(e,t).range||`*`}catch{return null}}e.ltr=X;function X(e,t,n){return _e(e,t,`<`,n)}e.gtr=ge;function ge(e,t,n){return _e(e,t,`>`,n)}e.outside=_e;function _e(e,t,n,r){e=new C(e,r),t=new K(t,r);var i,a,o,s,c;switch(n){case`>`:i=L,a=H,o=R,s=`>`,c=`>=`;break;case`<`:i=R,a=V,o=L,s=`<`,c=`<=`;break;default:throw TypeError(`Must provide a hilo val of "<" or ">"`)}if(de(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],d=null,f=null;if(u.forEach(function(e){e.semver===G&&(e=new W(`>=0.0.0`)),d||=e,f||=e,i(e.semver,d.semver,r)?d=e:o(e.semver,f.semver,r)&&(f=e)}),d.operator===s||d.operator===c||(!f.operator||f.operator===s)&&a(e,f.semver)||f.operator===c&&o(e,f.semver))return!1}return!0}e.prerelease=ve;function ve(e,t){var n=b(e,t);return n&&n.prerelease.length?n.prerelease:null}e.intersects=ye;function ye(e,t,n){return e=new K(e,n),t=new K(t,n),e.intersects(t)}e.coerce=be;function be(e,t){if(e instanceof C)return e;if(typeof e==`number`&&(e=String(e)),typeof e!=`string`)return null;t||={};var n=null;if(!t.rtl)n=e.match(c[u.COERCE]);else{for(var r;(r=c[u.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),c[u.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;c[u.COERCERTL].lastIndex=-1}return n===null?null:b(n[2]+`.`+(n[3]||`0`)+`.`+(n[4]||`0`),t)}})),ai=d(((e,t)=>{var n=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),r=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),i=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(t){if(t&&t.__esModule)return t;var i={};if(t!=null)for(var a=e(t),o=0;o<a.length;o++)a[o]!==`default`&&n(i,t,a[o]);return r(i,t),i}})(),a=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e._findMatch=d,e._getOsVersion=f,e._readLinuxVersionFile=p;let o=i(ii()),s=ri(),c=L(`os`),l=L(`child_process`),u=L(`fs`);function d(e,n,r,i){return a(this,void 0,void 0,function*(){let a=c.platform(),l,u,d;for(let c of r){let r=c.version;if((0,s.debug)(`check ${r} satisfies ${e}`),o.satisfies(r,e)&&(!n||c.stable===n)&&(d=c.files.find(e=>{(0,s.debug)(`${e.arch}===${i} && ${e.platform}===${a}`);let n=e.arch===i&&e.platform===a;if(n&&e.platform_version){let r=t.exports._getOsVersion();n=r===e.platform_version?!0:o.satisfies(r,e.platform_version)}return n}),d)){(0,s.debug)(`matched ${c.version}`),u=c;break}}return u&&d&&(l=Object.assign({},u),l.files=[d]),l})}function f(){let e=c.platform(),n=``;if(e===`darwin`)n=l.execSync(`sw_vers -productVersion`).toString();else if(e===`linux`){let e=t.exports._readLinuxVersionFile();if(e){let t=e.split(`
`);for(let e of t){let t=e.split(`=`);if(t.length===2&&(t[0].trim()===`VERSION_ID`||t[0].trim()===`DISTRIB_RELEASE`)){n=t[1].trim().replace(/^"/,``).replace(/"$/,``);break}}}}return n}function p(){let e=`/etc/lsb-release`,t=`/etc/os-release`,n=``;return u.existsSync(e)?n=u.readFileSync(e).toString():u.existsSync(t)&&(n=u.readFileSync(t).toString()),n}})),oi=d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})(),i=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.RetryHelper=void 0;let a=r(ri());e.RetryHelper=class{constructor(e,t,n){if(e<1)throw Error(`max attempts should be greater than or equal to 1`);if(this.maxAttempts=e,this.minSeconds=Math.floor(t),this.maxSeconds=Math.floor(n),this.minSeconds>this.maxSeconds)throw Error(`min seconds should be less than or equal to max seconds`)}execute(e,t){return i(this,void 0,void 0,function*(){let n=1;for(;n<this.maxAttempts;){try{return yield e()}catch(e){if(t&&!t(e))throw e;a.info(e.message)}let r=this.getSleepAmount();a.info(`Waiting ${r} seconds before trying again`),yield this.sleep(r),n++}return yield e()})}getSleepAmount(){return Math.floor(Math.random()*(this.maxSeconds-this.minSeconds+1))+this.minSeconds}sleep(e){return i(this,void 0,void 0,function*(){return new Promise(t=>setTimeout(t,e*1e3))})}}})),si=t(d((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})(),i=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.HTTPError=void 0,e.downloadTool=b,e.extractTar=S,e.extractZip=C,e.cacheDir=E,e.find=D;let a=r(ri()),o=r($r()),s=r(L(`crypto`)),c=r(L(`fs`));r(ai());let l=r(L(`os`)),u=r(L(`path`)),d=r(Te()),f=r(ii()),p=r(L(`stream`)),m=r(L(`util`)),h=L(`assert`),g=ti(),_=oi();var v=class extends Error{constructor(e){super(`Unexpected HTTP response: ${e}`),this.httpStatusCode=e,Object.setPrototypeOf(this,new.target.prototype)}};e.HTTPError=v;let y=process.platform===`win32`;process.platform;function b(e,t,n,r){return i(this,void 0,void 0,function*(){t||=u.join(P(),s.randomUUID()),yield o.mkdirP(u.dirname(t)),a.debug(`Downloading ${e}`),a.debug(`Destination ${t}`);let c=F(`TEST_DOWNLOAD_TOOL_RETRY_MIN_SECONDS`,10),l=F(`TEST_DOWNLOAD_TOOL_RETRY_MAX_SECONDS`,20);return yield new _.RetryHelper(3,c,l).execute(()=>i(this,void 0,void 0,function*(){return yield x(e,t||``,n,r)}),e=>!(e instanceof v&&e.httpStatusCode&&e.httpStatusCode<500&&e.httpStatusCode!==408&&e.httpStatusCode!==429))})}function x(e,t,n,r){return i(this,void 0,void 0,function*(){if(c.existsSync(t))throw Error(`Destination file path ${t} already exists`);let i=new d.HttpClient(`actions/tool-cache`,[],{allowRetries:!1});n&&(a.debug(`set auth`),r===void 0&&(r={}),r.authorization=n);let s=yield i.get(e,r);if(s.message.statusCode!==200){let t=new v(s.message.statusCode);throw a.debug(`Failed to download from "${e}". Code(${s.message.statusCode}) Message(${s.message.statusMessage})`),t}let l=m.promisify(p.pipeline),u=F(`TEST_DOWNLOAD_TOOL_RESPONSE_MESSAGE_FACTORY`,()=>s.message)(),f=!1;try{return yield l(u,c.createWriteStream(t)),a.debug(`download complete`),f=!0,t}finally{if(!f){a.debug(`download failed`);try{yield o.rmRF(t)}catch(e){a.debug(`Failed to delete '${t}'. ${e.message}`)}}}})}function S(e,t){return i(this,arguments,void 0,function*(e,t,n=`xz`){if(!e)throw Error(`parameter 'file' is required`);t=yield k(t),a.debug(`Checking tar --version`);let r=``;yield(0,g.exec)(`tar --version`,[],{ignoreReturnCode:!0,silent:!0,listeners:{stdout:e=>r+=e.toString(),stderr:e=>r+=e.toString()}}),a.debug(r.trim());let i=r.toUpperCase().includes(`GNU TAR`),o;o=n instanceof Array?n:[n],a.isDebug()&&!n.includes(`v`)&&o.push(`-v`);let s=t,c=e;return y&&i&&(o.push(`--force-local`),s=t.replace(/\\/g,`/`),c=e.replace(/\\/g,`/`)),i&&(o.push(`--warning=no-unknown-keyword`),o.push(`--overwrite`)),o.push(`-C`,s,`-f`,c),yield(0,g.exec)(`tar`,o),t})}function C(e,t){return i(this,void 0,void 0,function*(){if(!e)throw Error(`parameter 'file' is required`);return t=yield k(t),y?yield w(e,t):yield T(e,t),t})}function w(e,t){return i(this,void 0,void 0,function*(){let n=e.replace(/'/g,`''`).replace(/"|\n|\r/g,``),r=t.replace(/'/g,`''`).replace(/"|\n|\r/g,``),i=yield o.which(`pwsh`,!1);if(i){let e=[`-NoLogo`,`-NoProfile`,`-NonInteractive`,`-ExecutionPolicy`,`Unrestricted`,`-Command`,[`$ErrorActionPreference = 'Stop' ;`,`try { Add-Type -AssemblyName System.IO.Compression.ZipFile } catch { } ;`,`try { [System.IO.Compression.ZipFile]::ExtractToDirectory('${n}', '${r}', $true) }`,`catch { if (($_.Exception.GetType().FullName -eq 'System.Management.Automation.MethodException') -or ($_.Exception.GetType().FullName -eq 'System.Management.Automation.RuntimeException') ){ Expand-Archive -LiteralPath '${n}' -DestinationPath '${r}' -Force } else { throw $_ } } ;`].join(` `)];a.debug(`Using pwsh at path: ${i}`),yield(0,g.exec)(`"${i}"`,e)}else{let e=[`-NoLogo`,`-Sta`,`-NoProfile`,`-NonInteractive`,`-ExecutionPolicy`,`Unrestricted`,`-Command`,[`$ErrorActionPreference = 'Stop' ;`,`try { Add-Type -AssemblyName System.IO.Compression.FileSystem } catch { } ;`,`if ((Get-Command -Name Expand-Archive -Module Microsoft.PowerShell.Archive -ErrorAction Ignore)) { Expand-Archive -LiteralPath '${n}' -DestinationPath '${r}' -Force }`,`else {[System.IO.Compression.ZipFile]::ExtractToDirectory('${n}', '${r}', $true) }`].join(` `)],t=yield o.which(`powershell`,!0);a.debug(`Using powershell at path: ${t}`),yield(0,g.exec)(`"${t}"`,e)}})}function T(e,t){return i(this,void 0,void 0,function*(){let n=yield o.which(`unzip`,!0),r=[e];a.isDebug()||r.unshift(`-q`),r.unshift(`-o`),yield(0,g.exec)(`"${n}"`,r,{cwd:t})})}function E(e,t,n,r){return i(this,void 0,void 0,function*(){if(n=f.clean(n)||n,r||=l.arch(),a.debug(`Caching tool ${t} ${n} ${r}`),a.debug(`source dir: ${e}`),!c.statSync(e).isDirectory())throw Error(`sourceDir is not a directory`);let i=yield ee(t,n,r);for(let t of c.readdirSync(e)){let n=u.join(e,t);yield o.cp(n,i,{recursive:!0})}return A(t,n,r),i})}function D(e,t,n){if(!e)throw Error(`toolName parameter is required`);if(!t)throw Error(`versionSpec parameter is required`);n||=l.arch(),j(t)||(t=M(O(e,n),t));let r=``;if(t){t=f.clean(t)||``;let i=u.join(N(),e,t,n);a.debug(`checking cache: ${i}`),c.existsSync(i)&&c.existsSync(`${i}.complete`)?(a.debug(`Found tool in cache ${e} ${t} ${n}`),r=i):a.debug(`not found`)}return r}function O(e,t){let n=[];t||=l.arch();let r=u.join(N(),e);if(c.existsSync(r)){let e=c.readdirSync(r);for(let i of e)if(j(i)){let e=u.join(r,i,t||``);c.existsSync(e)&&c.existsSync(`${e}.complete`)&&n.push(i)}}return n}function k(e){return i(this,void 0,void 0,function*(){return e||=u.join(P(),s.randomUUID()),yield o.mkdirP(e),e})}function ee(e,t,n){return i(this,void 0,void 0,function*(){let r=u.join(N(),e,f.clean(t)||t,n||``);a.debug(`destination ${r}`);let i=`${r}.complete`;return yield o.rmRF(r),yield o.rmRF(i),yield o.mkdirP(r),r})}function A(e,t,n){let r=`${u.join(N(),e,f.clean(t)||t,n||``)}.complete`;c.writeFileSync(r,``),a.debug(`finished caching tool`)}function j(e){let t=f.clean(e)||``;a.debug(`isExplicit: ${t}`);let n=f.valid(t)!=null;return a.debug(`explicit? ${n}`),n}function M(e,t){let n=``;a.debug(`evaluating ${e.length} versions`),e=e.sort((e,t)=>f.gt(e,t)?1:-1);for(let r=e.length-1;r>=0;r--){let i=e[r];if(f.satisfies(i,t)){n=i;break}}return n?a.debug(`matched: ${n}`):a.debug(`match not found`),n}function N(){let e=process.env.RUNNER_TOOL_CACHE||``;return(0,h.ok)(e,`Expected RUNNER_TOOL_CACHE to be defined`),e}function P(){let e=process.env.RUNNER_TEMP||``;return(0,h.ok)(e,`Expected RUNNER_TEMP to be defined`),e}function F(e,t){let n=global[e];return n===void 0?t:n}}))(),1);function ci(e){let t;try{t=JSON.parse(e)}catch(e){throw e instanceof SyntaxError?Error(`Invalid auth-json format: ${e.message}`):e}if(typeof t!=`object`||!t||Array.isArray(t))throw Error(`auth-json must be a JSON object`);return t}async function li(e,t,n){let r=R.join(t,`auth.json`);await q.mkdir(t,{recursive:!0});let i=JSON.stringify(e,null,2);return await q.writeFile(r,i,{mode:384}),n.info(`Populated auth.json`,{path:r,providers:Object.keys(e).length}),r}function ui(e){return{debug:t=>e.debug(t),info:t=>e.info(t),warn:t=>e.warning(t),error:t=>e.error(t)}}function di(e){let{token:t,logger:n}=e;return n.debug(`Creating GitHub client with token`),mn(t,{log:ui(n)})}async function fi(e,t){try{let{data:n}=await e.rest.users.getAuthenticated();return t.debug(`Authenticated as`,{login:n.login,type:n.type}),n.login}catch{return t.debug(`Failed to get authenticated user, may be app token`),`fro-bot[bot]`}}async function pi(e,t,n,r){let i=t??n,a=t==null?n.length>0?`github-token`:`none`:`app-token`;if(i.length===0)return r.warning(`No GitHub token available`),{authenticated:!1,method:`none`,botLogin:null};B.env.GH_TOKEN=i,r.info(`Configured authentication`,{method:a});let o=null;return e!=null&&(o=await fi(e,r)),{authenticated:!0,method:a,botLogin:o}}async function mi(e,t,n,r){let i=e==null?`fro-bot[bot]`:`${e}[bot]`,a=t!=null&&e!=null?`${t}+${e}[bot]@users.noreply.github.com`:`agent@fro.bot`;await r.exec(`git`,[`config`,`--global`,`user.name`,i],void 0),await r.exec(`git`,[`config`,`--global`,`user.email`,a],void 0),n.info(`Configured git identity`,{name:i,email:a})}function hi(){let e=Y.platform(),t=Y.arch(),n={darwin:`darwin`,linux:`linux`,win32:`windows`},r={x64:`x64`,arm64:`arm64`},i=n[e],a=r[t];return i==null||a==null?`oh-my-opencode-${e}-${t}`:`oh-my-opencode-${i}-${a}`}async function gi(e,t={}){let{logger:n,execAdapter:r}=e,{claude:i=`no`,copilot:a=`no`,gemini:o=`no`,openai:s=`no`,opencodeZen:c=`no`,zaiCodingPlan:l=`no`}=t;n.info(`Installing Oh My OpenCode plugin`,{claude:i,copilot:a,gemini:o,openai:s,opencodeZen:c,zaiCodingPlan:l});let u=hi();n.debug(`Detected platform package`,{platformPackage:u});let d=``;try{let e=await r.exec(`npm`,[`install`,`-g`,`oh-my-opencode@latest`,`${u}@latest`],{listeners:{stdout:e=>{d+=e.toString()},stderr:e=>{d+=e.toString()}},silent:!0,ignoreReturnCode:!0});if(e!==0){let t=`npm install -g oh-my-opencode returned exit code ${e}`;return n.error(t,{output:d.slice(0,1e3)}),{installed:!1,version:null,error:`${t}\n${d.slice(0,500)}`}}n.debug(`oh-my-opencode package installed globally`)}catch(e){let t=P(e),r=d.length>0?`${t}\nOutput: ${d.slice(0,500)}`:t;return n.error(`Failed to install oh-my-opencode package`,{error:t,output:d.slice(0,500)}),{installed:!1,version:null,error:`npm install -g failed: ${r}`}}let f=[`install`,`--no-tui`,`--claude=${i}`,`--copilot=${a}`,`--gemini=${o}`,`--openai=${s}`,`--opencode-zen=${c}`,`--zai-coding-plan=${l}`];d=``;try{let e=await r.exec(`oh-my-opencode`,f,{listeners:{stdout:e=>{d+=e.toString()},stderr:e=>{d+=e.toString()}},silent:!0,ignoreReturnCode:!0});if(e!==0){let t=`oh-my-opencode install returned exit code ${e}`;return n.error(t,{output:d.slice(0,1e3)}),{installed:!1,version:null,error:`${t}\n${d.slice(0,500)}`}}let t=/oh-my-opencode@(\d+\.\d+\.\d+)/i.exec(d),i=t!=null&&t[1]!=null?t[1]:null;return n.info(`oMo plugin installed`,{version:i}),{installed:!0,version:i,error:null}}catch(e){let t=P(e),r=d.length>0?`${t}\nOutput: ${d.slice(0,500)}`:t;return n.error(`Failed to run oMo installer`,{error:t,output:d.slice(0,500)}),{installed:!1,version:null,error:`oh-my-opencode install failed: ${r}`}}}const _i=`opencode`,vi=`1.1.1`;function yi(){let e=Y.platform(),t=Y.arch(),n={darwin:`darwin`,linux:`linux`,win32:`windows`},r={x64:`x64`,arm64:`arm64`},i=e===`win32`||e===`darwin`?`.zip`:`.tar.gz`;return{os:n[e]??`linux`,arch:r[t]??`x64`,ext:i}}function bi(e,t){return`https://github.com/anomalyco/opencode/releases/download/${e.startsWith(`v`)?e:`v${e}`}/${`opencode-${t.os}-${t.arch}${t.ext}`}`}async function xi(e,t,n,r){if(B.platform===`win32`)return!0;try{let{stdout:i}=await r.getExecOutput(`file`,[e],{silent:!0}),a=(t===`.zip`?[`Zip archive`,`ZIP`]:[`gzip`,`tar`,`compressed`]).some(e=>i.includes(e));return a||n.warning(`Download validation failed`,{output:i.trim()}),a}catch{return n.debug(`Could not validate download (file command unavailable)`),!0}}async function Si(e,t,n,r,i=vi){let a=yi(),o=n.find(_i,e,a.arch);if(o.length>0)return t.info(`OpenCode found in cache`,{version:e,path:o}),{path:o,version:e,cached:!0};try{return await Ci(e,a,t,n,r)}catch(n){t.warning(`Primary version install failed, trying fallback`,{requestedVersion:e,fallbackVersion:i,error:P(n)})}if(e!==i)try{let e=await Ci(i,a,t,n,r);return t.info(`Installed fallback version`,{version:i}),e}catch(t){throw Error(`Failed to install OpenCode (tried ${e} and ${i}): ${P(t)}`)}throw Error(`Failed to install OpenCode version ${e}`)}async function Ci(e,t,n,r,i){n.info(`Downloading OpenCode`,{version:e});let a=bi(e,t),o=await r.downloadTool(a);if(!await xi(o,t.ext,n,i))throw Error(`Downloaded archive appears corrupted`);n.info(`Extracting OpenCode`);let s=t.ext===`.zip`?await r.extractZip(o):await r.extractTar(o);n.info(`Caching OpenCode`);let c=await r.cacheDir(s,_i,e,t.arch);return n.info(`OpenCode installed`,{version:e,path:c}),{path:c,version:e,cached:!1}}async function wi(e){let t=await fetch(`https://api.github.com/repos/anomalyco/opencode/releases/latest`);if(!t.ok)throw Error(`Failed to fetch latest OpenCode version: ${t.statusText}`);let n=(await t.json()).tag_name.replace(/^v/,``);return e.info(`Latest OpenCode version`,{version:n}),n}const Ti=[`claude`,`claude-max20`,`copilot`,`gemini`,`openai`,`opencode-zen`,`zai-coding-plan`];function Ei(e){let t=e.split(`,`).map(e=>e.trim().toLowerCase()).filter(e=>e.length>0),n=`no`,r=`no`,i=`no`,a=`no`,o=`no`,s=`no`;for(let e of t)if(Ti.includes(e))switch(e){case`claude`:n=`yes`;break;case`claude-max20`:n=`max20`;break;case`copilot`:r=`yes`;break;case`gemini`:i=`yes`;break;case`openai`:a=`yes`;break;case`opencode-zen`:o=`yes`;break;case`zai-coding-plan`:s=`yes`;break}return{claude:n,copilot:r,gemini:i,openai:a,opencodeZen:o,zaiCodingPlan:s}}function Di(){return{find:si.find,downloadTool:si.downloadTool,extractTar:si.extractTar,extractZip:si.extractZip,cacheDir:si.cacheDir}}function Oi(){return{exec:l,getExecOutput:u}}function ki(){return{opencodeVersion:r(`opencode-version`)||`latest`,authJson:r(`auth-json`,{required:!0}),appId:r(`app-id`)||null,privateKey:r(`private-key`)||null,opencodeConfig:r(`opencode-config`)||null}}async function Ai(){let t=Date.now(),n=S({component:`setup`}),a=Di(),o=Oi();try{let s=ki(),c=r(`github-token`,{required:!0});n.info(`Starting setup`,{version:s.opencodeVersion});let l;try{l=ci(s.authJson)}catch(t){return e(`Invalid auth-json: ${P(t)}`),null}let u=s.opencodeVersion;if(u===`latest`)try{u=await wi(n)}catch(e){n.warning(`Failed to get latest version, using fallback`,{error:P(e)}),u=vi}let d;try{d=await Si(u,n,a,o)}catch(t){return e(`Failed to install OpenCode: ${P(t)}`),null}p(d.path),C(`opencode-path`,d.path),C(`opencode-version`,d.version),n.info(`OpenCode installed`,{version:d.version,cached:d.cached});let m=r(`omo-providers`).trim(),g=Ei(m.length>0?m:M),_=await gi({logger:n,execAdapter:o},g);if(_.installed)n.info(`oMo installed`,{version:_.version});else return e(`oMo installation failed: ${_.error??`unknown error`}`),null;let v=await pi(mn(c),null,c,n);i(`GH_TOKEN`,c),n.info(`GitHub CLI configured`),await mi(v.botLogin?.replace(/\[bot\]$/,``)??null,null,n,o),n.info(`Git identity configured`,{user:v.botLogin??`fro-bot[bot]`});let y=z(f(),`opencode`),b=await li(l,y,n);C(`auth-json-path`,b),n.info(`auth.json populated`,{path:b});let x=B.env.GITHUB_REPOSITORY??`unknown/unknown`,S=B.env.GITHUB_REF_NAME??`main`,w=F(),T=h({agentIdentity:`github`,repo:x,ref:S,os:w}),E=O({agentIdentity:`github`,repo:x,ref:S,os:w}),D=`miss`;try{let e=await A([y],T,[...E]);e==null?n.info(`No cache found`):(D=`hit`,n.info(`Cache restored`,{key:e}))}catch(e){D=`corrupted`,n.warning(`Cache restore failed`,{error:P(e)})}C(`cache-status`,D),C(`storage-path`,y);let k=Date.now()-t,ee={opencodePath:d.path,opencodeVersion:d.version,ghAuthenticated:v.authenticated,omoInstalled:_.installed,omoError:_.error,cacheStatus:D,duration:k};return n.info(`Setup complete`,{duration:k}),ee}catch(t){let r=P(t);return n.error(`Setup failed`,{error:r}),e(r),null}}function ji(e){if(typeof e==`object`&&e&&`action`in e){let t=e.action;return typeof t==`string`?t:``}return``}function Mi(e,t){let n=ji(e.raw.payload);switch(e.eventType){case`issue_comment`:return{directive:`Respond to the comment above.`,appendMode:!0};case`discussion_comment`:return{directive:`Respond to the discussion comment above.`,appendMode:!0};case`issues`:return n===`opened`?{directive:`Triage this issue: summarize, reproduce if possible, propose next steps.`,appendMode:!0}:{directive:`Respond to the mention in this issue.`,appendMode:!0};case`pull_request`:return{directive:`Review this pull request for code quality, potential bugs, and improvements.`,appendMode:!0};case`pull_request_review_comment`:return{directive:Ni(e),appendMode:!0};case`schedule`:case`workflow_dispatch`:return{directive:t??``,appendMode:!1};default:return{directive:`Execute the requested operation.`,appendMode:!0}}}function Ni(e){let t=e.target,n=[`Respond to the review comment.`,``];return t?.path!=null&&n.push(`**File:** \`${t.path}\``),t?.line!=null&&n.push(`**Line:** ${t.line}`),t?.commitId!=null&&n.push(`**Commit:** \`${t.commitId}\``),t?.diffHunk!=null&&t.diffHunk.length>0&&n.push(``,`**Diff Context:**`,"```diff",t.diffHunk,"```"),n.join(`
`)}function Pi(e,t){let{directive:n,appendMode:r}=Mi(e,t),i=[`## Task`,``];return r?(i.push(n),t!=null&&t.trim().length>0&&i.push(``,`**Additional Instructions:**`,t.trim())):i.push(n),i.push(``),i.join(`
`)}function Fi(e,t){let{context:n,customPrompt:r,cacheStatus:i,sessionContext:a}=e,o=[];if(o.push(`# Agent Context

You are the Fro Bot Agent running in GitHub Actions.
`),r!=null&&r.trim().length>0&&e.triggerContext==null&&o.push(`
${r.trim()}

`),e.triggerContext==null?n.commentBody==null?o.push(`## Task

Execute the requested operation for repository ${n.repo}. Follow all instructions and requirements listed in this prompt.
`):o.push(`## Task

Respond to the trigger comment above. Follow all instructions and requirements listed in this prompt.
`):o.push(Pi(e.triggerContext,r)),o.push(`
## Environment
- **Repository:** ${n.repo}
- **Branch/Ref:** ${n.ref}
- **Event:** ${n.eventName}
- **Actor:** ${n.actor}
- **Run ID:** ${n.runId}
- **Cache Status:** ${i}
`),n.issueNumber!=null){let e=n.issueType===`pr`?`Pull Request`:`Issue`;o.push(`## ${e} Context
- **Number:** #${n.issueNumber}
- **Title:** ${n.issueTitle??`N/A`}
- **Type:** ${n.issueType??`unknown`}
`)}n.commentBody!=null&&o.push(`## Trigger Comment
**Author:** ${n.commentAuthor??`unknown`}

\`\`\`
${n.commentBody}
\`\`\`
`),a!=null&&o.push(Ii(a)),n.diffContext!=null&&o.push(Li(n.diffContext)),n.hydratedContext!=null&&o.push(le(n.hydratedContext)),o.push(`## Session Management (REQUIRED)

Before investigating any issue:
1. Use \`session_search\` to find relevant prior sessions for this repository
2. Use \`session_read\` to review prior work if found
3. Avoid repeating investigation already completed in previous sessions

Before completing:
1. Ensure your session contains a summary of work done
2. Include key decisions, findings, and outcomes
3. This summary will be searchable in future agent runs
`);let s=n.issueNumber??`<number>`;o.push(`## GitHub Operations (Use gh CLI)

The \`gh\` CLI is pre-authenticated. Use it for all GitHub operations:

### Commenting
\`\`\`bash
# Comment on issue
gh issue comment ${s} --body "Your message"

# Comment on PR
gh pr comment ${s} --body "Your message"
\`\`\`

### Creating PRs
\`\`\`bash
# Create a new PR
gh pr create --title "feat(scope): description" --body "Details..." --base ${n.defaultBranch} --head feature-branch
\`\`\`

### Pushing Commits
\`\`\`bash
# Commit and push changes
git add .
git commit -m "type(scope): description"
git push origin HEAD
\`\`\`

### API Calls
\`\`\`bash
# Query the GitHub API
gh api repos/${n.repo}/issues --jq '.[].title'
gh api repos/${n.repo}/pulls/${s}/files --jq '.[].filename'
\`\`\`
`),o.push(`## Run Summary (REQUIRED)

Every comment you post MUST include a collapsed details block at the end:

\`\`\`markdown
<details>
<summary>Run Summary</summary>

| Field | Value |
|-------|-------|
| Event | ${n.eventName} |
| Repository | ${n.repo} |
| Run ID | ${n.runId} |
| Cache | ${i} |
| Session | ${e.sessionId??`<your_session_id>`} |

</details>
\`\`\`
`);let c=o.join(`
`);return t.debug(`Built agent prompt`,{length:c.length,hasCustom:r!=null,hasSessionContext:a!=null}),c}function Ii(e){let t=[`## Prior Session Context`];if(e.recentSessions.length>0){t.push(``),t.push(`### Recent Sessions`),t.push(`| ID | Title | Updated | Messages | Agents |`),t.push(`|----|-------|---------|----------|--------|`);for(let n of e.recentSessions.slice(0,5)){let e=new Date(n.updatedAt).toISOString().split(`T`)[0],r=n.agents.join(`, `)||`N/A`,i=n.title||`Untitled`;t.push(`| ${n.id} | ${i} | ${e} | ${n.messageCount} | ${r} |`)}t.push(``),t.push("Use `session_read` to review any of these sessions in detail.")}if(e.priorWorkContext.length>0){t.push(``),t.push(`### Relevant Prior Work`),t.push(``),t.push(`The following sessions contain content related to this issue:`),t.push(``);for(let n of e.priorWorkContext.slice(0,3)){t.push(`**Session ${n.sessionId}:**`),t.push("```markdown");for(let e of n.matches.slice(0,2))t.push(`- ${e.excerpt}`);t.push("```"),t.push(``)}t.push("Use `session_read` to review full context before starting new investigation.")}return t.push(``),t.join(`
`)}function Li(e){let t=[`## Pull Request Diff Summary`];if(t.push(``),t.push(`- **Changed Files:** ${e.changedFiles}`),t.push(`- **Additions:** +${e.additions}`),t.push(`- **Deletions:** -${e.deletions}`),e.truncated&&t.push(`- **Note:** Diff was truncated due to size limits`),e.files.length>0){t.push(``),t.push(`### Changed Files`),t.push(`| File | Status | +/- |`),t.push(`|------|--------|-----|`);for(let n of e.files.slice(0,20))t.push(`| \`${n.filename}\` | ${n.status} | +${n.additions}/-${n.deletions} |`);e.files.length>20&&t.push(`| ... | | +${e.files.length-20} more files |`)}return t.push(``),t.join(`
`)}function Ri(e,t){t.debug(`Server event`,{eventType:e.type,properties:e.properties})}function zi(e,t,n,r,i){let a=Ur(t);if(e.includes(`gh pr create`)){let e=a.filter(e=>e.includes(`/pull/`)&&!e.includes(`#`));for(let t of e)n.includes(t)||n.push(t)}if(e.includes(`git commit`)){let e=Wr(t);for(let t of e)r.includes(t)||r.push(t)}(e.includes(`gh issue comment`)||e.includes(`gh pr comment`))&&a.some(e=>e.includes(`#issuecomment`))&&i()}async function Bi(e,t,n){let r=``,i=null,a=null,o=null,s=[],c=[],l=0,u=null;for await(let d of e)if(Ri(d,n),d.type===`message.part.updated`){let e=d.properties.part;if(e.sessionID!==t)continue;if(e.type===`text`&&`text`in e&&typeof e.text==`string`){r=e.text;let t=`time`in e?e.time?.end:void 0;t!=null&&Number.isFinite(t)&&(Ar(r),r=``)}else if(e.type===`tool`){let t=e.state;if(t.status===`completed`){let n=e.tool,r=t.input,i=t.title;kr(n,i),n.toLowerCase()===`bash`&&zi(String(r.command??r.cmd??``),String(t.output),s,c,()=>{l++})}}}else if(d.type===`message.updated`){let e=d.properties.info;e.sessionID===t&&e.role===`assistant`&&e.tokens!=null&&(i={input:e.tokens.input??0,output:e.tokens.output??0,reasoning:e.tokens.reasoning??0,cache:{read:e.tokens.cache?.read??0,write:e.tokens.cache?.write??0}},a=e.modelID??null,o=e.cost??null,n.debug(`Token usage received`,{tokens:i,model:a,cost:o}))}else if(d.type===`session.error`){if(d.properties.sessionID===t){let e=d.properties.error;n.error(`Session error`,{error:e});let t=typeof e==`string`?e:String(e);u=Ir(e)?Lr(t,a??void 0):(zr(t),Br(t));break}}else if(d.type===`session.idle`&&d.properties.sessionID===t){r.length>0&&(Ar(r),r=``);break}return r.length>0&&Ar(r),{tokens:i,model:a,cost:o,prsCreated:s,commitsCreated:c,commentsPosted:l,llmError:u}}const Vi=5e3;async function Hi(e,t,n,r,i,a,o){let s=(a?.agent??`Sisyphus`).toLowerCase(),c=await e.event.subscribe(),l=`controller`in c?c.controller??null:null,u={tokens:null,model:null,cost:null,prsCreated:[],commitsCreated:[],commentsPosted:0,llmError:null},d=Bi(c.stream,t,o).then(e=>{u=e}).catch(e=>{e instanceof Error&&e.name!==`AbortError`&&o.debug(`Event stream error`,{error:e.message})}),f=[{type:`text`,text:n}];r!=null&&r.length>0&&(f.push(...r),o.info(`Including file attachments in prompt`,{count:r.length}));let p={agent:s,model:a?.model==null?{providerID:T.providerID,modelID:T.modelID}:{providerID:a.model.providerID,modelID:a.model.modelID},parts:f};o.debug(`Sending prompt to OpenCode`,{sessionId:t});let m=await e.session.promptAsync({path:{id:t},body:p,query:{directory:i}});if(m.error!=null&&l!=null&&l.abort(),await d,l?.abort(),m.error!=null){o.error(`OpenCode prompt failed`,{error:String(m.error)});let e=Ir(m.error)?Lr(String(m.error),u.model??void 0):u.llmError;return{success:!1,error:String(m.error),llmError:e,shouldRetry:e!=null,eventStreamResult:u}}return{success:!0,error:null,llmError:null,shouldRetry:!1,eventStreamResult:u}}async function Ui(e,t,r){let i=Date.now(),a=new AbortController,o=r?.timeoutMs??k,s=null,c=!1,l=null;o>0&&(s=setTimeout(()=>{c=!0,t.warning(`Execution timeout reached`,{timeoutMs:o}),a.abort()},o)),t.info(`Executing OpenCode agent (SDK mode)`,{agent:r?.agent??`Sisyphus`,hasModelOverride:r?.model!=null,timeoutMs:o});try{let s=await wr({signal:a.signal}),{client:u}=s;l=s.server,t.debug(`OpenCode server started`,{url:l.url});let d=await u.session.create();if(d.data==null||d.error!=null){let e=d.error==null?`No data returned`:String(d.error);throw Error(`Failed to create session: ${e}`)}let f=d.data.id;t.debug(`Session created`,{sessionId:f});let p=Fi({...e,sessionId:f},t),h=m();if(n()){let e=I(),n=G.createHash(`sha256`).update(p).digest(`hex`),r=R.join(e,`prompt-${f}-${n.slice(0,8)}.txt`);try{await q.mkdir(e,{recursive:!0}),await q.writeFile(r,p,`utf8`),t.info(`Prompt artifact written`,{hash:n,path:r})}catch(e){t.warning(`Failed to write prompt artifact`,{error:e instanceof Error?e.message:String(e),path:r})}}let g=null,_=null,v=null,y=[],b=[],x=0,S=null,C=null;for(let n=1;n<=3;n++){if(c)return{success:!1,exitCode:130,duration:Date.now()-i,sessionId:f,error:`Execution timed out after ${o}ms`,tokenUsage:g,model:_,cost:v,prsCreated:y,commitsCreated:b,commentsPosted:x,llmError:C};let a=o-(Date.now()-i);if(o>0&&a<=Vi&&n>1){t.warning(`Insufficient time remaining for retry`,{remainingMs:a,requiredMs:Vi,attempt:n});break}let s=n===1?p:`The previous request was interrupted by a network error (fetch failed).
Please continue where you left off. If you were in the middle of a task, resume it.
If you had completed the task, confirm the completion.`,l=n===1?e.fileParts:void 0;t.debug(`Sending prompt`,{attempt:n,isRetry:n>1});try{let e=await Hi(u,f,s,l,h,r,t);if(e.success){let{eventStreamResult:r}=e;g=r.tokens,_=r.model,v=r.cost,y=[...r.prsCreated],b=[...r.commitsCreated],x=r.commentsPosted;let a=Date.now()-i;return t.info(`OpenCode execution completed`,{sessionId:f,durationMs:a,attempts:n}),{success:!0,exitCode:0,duration:a,sessionId:f,error:null,tokenUsage:g,model:_,cost:v,prsCreated:y,commitsCreated:b,commentsPosted:x,llmError:null}}if(S=e.error,C=e.llmError,!e.shouldRetry||n>=3){e.shouldRetry&&n>=3&&t.warning(`LLM fetch error: max retries exhausted`,{attempts:n,error:e.error});break}t.warning(`LLM fetch error detected, retrying with continuation prompt`,{attempt:n,maxAttempts:3,error:e.error,delayMs:Vi,sessionId:f}),await Tr(Vi)}catch(e){let r=P(e);t.error(`Prompt attempt failed with exception`,{attempt:n,error:r}),S=r;let i=Ir(e)?Lr(r):null;if(C=i,i==null||n>=3){i!=null&&n>=3&&t.warning(`LLM fetch error: max retries exhausted`,{attempts:n,error:r});break}t.warning(`LLM fetch error detected (exception), retrying with continuation prompt`,{attempt:n,maxAttempts:3,error:r,delayMs:Vi,sessionId:f}),await Tr(Vi)}}return{success:!1,exitCode:1,duration:Date.now()-i,sessionId:f,error:S??`Unknown error`,tokenUsage:g,model:_,cost:v,prsCreated:y,commitsCreated:b,commentsPosted:x,llmError:C}}catch(e){let n=Date.now()-i,r=P(e);return t.error(`OpenCode execution failed`,{error:r,durationMs:n}),{success:!1,exitCode:1,duration:n,sessionId:null,error:r,tokenUsage:null,model:null,cost:null,prsCreated:[],commitsCreated:[],commentsPosted:0,llmError:Ir(e)?Lr(r):null}}finally{s!=null&&clearTimeout(s),a.abort(),l?.close()}}async function Wi(e,t){let n=e??`opencode`;try{let e=``;await l(n,[`--version`],{listeners:{stdout:t=>{e+=t.toString()}},silent:!0});let r=/(\d+\.\d+\.\d+)/.exec(e)?.[1]??null;return t.debug(`OpenCode version verified`,{version:r}),{available:!0,version:r}}catch{return t.warning(`OpenCode not available`),{available:!1,version:null}}}async function Gi(e){let{logger:t,opencodeVersion:n}=e,r=B.env.OPENCODE_PATH??null,i=await Wi(r,t);if(i.available&&i.version!=null)return t.info(`OpenCode already available`,{version:i.version}),{path:r??`opencode`,version:i.version,didSetup:!1};t.info(`OpenCode not found, running auto-setup`,{requestedVersion:n});let a=await Ai();if(a==null)throw Error(`Auto-setup failed: runSetup returned null`);return p(a.opencodePath),B.env.OPENCODE_PATH=a.opencodePath,t.info(`Auto-setup completed`,{version:a.opencodeVersion,path:a.opencodePath}),{path:a.opencodePath,version:a.opencodeVersion,didSetup:!0}}const Ki=`agent: working`;async function qi(e,t,n){return t.commentId==null?(n.debug(`No comment ID, skipping eyes reaction`),!1):await ge(e,t.repo,t.commentId,`eyes`,n)==null?!1:(n.info(`Added eyes reaction`,{commentId:t.commentId}),!0)}async function Ji(e,t,n){return t.issueNumber==null?(n.debug(`No issue number, skipping working label`),!1):await ye(e,t.repo,Ki,`fcf2e1`,`Agent is currently working on this`,n)&&await be(e,t.repo,t.issueNumber,[Ki],n)?(n.info(`Added working label`,{issueNumber:t.issueNumber}),!0):!1}async function Yi(e,t,n){await Promise.all([qi(e,t,n),Ji(e,t,n)])}async function Xi(e,t,n){if(t.commentId==null||t.botLogin==null)return;let r=(await _e(e,t.repo,t.commentId,n)).find(e=>e.content===`eyes`&&e.userLogin===t.botLogin);r!=null&&await ve(e,t.repo,t.commentId,r.id,n)}async function Zi(e,t,n,r){t.commentId!=null&&await ge(e,t.repo,t.commentId,n,r)}async function Qi(e,t,n){if(t.commentId==null||t.botLogin==null){n.debug(`Missing comment ID or bot login, skipping reaction update`);return}try{await Xi(e,t,n),await Zi(e,t,`hooray`,n),n.info(`Updated reaction to success indicator`,{commentId:t.commentId,reaction:`hooray`})}catch(e){n.warning(`Failed to update reaction (non-fatal)`,{error:P(e)})}}async function $i(e,t,n){if(t.commentId==null||t.botLogin==null){n.debug(`Missing comment ID or bot login, skipping reaction update`);return}try{await Xi(e,t,n),await Zi(e,t,`confused`,n),n.info(`Updated reaction to confused`,{commentId:t.commentId})}catch(e){n.warning(`Failed to update failure reaction (non-fatal)`,{error:P(e)})}}async function ea(e,t,n){if(t.issueNumber==null){n.debug(`No issue number, skipping label removal`);return}await xe(e,t.repo,t.issueNumber,Ki,n)&&n.info(`Removed working label`,{issueNumber:t.issueNumber})}async function ta(e,t,n,r){n?await Qi(e,t,r):await $i(e,t,r),await ea(e,t,r)}const na={markdownImage:/!\[([^\]]*)\]\((https:\/\/github\.com\/user-attachments\/assets\/[^)]+)\)/gi,markdownLink:/\[([^\]]+)\]\((https:\/\/github\.com\/user-attachments\/files\/[^)]+)\)/gi,htmlImage:/<img[^>]*src=["'](https:\/\/github\.com\/user-attachments\/assets\/[^"']+)["'][^>]*>/gi};function ra(e,t,n){e.lastIndex=0;let r=e.exec(t);for(;r!=null;)n(r),r=e.exec(t);e.lastIndex=0}function ia(e){let t=[],n=new Set;return ra(na.markdownImage,e,e=>{let r=e[2],i=e[1],a=e[0];r!=null&&i!=null&&!n.has(r)&&Hr(r)&&(n.add(r),t.push({url:r,originalMarkdown:a,altText:i,type:`image`}))}),ra(na.markdownLink,e,e=>{let r=e[2],i=e[1],a=e[0];r!=null&&i!=null&&!n.has(r)&&Hr(r)&&(n.add(r),t.push({url:r,originalMarkdown:a,altText:i,type:`file`}))}),ra(na.htmlImage,e,e=>{let r=e[1],i=e[0];if(r!=null&&!n.has(r)&&Hr(r)){n.add(r);let e=/alt=["']([^"']*)["']/i.exec(i);t.push({url:r,originalMarkdown:i,altText:e?.[1]??``,type:`image`})}}),na.htmlImage.lastIndex=0,t}function aa(e,t,n){try{let r=new URL(e).pathname.split(`/`).at(-1);if(r!=null&&/\.[a-z0-9]+$/i.test(r))return r;if(t.trim().length>0){let e=t.replaceAll(/[^\w.-]/g,`_`).slice(0,50);return e.trim().length>0?e:`attachment_${n+1}`}return`attachment_${n+1}`}catch{return`attachment_${n+1}`}}const oa={maxFiles:5,maxFileSizeBytes:5*1024*1024,maxTotalSizeBytes:15*1024*1024,allowedMimeTypes:[`image/png`,`image/jpeg`,`image/gif`,`image/webp`,`image/svg+xml`,`text/plain`,`text/markdown`,`text/csv`,`application/json`,`application/pdf`]},sa=[`github.com`,`githubusercontent.com`];async function ca(e,t,n,r,i){i.debug(`Downloading attachment`,{url:e.url});try{let a=await fetch(e.url,{headers:{Authorization:`Bearer ${n}`,Accept:`*/*`,"User-Agent":`fro-bot-agent`},redirect:`manual`}),o=a;if(a.status>=300&&a.status<400){let t=a.headers.get(`location`);if(t==null)return i.warning(`Redirect without location`,{url:e.url}),null;let n=new URL(t);if(!sa.some(e=>n.hostname===e||n.hostname.endsWith(`.${e}`)))return i.warning(`Redirect to non-GitHub host blocked`,{url:e.url,redirectTo:n.hostname}),null;o=await fetch(t,{headers:{Accept:`*/*`,"User-Agent":`fro-bot-agent`},redirect:`follow`})}if(!o.ok)return i.warning(`Attachment download failed`,{url:e.url,status:o.status}),null;let s=o.headers.get(`content-length`);if(s!=null){let t=Number.parseInt(s,10);if(t>r.maxFileSizeBytes)return i.warning(`Attachment exceeds size limit (Content-Length)`,{url:e.url,size:t,limit:r.maxFileSizeBytes}),null}let c=W.from(await o.arrayBuffer());if(c.length>r.maxFileSizeBytes)return i.warning(`Attachment exceeds size limit`,{url:e.url,size:c.length,limit:r.maxFileSizeBytes}),null;let l=o.headers.get(`content-type`)??`application/octet-stream`,u=aa(e.url,e.altText,t),d=l.split(`;`)[0],f=d==null?`application/octet-stream`:d.trim(),p=await q.mkdtemp(R.join(J.tmpdir(),`fro-bot-attachments-`)),m=u.trim().length>0?u:`attachment_${t+1}`,h=R.join(p,m);return await q.writeFile(h,c),i.debug(`Attachment downloaded`,{filename:u,mime:f,sizeBytes:c.length,tempPath:h}),{url:e.url,filename:u,mime:f,sizeBytes:c.length,tempPath:h}}catch(t){return i.warning(`Attachment download error`,{url:e.url,error:P(t)}),null}}async function la(e,t,n=oa,r){return Promise.all(e.map(async(e,i)=>ca(e,i,t,n,r)))}async function ua(e,t){for(let n of e)try{await q.unlink(n);let e=R.dirname(n);await q.rmdir(e).catch(()=>{})}catch(e){t.debug(`Failed to cleanup temp file`,{path:n,error:P(e)})}}function da(e){return e.map(e=>({type:`file`,mime:e.mime,url:K(e.tempPath).toString(),filename:e.filename}))}function fa(e,t,n){let r=e,i=new Set(n.map(e=>e.filename));for(let e of t){let t=n.find(e=>i.has(e.filename));t!=null&&(r=r.replace(e.originalMarkdown,`@${t.filename}`))}return r}function pa(e,t,n,r){return{processed:n,skipped:r,modifiedBody:fa(e,t,n),fileParts:da(n),tempFiles:n.map(e=>e.tempPath)}}function ma(e){if(e<0||!Number.isFinite(e))throw Error(`Invalid bytes value: ${e}`);return e<1024?`${e}B`:e<1024*1024?`${(e/1024).toFixed(1)}KB`:`${(e/(1024*1024)).toFixed(1)}MB`}function ha(e,t=oa,n){let r=[],i=[],a=0;for(let o of e)if(o!=null){if(r.length>=t.maxFiles){i.push({url:o.url,reason:`Exceeds max file count (${t.maxFiles})`}),n.debug(`Attachment skipped: max count`,{url:o.url});continue}if(o.sizeBytes>t.maxFileSizeBytes){i.push({url:o.url,reason:`File too large (${ma(o.sizeBytes)} > ${ma(t.maxFileSizeBytes)})`}),n.debug(`Attachment skipped: too large`,{url:o.url,size:o.sizeBytes});continue}if(a+o.sizeBytes>t.maxTotalSizeBytes){i.push({url:o.url,reason:`Would exceed total size limit (${ma(t.maxTotalSizeBytes)})`}),n.debug(`Attachment skipped: total size exceeded`,{url:o.url});continue}if(!ga(o.mime,t.allowedMimeTypes)){i.push({url:o.url,reason:`MIME type not allowed: ${o.mime}`}),n.debug(`Attachment skipped: MIME type`,{url:o.url,mime:o.mime});continue}a+=o.sizeBytes,r.push({filename:o.filename,mime:o.mime,sizeBytes:o.sizeBytes,tempPath:o.tempPath}),n.info(`Attachment validated`,{filename:o.filename,mime:o.mime,sizeBytes:o.sizeBytes})}return{validated:r,skipped:i}}function ga(e,t){let[n]=e.split(`/`);for(let r of t)if(r===e||r.endsWith(`/*`)&&n!=null&&n===r.slice(0,-2))return!0;return!1}const _a=`<!-- fro-bot-agent -->`;function va(e,t){return t==null?!1:e===t||e===`${t}[bot]`}function ya(e,t,n){return va(e,n)&&t.includes(_a)}async function ba(e,t,n){try{if(t.type===`pr`){let{data:n}=await e.rest.pulls.get({owner:t.owner,repo:t.repo,pull_number:t.number});return{title:n.title,body:n.body??``,author:n.user?.login??`unknown`}}let{data:n}=await e.rest.issues.get({owner:t.owner,repo:t.repo,issue_number:t.number});return{title:n.title,body:n.body??``,author:n.user?.login??`unknown`}}catch(e){return n.warning(`Failed to fetch issue/PR`,{target:t,error:P(e)}),null}}async function xa(e,t,n,r){let i=[],a=1;for(;a<=50;)try{let{data:r}=await e.rest.issues.listComments({owner:t.owner,repo:t.repo,issue_number:t.number,per_page:100,page:a});if(r.length===0)break;for(let e of r){let t=e.user?.login??`unknown`;i.push({id:e.id,body:e.body??``,author:t,authorAssociation:e.author_association??`NONE`,createdAt:e.created_at,updatedAt:e.updated_at,isBot:ya(t,e.body??``,n)})}if(r.length<100)break;a++}catch(e){r.warning(`Failed to fetch comments page`,{target:t,page:a,error:P(e)});break}return i}async function Sa(e,t,n,r){try{let i=[],a=null,o=null,s=``,c=``,l=`unknown`,u=0;for(;u<50;){let d=(await e.graphql(`
  query GetDiscussion($owner: String!, $repo: String!, $number: Int!, $after: String) {
    repository(owner: $owner, name: $repo) {
      discussion(number: $number) {
        id
        title
        body
        author { login }
        comments(first: 100, after: $after) {
          nodes {
            id
            body
            author { login }
            createdAt
            updatedAt
          }
          pageInfo {
            hasNextPage
            endCursor
          }
        }
      }
    }
  }
`,{owner:t.owner,repo:t.repo,number:t.number,after:a})).repository.discussion;if(d==null)return r.debug(`Discussion not found`,{target:t}),null;u===0&&(o=d.id,s=d.title,c=d.body,l=d.author?.login??`unknown`);for(let e of d.comments.nodes){let t=e.author?.login??`unknown`;i.push({id:e.id,body:e.body,author:t,authorAssociation:`NONE`,createdAt:e.createdAt,updatedAt:e.updatedAt,isBot:ya(t,e.body,n)})}if(!d.comments.pageInfo.hasNextPage)break;a=d.comments.pageInfo.endCursor,u++}return{type:`discussion`,number:t.number,title:s,body:c,author:l,comments:i,discussionId:o??void 0}}catch(e){return r.warning(`Failed to fetch discussion`,{target:t,error:P(e)}),null}}async function Ca(e,t,n,r){if(t.type===`discussion`)return Sa(e,t,n,r);let i=await ba(e,t,r);if(i==null)return null;let a=await xa(e,t,n,r);return{type:t.type,number:t.number,title:i.title,body:i.body,author:i.author,comments:a}}function wa(e,t){let n=e.comments.filter(e=>va(e.author,t)&&e.body.includes(_a));return n.length===0?null:n.at(-1)??null}async function Ta(e,t,n,r){try{let{data:i}=await e.rest.issues.createComment({owner:t.owner,repo:t.repo,issue_number:t.number,body:n});return r.debug(`Created issue comment`,{commentId:i.id,target:t}),{commentId:i.id,created:!0,updated:!1,url:i.html_url}}catch(e){return r.warning(`Failed to create issue comment`,{target:t,error:P(e)}),null}}async function Ea(e,t,n,r,i){try{let{data:a}=await e.rest.issues.updateComment({owner:t.owner,repo:t.repo,comment_id:n,body:r});return i.debug(`Updated issue comment`,{commentId:a.id,target:t}),{commentId:a.id,created:!1,updated:!0,url:a.html_url}}catch(e){return i.warning(`Failed to update issue comment`,{target:t,commentId:n,error:P(e)}),null}}async function Da(e,t,n,r){try{let i=(await e.graphql(`
  query GetDiscussionId($owner: String!, $repo: String!, $number: Int!) {
    repository(owner: $owner, name: $repo) {
      discussion(number: $number) {
        id
        title
        body
        author { login }
        comments(first: 100) {
          nodes {
            id
            body
            author { login }
            createdAt
            updatedAt
          }
          pageInfo { hasNextPage endCursor }
        }
      }
    }
  }
`,{owner:t.owner,repo:t.repo,number:t.number})).repository.discussion;if(i==null)return r.warning(`Discussion not found`,{target:t}),null;if(n.updateExisting===!0&&n.botLogin!=null){let i=await Ca(e,t,n.botLogin,r);if(i!=null){let t=wa(i,n.botLogin);if(t!=null&&typeof t.id==`string`){let i=await e.graphql(`
  mutation UpdateDiscussionComment($commentId: ID!, $body: String!) {
    updateDiscussionComment(input: {commentId: $commentId, body: $body}) {
      comment { id url }
    }
  }
`,{commentId:t.id,body:n.body});return r.debug(`Updated discussion comment`,{commentId:t.id}),{commentId:i.updateDiscussionComment.comment.id,created:!1,updated:!0,url:i.updateDiscussionComment.comment.url}}}}let a=await e.graphql(`
  mutation AddDiscussionComment($discussionId: ID!, $body: String!) {
    addDiscussionComment(input: {discussionId: $discussionId, body: $body}) {
      comment { id url }
    }
  }
`,{discussionId:i.id,body:n.body});return r.debug(`Created discussion comment`,{discussionId:i.id}),{commentId:a.addDiscussionComment.comment.id,created:!0,updated:!1,url:a.addDiscussionComment.comment.url}}catch(e){return r.warning(`Failed to post discussion comment`,{target:t,error:P(e)}),null}}async function Oa(e,t,n,r){if(t.type===`discussion`)return Da(e,t,n,r);if(n.updateExisting===!0&&n.botLogin!=null){let i=await Ca(e,t,n.botLogin,r);if(i!=null){let a=wa(i,n.botLogin);if(a!=null&&typeof a.id==`number`)return Ea(e,t,a.id,n.body,r)}}return Ta(e,t,n.body,r)}function ka(e,t){try{JSON.parse(e)}catch{throw Error(`${t} must be valid JSON`)}}function Aa(e,t){let n=e.trim();if(!/^\d+$/.test(n))throw Error(`${t} must be a positive integer, received: ${e}`);let r=Number.parseInt(n,10);if(r===0)throw Error(`${t} must be a positive integer, received: ${e}`);return r}function ja(e){return{success:!0,data:e}}function Ma(e){return{success:!1,error:e}}const Na=[`OWNER`,`MEMBER`,`COLLABORATOR`];function Pa(e){let t=e.trim(),n=t.indexOf(`/`);if(n===-1)throw Error(`Invalid model format: "${e}". Expected "provider/model" (e.g., "anthropic/claude-sonnet-4-20250514")`);let r=t.slice(0,n).trim(),i=t.slice(n+1).trim();if(r.length===0)throw Error(`Invalid model format: "${e}". Provider cannot be empty.`);if(i.length===0)throw Error(`Invalid model format: "${e}". Model ID cannot be empty.`);return{providerID:r,modelID:i}}function Fa(e){let t=e.trim();if(!/^\d+$/.test(t))throw Error(`timeout must be a non-negative integer, received: ${e}`);let n=Number.parseInt(t,10);if(Number.isNaN(n)||n<0)throw Error(`timeout must be a non-negative integer, received: ${e}`);return n}const Ia=[`claude`,`claude-max20`,`copilot`,`gemini`,`openai`,`opencode-zen`,`zai-coding-plan`];function La(e){let t=e.split(`,`).map(e=>e.trim().toLowerCase()).filter(e=>e.length>0),n=`no`,r=`no`,i=`no`,a=`no`,o=`no`,s=`no`;for(let e of t){if(!Ia.includes(e))throw Error(`Invalid omo-providers value: "${e}". Valid values: ${Ia.join(`, `)}`);switch(e){case`claude`:n=`yes`;break;case`claude-max20`:n=`max20`;break;case`copilot`:r=`yes`;break;case`gemini`:i=`yes`;break;case`openai`:a=`yes`;break;case`opencode-zen`:o=`yes`;break;case`zai-coding-plan`:s=`yes`;break}}return{claude:n,copilot:r,gemini:i,openai:a,opencodeZen:o,zaiCodingPlan:s}}function Ra(){try{let e=r(`github-token`,{required:!0}).trim();if(e.length===0)return Ma(Error(`github-token is required but was not provided`));let t=r(`auth-json`,{required:!0}).trim();if(t.length===0)return Ma(Error(`auth-json is required but was not provided`));ka(t,`auth-json`);let n=r(`prompt`).trim(),i=n.length>0?n:null,a=r(`session-retention`).trim(),o=a.length>0?Aa(a,`session-retention`):y,s=r(`s3-backup`).trim().toLowerCase()===`true`,c=r(`s3-bucket`).trim(),l=c.length>0?c:null,u=r(`aws-region`).trim(),d=u.length>0?u:null,f=r(`agent`).trim(),p=f.length>0?f:_,m=r(`model`).trim(),h=m.length>0?Pa(m):null,g=r(`timeout`).trim(),b=g.length>0?Fa(g):k,x=r(`opencode-version`).trim(),S=x.length>0?x:v,C=r(`skip-cache`).trim().toLowerCase()===`true`,w=r(`omo-providers`).trim();return ja({githubToken:e,authJson:t,prompt:i,sessionRetention:o,s3Backup:s,s3Bucket:l,awsRegion:d,agent:p,model:h,timeoutMs:b,opencodeVersion:S,skipCache:C,omoProviders:La(w.length>0?w:M)})}catch(e){return Ma(e instanceof Error?e:Error(String(e)))}}function za(e){switch(e){case`hit`:return`✅ hit`;case`miss`:return`🆕 miss`;case`corrupted`:return`⚠️ corrupted (clean start)`}}function Ba(e){let t=Math.round(e/1e3);return t<60?`${t}s`:`${Math.floor(t/60)}m ${t%60}s`}async function Va(e,t){let{eventType:n,repo:r,ref:i,runId:o,runUrl:s,metrics:l,agent:u}=e;try{if(a.addHeading(`Fro Bot Agent Run`,2).addTable([[{data:`Field`,header:!0},{data:`Value`,header:!0}],[`Event`,n],[`Repository`,r],[`Ref`,i],[`Run ID`,`[${o}](${s})`],[`Agent`,u],[`Cache Status`,za(l.cacheStatus)],[`Duration`,l.duration==null?`N/A`:Ba(l.duration)]]),(l.sessionsUsed.length>0||l.sessionsCreated.length>0)&&(a.addHeading(`Sessions`,3),l.sessionsUsed.length>0&&a.addRaw(`**Used:** ${l.sessionsUsed.join(`, `)}\n`),l.sessionsCreated.length>0&&a.addRaw(`**Created:** ${l.sessionsCreated.join(`, `)}\n`)),l.tokenUsage!=null&&(a.addHeading(`Token Usage`,3),a.addTable([[{data:`Metric`,header:!0},{data:`Count`,header:!0}],[`Input`,l.tokenUsage.input.toLocaleString()],[`Output`,l.tokenUsage.output.toLocaleString()],[`Reasoning`,l.tokenUsage.reasoning.toLocaleString()],[`Cache Read`,l.tokenUsage.cache.read.toLocaleString()],[`Cache Write`,l.tokenUsage.cache.write.toLocaleString()]]),l.model!=null&&a.addRaw(`**Model:** ${l.model}\n`),l.cost!=null&&a.addRaw(`**Cost:** $${l.cost.toFixed(4)}\n`)),(l.prsCreated.length>0||l.commitsCreated.length>0||l.commentsPosted>0)&&(a.addHeading(`Created Artifacts`,3),l.prsCreated.length>0&&a.addList([...l.prsCreated]),l.commitsCreated.length>0&&a.addList(l.commitsCreated.map(e=>`Commit \`${e.slice(0,7)}\``)),l.commentsPosted>0&&a.addRaw(`**Comments Posted:** ${l.commentsPosted}\n`)),l.errors.length>0){a.addHeading(`Errors`,3);for(let e of l.errors){let t=e.recoverable?`🔄 Recovered`:`❌ Failed`;a.addRaw(`- **${e.type}** (${t}): ${e.message}\n`)}}await a.write(),t.debug(`Wrote job summary`)}catch(e){let n=P(e);t.warning(`Failed to write job summary`,{error:n}),c(`Failed to write job summary: ${n}`)}}function Ha(){let e=0,t=null,n=`miss`,r=[],i=[],a=[],o=[],s=0,c=null,l=null,u=null,d=[];return{start(){e=Date.now()},end(){t=Date.now()},setCacheStatus(e){n=e},addSessionUsed(e){r.includes(e)||r.push(e)},addSessionCreated(e){i.includes(e)||i.push(e)},addPRCreated(e){a.includes(e)||a.push(e)},addCommitCreated(e){o.includes(e)||o.push(e)},incrementComments(){s++},setTokenUsage(e,t,n){c=e,l=t,u=n},recordError(e,t,n){d.push({timestamp:new Date().toISOString(),type:e,message:t,recoverable:n})},getMetrics(){let f=t==null?Date.now()-e:t-e;return Object.freeze({startTime:e,endTime:t,duration:f,cacheStatus:n,sessionsUsed:Object.freeze([...r]),sessionsCreated:Object.freeze([...i]),prsCreated:Object.freeze([...a]),commitsCreated:Object.freeze([...o]),commentsPosted:s,tokenUsage:c,model:l,cost:u,errors:Object.freeze([...d])})}}}function Ua(e){C(`session-id`,e.sessionId??``),C(`cache-status`,e.cacheStatus),C(`duration`,e.duration)}function Wa(){let e=B.env.XDG_DATA_HOME??R.join(J.homedir(),`.local`,`share`);return R.join(e,`opencode`,`storage`)}async function Ga(e){try{let t=await q.readFile(e,`utf8`);return JSON.parse(t)}catch{return null}}async function Ka(e){try{let t=await q.readdir(e,{withFileTypes:!0}),n=[];for(let r of t)if(r.isFile()&&r.name.endsWith(`.json`)){let t=await Ga(R.join(e,r.name));t!=null&&n.push(t)}return n}catch{return[]}}async function qa(e){let t=Wa(),n=R.join(t,`project`);return e.debug(`Listing projects`,{projectDir:n}),Ka(n)}async function Ja(e,t){let n=await qa(t);for(let t of n)if(t.worktree===e)return t;return null}async function Ya(e,t){let n=Wa(),r=R.join(n,`session`,e);return t.debug(`Listing sessions for project`,{projectID:e,sessionDir:r}),Ka(r)}async function Xa(e,t){let n=Wa(),r=R.join(n,`message`,e);return t.debug(`Reading session messages`,{sessionID:e,messageDir:r}),[...await Ka(r)].sort((e,t)=>e.time.created-t.time.created)}async function Za(e,t){let n=Wa(),r=R.join(n,`part`,e);return t.debug(`Reading message parts`,{messageID:e,partDir:r}),Ka(r)}async function Qa(e){try{let t=await q.stat(e);return await q.unlink(e),t.size}catch{return 0}}async function $a(e){let t=0;try{let n=await q.readdir(e,{withFileTypes:!0});for(let r of n){let n=R.join(e,r.name);if(r.isDirectory())t+=await $a(n);else{let e=await q.stat(n);t+=e.size}}await q.rm(e,{recursive:!0,force:!0})}catch{}return t}async function eo(e,t,n){let r=Wa(),i=0,a=await Xa(t,n);for(let e of a){let t=R.join(r,`part`,e.id);i+=await $a(t)}let o=R.join(r,`message`,t);i+=await $a(o);let s=R.join(r,`session`,e,`${t}.json`);i+=await Qa(s);let c=R.join(r,`todo`,`${t}.json`);i+=await Qa(c);let l=R.join(r,`session_diff`,`${t}.json`);return i+=await Qa(l),n.debug(`Deleted session`,{sessionID:t,freedBytes:i}),i}async function to(e,t){let n=await qa(t),r=null;for(let i of n){let n=await Ya(i.id,t);for(let t of n)t.time.created<=e||(r==null||t.time.created>r.session.time.created)&&(r={projectID:i.id,session:t})}return r!=null&&t.debug(`Found latest session`,{sessionId:r.session.id,projectId:r.projectID,createdAt:r.session.time.created}),r}const no={maxSessions:50,maxAgeDays:30};async function ro(e,t,n){let{maxSessions:r,maxAgeDays:i}=t;n.info(`Starting session pruning`,{directory:e,maxSessions:r,maxAgeDays:i});let a=await Ja(e,n);if(a==null)return n.debug(`No project found for pruning`,{directory:e}),{prunedCount:0,prunedSessionIds:[],remainingCount:0,freedBytes:0};let o=await Ya(a.id,n),s=o.filter(e=>e.parentID==null);if(s.length===0)return{prunedCount:0,prunedSessionIds:[],remainingCount:0,freedBytes:0};let c=[...s].sort((e,t)=>t.time.updated-e.time.updated),l=new Date;l.setDate(l.getDate()-i);let u=l.getTime(),d=new Set;for(let e of c)e.time.updated>=u&&d.add(e.id);for(let e=0;e<Math.min(r,c.length);e++){let t=c[e];t!=null&&d.add(t.id)}let f=c.filter(e=>!d.has(e.id)),p=new Set;for(let e of f){p.add(e.id);for(let t of o)t.parentID===e.id&&p.add(t.id)}if(p.size===0)return n.info(`No sessions to prune`),{prunedCount:0,prunedSessionIds:[],remainingCount:s.length,freedBytes:0};let m=0,h=[];for(let e of p)try{let t=await eo(a.id,e,n);m+=t,h.push(e),n.debug(`Pruned session`,{sessionId:e,bytes:t})}catch(t){n.warning(`Failed to prune session`,{sessionId:e,error:P(t)})}let g=s.length-f.length;return n.info(`Session pruning complete`,{prunedCount:h.length,remainingCount:g,freedBytes:m}),{prunedCount:h.length,prunedSessionIds:h,remainingCount:g,freedBytes:m}}async function io(e,t,n){let{limit:r,fromDate:i,toDate:a}=t;n.debug(`Listing sessions`,{directory:e,limit:r});let o=await Ja(e,n);if(o==null)return n.debug(`No project found for directory`,{directory:e}),[];let s=[...(await Ya(o.id,n)).filter(e=>!(e.parentID!=null||i!=null&&e.time.created<i.getTime()||a!=null&&e.time.created>a.getTime()))].sort((e,t)=>t.time.updated-e.time.updated),c=[],l=r==null?s:s.slice(0,r);for(let e of l){let t=await Xa(e.id,n),r=ao(t);c.push({id:e.id,projectID:e.projectID,directory:e.directory,title:e.title,createdAt:e.time.created,updatedAt:e.time.updated,messageCount:t.length,agents:r,isChild:!1})}return n.info(`Listed sessions`,{count:c.length,directory:e}),c}function ao(e){let t=new Set;for(let n of e)n.agent!=null&&t.add(n.agent);return[...t]}async function oo(e,t,n,r){let{limit:i=20,caseSensitive:a=!1,sessionId:o}=n;r.debug(`Searching sessions`,{query:e,directory:t,limit:i,caseSensitive:a});let s=a?e:e.toLowerCase(),c=[],l=0;if(o!=null){let e=await so(o,s,a,r);return e.length>0&&c.push({sessionId:o,matches:e.slice(0,i)}),c}let u=await io(t,{},r);for(let e of u){if(l>=i)break;let t=await so(e.id,s,a,r);if(t.length>0){let n=i-l;c.push({sessionId:e.id,matches:t.slice(0,n)}),l+=Math.min(t.length,n)}}return r.info(`Session search complete`,{query:e,resultCount:c.length,totalMatches:l}),c}async function so(e,t,n,r){let i=await Xa(e,r),a=[];for(let e of i){let i=await Za(e.id,r);for(let r of i){let i=co(r);if(i==null)continue;let o=n?i:i.toLowerCase();if(o.includes(t)){let n=o.indexOf(t),s=Math.max(0,n-50),c=Math.min(i.length,n+t.length+50),l=i.slice(s,c);a.push({messageId:e.id,partId:r.id,excerpt:`...${l}...`,role:e.role,agent:e.agent})}}}return a}function co(e){switch(e.type){case`text`:return e.text;case`reasoning`:return e.reasoning;case`tool`:return e.state.status===`completed`?`${e.tool}: ${e.state.output}`:null;case`step-finish`:return null}}function lo(e){let t=``;for(let n=0;n<e;n++)t+=`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`.charAt(Math.floor(Math.random()*62));return t}function uo(e){let t=[`--- Fro Bot Run Summary ---`,`Event: ${e.eventType}`,`Repo: ${e.repo}`,`Ref: ${e.ref}`,`Run ID: ${e.runId}`,`Cache: ${e.cacheStatus}`,`Duration: ${e.duration}s`];return e.sessionIds.length>0&&t.push(`Sessions used: ${e.sessionIds.join(`, `)}`),e.createdPRs.length>0&&t.push(`PRs created: ${e.createdPRs.join(`, `)}`),e.createdCommits.length>0&&t.push(`Commits: ${e.createdCommits.join(`, `)}`),e.tokenUsage!=null&&t.push(`Tokens: ${e.tokenUsage.input} in / ${e.tokenUsage.output} out`),t.join(`
`)}async function fo(e,t,n){let r=Wa(),i=R.join(r,`message`,e),a=R.join(r,`part`),o=Date.now(),s=`msg_${o.toString(16)}${lo(14)}`,c=`prt_${o.toString(16)}${lo(14)}`,l={id:s,sessionID:e,role:`user`,time:{created:o},summary:{title:`GitHub Action Run Summary`,diffs:[]},agent:`fro-bot`,model:{providerID:`system`,modelID:`run-summary`}},u={id:c,sessionID:e,messageID:s,type:`text`,text:uo(t),time:{start:o,end:o}};try{await q.mkdir(i,{recursive:!0}),await q.mkdir(R.join(a,s),{recursive:!0});let t=R.join(i,`${s}.json`),r=R.join(a,s,`${c}.json`);await q.writeFile(t,JSON.stringify(l,null,2),`utf8`),await q.writeFile(r,JSON.stringify(u,null,2),`utf8`),n.info(`Session summary written`,{sessionId:e,messageId:s})}catch(t){n.warning(`Failed to write session summary`,{sessionId:e,error:P(t)})}}const po=/^[0-9a-f]{40}$/i;function mo(){return{exec:l,getExecOutput:u}}async function ho(e){let{workspacePath:t,logger:n,execAdapter:r=mo()}=e,i=R.join(t,`.git`),a=R.join(i,`opencode`);try{let e=(await q.readFile(a,`utf8`)).trim();if(e.length>0){if(po.test(e))return n.debug(`Project ID loaded from cache`,{projectId:e}),{projectId:e,source:`cached`};n.warning(`Invalid cached project ID format, regenerating`,{cachedId:e})}}catch(e){n.debug(`No cached project ID found`,{error:P(e)})}try{if((await q.stat(i)).isDirectory()===!1){let e=await q.readFile(i,`utf8`),n=/^gitdir: (.+)$/m.exec(e);if(n==null)return{projectId:null,source:`error`,error:`Invalid .git file format`};i=R.resolve(t,n[1]),a=R.join(i,`opencode`)}}catch{return{projectId:null,source:`error`,error:`Not a git repository`}}try{let{stdout:e,exitCode:i}=await r.getExecOutput(`git`,[`rev-list`,`--max-parents=0`,`--all`],{cwd:t,silent:!0});if(i!==0||e.trim().length===0)return{projectId:null,source:`error`,error:`No commits found in repository`};let o=e.trim().split(`
`).map(e=>e.trim()).filter(e=>e.length>0).sort();if(o.length===0)return{projectId:null,source:`error`,error:`No root commits found`};let s=o[0];try{await q.writeFile(a,s,`utf8`),n.info(`Project ID generated and cached`,{projectId:s,source:`generated`})}catch(e){n.warning(`Failed to cache project ID (continuing)`,{error:P(e)})}return{projectId:s,source:`generated`}}catch(e){return{projectId:null,source:`error`,error:P(e)}}}const go={login:null,requireMention:!0,allowedAssociations:Na,skipDraftPRs:!0,promptInput:null};function _o(e,t){return t.length===0?!1:new RegExp(String.raw`@${vo(t)}(?:\[bot\])?(?:$|[^\w])`,`i`).test(e)}function vo(e){return e.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`)}function yo(e,t){if(t.length===0)return null;let n=new RegExp(String.raw`@${vo(t)}(?:\[bot\])?\s*(.*)`,`is`).exec(e)?.[1];if(n==null)return null;let r=n.trim();if(r.length===0)return{raw:``,action:null,args:``};let i=r.split(/\s+/),a=i[0]??``;return{raw:r,action:a===``?null:a,args:i.slice(1).join(` `)}}function bo(e,t){return t.includes(e)}function xo(e){return e.endsWith(`[bot]`)}function So(e){let t=bn(e);return{login:t,association:yn(e),isBot:xo(t)}}function Co(e){return{kind:_n(e)?`pr`:`issue`,number:e.issue.number,title:e.issue.title,body:e.comment.body??null,locked:xn(e)}}function wo(e,t){if(t==null||t===``||e==null)return{hasMention:!1,command:null};let n=_o(e,t);return{hasMention:n,command:n?yo(e,t):null}}function To(e,t){let n=So(e),r=Co(e),i=e.comment.body,a=e.comment.id,{hasMention:o,command:s}=wo(i,t);return{author:n,target:r,commentBody:i,commentId:a,hasMention:o,command:s}}function Eo(e,t){let n=e.discussion,r=e.comment,i={login:r.user.login,association:r.author_association??`NONE`,isBot:xo(r.user.login)},a={kind:`discussion`,number:n.number,title:n.title,body:r.body??n.body??null,locked:n.locked??!1},o=r.body??null,s=r.id,{hasMention:c,command:l}=wo(o,t);return{author:i,target:a,commentBody:o,commentId:s,hasMention:c,command:l}}function Do(e,t){let n=e.inputs?.prompt??``;return{author:{login:t,association:`OWNER`,isBot:!1},target:{kind:`manual`,number:0,title:`Manual workflow dispatch`,body:n===``?null:n,locked:!1},commentBody:n===``?null:n,commentId:null,hasMention:!1,command:null}}function Oo(e,t){let n=e.issue,r=n.body??``,i={login:e.sender.login,association:n.author_association??`NONE`,isBot:xo(e.sender.login)},a={kind:`issue`,number:n.number,title:n.title,body:n.body??null,locked:n.locked??!1},{hasMention:o,command:s}=wo(r,t);return{author:i,target:a,commentBody:n.body,commentId:null,hasMention:o,command:s}}const ko=[`opened`,`edited`];function Ao(e){return ko.includes(e)}function jo(e,t,n){let r=e.raw.payload.action;return Ao(r)?e.author!=null&&e.author.isBot?(n.debug(`Skipping bot actor`,{bot:e.author.login}),{shouldSkip:!0,reason:`self_comment`,message:`Issues from bots (${e.author.login}) are not processed`}):e.author!=null&&!bo(e.author.association,t.allowedAssociations)?(n.debug(`Skipping unauthorized author`,{association:e.author.association,allowed:t.allowedAssociations}),{shouldSkip:!0,reason:`unauthorized_author`,message:`Author association '${e.author.association}' is not authorized`}):r===`edited`&&!e.hasMention?(n.debug(`Skipping issues.edited without bot mention`),{shouldSkip:!0,reason:`no_mention`,message:`Issue edit does not mention the bot`}):e.target?.locked===!0?(n.debug(`Skipping locked issue`),{shouldSkip:!0,reason:`issue_locked`,message:`Issue is locked`}):{shouldSkip:!1}:(n.debug(`Skipping unsupported issues action`,{action:r}),{shouldSkip:!0,reason:`action_not_supported`,message:`Issues action '${r}' is not supported (only 'opened' and 'edited')`})}function Mo(e,t){let n=e.pull_request,r=n.body??``,i={login:e.sender.login,association:n.author_association??`NONE`,isBot:xo(e.sender.login)},a={kind:`pr`,number:n.number,title:n.title,body:n.body??null,locked:n.locked??!1,isDraft:n.draft??!1},{hasMention:o,command:s}=wo(r,t);return{author:i,target:a,commentBody:n.body,commentId:null,hasMention:o,command:s}}const No=[`opened`,`synchronize`,`reopened`];function Po(e){return No.includes(e)}function Fo(e,t,n){let r=e.raw.payload.action;return Po(r)?e.author!=null&&e.author.isBot?(n.debug(`Skipping bot actor`,{bot:e.author.login}),{shouldSkip:!0,reason:`self_comment`,message:`Pull requests from bots (${e.author.login}) are not processed`}):e.author!=null&&!bo(e.author.association,t.allowedAssociations)?(n.debug(`Skipping unauthorized author`,{association:e.author.association,allowed:t.allowedAssociations}),{shouldSkip:!0,reason:`unauthorized_author`,message:`Author association '${e.author.association}' is not authorized`}):t.skipDraftPRs&&e.target?.isDraft===!0?(n.debug(`Skipping draft PR`),{shouldSkip:!0,reason:`draft_pr`,message:`Pull request is a draft`}):e.target?.locked===!0?(n.debug(`Skipping locked pull request`),{shouldSkip:!0,reason:`issue_locked`,message:`Pull request is locked`}):{shouldSkip:!1}:(n.debug(`Skipping unsupported pull_request action`,{action:r}),{shouldSkip:!0,reason:`action_not_supported`,message:`Pull request action '${r}' is not supported`})}function Io(e,t){let n=e.pull_request,r=e.comment,i={login:r.user.login,association:r.author_association,isBot:xo(r.user.login)},a={kind:`pr`,number:n.number,title:n.title,body:r.body,locked:n.locked??!1,path:r.path,line:r.line??void 0,diffHunk:r.diff_hunk,commitId:r.commit_id},{hasMention:o,command:s}=wo(r.body,t);return{author:i,target:a,commentBody:r.body,commentId:r.id,hasMention:o,command:s}}function Lo(e,t,n){let r=n?.trim()??``;return{author:{login:t,association:`OWNER`,isBot:!1},target:{kind:`manual`,number:0,title:`Scheduled workflow`,body:r===``?null:r,locked:!1},commentBody:r===``?null:r,commentId:null,hasMention:!1,command:null}}function Ro(e,t){return(e.promptInput?.trim()??``)===``?(t.debug(`Skipping schedule event without prompt input`),{shouldSkip:!0,reason:`prompt_required`,message:`Schedule trigger requires prompt input`}):{shouldSkip:!1}}function zo(e,t){return(e.commentBody?.trim()??``)===``?(t.debug(`Skipping workflow_dispatch event without prompt input`),{shouldSkip:!0,reason:`prompt_required`,message:`Workflow dispatch requires prompt input`}):{shouldSkip:!1}}function Bo(e,t,n,r){let i=e.raw.payload,{targetLabel:a,actionLabel:o}=r;return i.action===`created`?e.target?.locked===!0?(n.debug(`Skipping locked ${a}`),{shouldSkip:!0,reason:`issue_locked`,message:`${a} is locked`}):e.author!=null&&e.author.isBot?(n.debug(`Skipping bot actor`,{bot:e.author.login}),{shouldSkip:!0,reason:`self_comment`,message:`Comments from bots (${e.author.login}) are not processed`}):e.author!=null&&!bo(e.author.association,t.allowedAssociations)?(n.debug(`Skipping unauthorized author`,{association:e.author.association,allowed:t.allowedAssociations}),{shouldSkip:!0,reason:`unauthorized_author`,message:`Author association '${e.author.association}' is not authorized`}):t.requireMention&&!e.hasMention?(n.debug(`Skipping ${o} without bot mention`),{shouldSkip:!0,reason:`no_mention`,message:`Comment does not mention the bot`}):{shouldSkip:!1}:(n.debug(`Skipping non-created ${o} action`,{action:i.action}),{shouldSkip:!0,reason:`action_not_created`,message:`${o} action is '${i.action}', not 'created'`})}function Vo(e,t,n){return Bo(e,t,n,{targetLabel:`Issue or PR`,actionLabel:`Comment`})}function Ho(e,t,n){return Bo(e,t,n,{targetLabel:`Discussion`,actionLabel:`Discussion comment`})}const Uo=[`created`];function Wo(e,t,n){let r=e.raw.payload;return Uo.includes(r.action)?e.target?.locked===!0?(n.debug(`Skipping locked pull request`),{shouldSkip:!0,reason:`issue_locked`,message:`Pull request is locked`}):e.author!=null&&e.author.isBot?(n.debug(`Skipping bot actor`,{bot:e.author.login}),{shouldSkip:!0,reason:`self_comment`,message:`Review comments from bots (${e.author.login}) are not processed`}):e.author!=null&&!bo(e.author.association,t.allowedAssociations)?(n.debug(`Skipping unauthorized author`,{association:e.author.association,allowed:t.allowedAssociations}),{shouldSkip:!0,reason:`unauthorized_author`,message:`Author association '${e.author.association}' is not authorized`}):t.requireMention&&!e.hasMention?(n.debug(`Skipping review comment without bot mention`),{shouldSkip:!0,reason:`no_mention`,message:`Review comment does not mention the bot`}):{shouldSkip:!1}:(n.debug(`Skipping non-created review comment action`,{action:r.action}),{shouldSkip:!0,reason:`action_not_created`,message:`Review comment action '${r.action}' is not supported (only 'created')`})}function Go(e,t,n){if(e.eventType===`unsupported`)return n.debug(`Skipping unsupported event`,{eventName:e.eventName}),{shouldSkip:!0,reason:`unsupported_event`,message:`Unsupported event type: ${e.eventName}`};switch(e.eventType){case`issue_comment`:return Vo(e,t,n);case`discussion_comment`:return Ho(e,t,n);case`issues`:return jo(e,t,n);case`pull_request`:return Fo(e,t,n);case`pull_request_review_comment`:return Wo(e,t,n);case`schedule`:return Ro(t,n);case`workflow_dispatch`:return zo(e,n);default:return{shouldSkip:!1}}}function Ko(e,t,n){let r={eventType:e.eventType,eventName:e.eventName,repo:e.repo,ref:e.ref,sha:e.sha,runId:e.runId,actor:e.actor,raw:e};switch(e.eventType){case`issue_comment`:{let n=e.payload,i=To(n,t);return{...r,author:i.author,target:i.target,commentBody:i.commentBody,commentId:i.commentId,hasMention:i.hasMention,command:i.command}}case`discussion_comment`:{let n=e.payload,i=Eo(n,t);return{...r,author:i.author,target:i.target,commentBody:i.commentBody,commentId:i.commentId,hasMention:i.hasMention,command:i.command}}case`workflow_dispatch`:{let t=e.payload,n=Do(t,e.actor);return{...r,author:n.author,target:n.target,commentBody:n.commentBody,commentId:n.commentId,hasMention:n.hasMention,command:n.command}}case`issues`:{let n=e.payload,i=Oo(n,t);return{...r,author:i.author,target:i.target,commentBody:i.commentBody,commentId:i.commentId,hasMention:i.hasMention,command:i.command}}case`pull_request`:{let n=e.payload,i=Mo(n,t);return{...r,author:i.author,target:i.target,commentBody:i.commentBody,commentId:i.commentId,hasMention:i.hasMention,command:i.command}}case`pull_request_review_comment`:{let n=e.payload,i=Io(n,t);return{...r,author:i.author,target:i.target,commentBody:i.commentBody,commentId:i.commentId,hasMention:i.hasMention,command:i.command}}case`schedule`:{let t=e.payload,i=Lo(t,e.actor,n);return{...r,author:i.author,target:i.target,commentBody:i.commentBody,commentId:i.commentId,hasMention:i.hasMention,command:i.command}}case`unsupported`:return{...r,author:null,target:null,commentBody:null,commentId:null,hasMention:!1,command:null}}}function qo(e,t,n={}){let r={...go,...n},i=Ko(e,r.login,r.promptInput);t.debug(`Routing event`,{eventName:e.eventName,eventType:e.eventType,hasMention:i.hasMention});let a=Go(i,r,t);return a.shouldSkip?{shouldProcess:!1,skipReason:a.reason,skipMessage:a.message,context:i}:{shouldProcess:!0,context:i}}async function Jo(){let t=Date.now(),n=S({phase:`bootstrap`}),r=null,i=!1,a=0,o=null,s=null,c=Ha();c.start(),w(j.SHOULD_SAVE_CACHE,`false`),w(j.CACHE_SAVED,`false`);try{n.info(`Starting Fro Bot Agent`);let l=Ra();if(!l.success)return e(`Invalid inputs: ${l.error.message}`),1;let u=l.data,d=S({phase:`main`});d.info(`Action inputs parsed`,{sessionRetention:u.sessionRetention,s3Backup:u.s3Backup,hasGithubToken:u.githubToken.length>0,hasPrompt:u.prompt!=null,agent:u.agent,hasModelOverride:u.model!=null,timeoutMs:u.timeoutMs});let f=await Gi({logger:d,opencodeVersion:u.opencodeVersion});f.didSetup?d.info(`OpenCode auto-setup completed`,{version:f.version}):d.info(`OpenCode already available`,{version:f.version});let p=S({phase:`context`}),h=gn(p);o=di({token:u.githubToken,logger:p});let _=S({phase:`trigger`}),v=qo(h,_,{login:h.actor,requireMention:!0});if(!v.shouldProcess)return _.info(`Skipping event`,{reason:v.skipReason,message:v.skipMessage}),Ua({sessionId:null,cacheStatus:`miss`,duration:Date.now()-t}),0;_.info(`Event routed for processing`,{eventType:v.context.eventType,hasMention:v.context.hasMention,command:v.context.command?.action??null}),w(j.SHOULD_SAVE_CACHE,`true`);let y=await Tn({logger:p,octokit:o,triggerContext:v.context}),b=await fi(o,p);r={repo:y.repo,commentId:y.commentId,issueNumber:y.issueNumber,issueType:y.issueType,botLogin:b};let C=S({phase:`acknowledgment`});await Yi(o,r,C);let T={agentIdentity:`github`,repo:x(),ref:E(),os:F()},O=S({phase:`cache`}),k=m(),ee=R.join(k,`.git`,`opencode`),A=await D({components:T,logger:O,storagePath:g(),authPath:N(),projectIdPath:ee}),M=A.corrupted?`corrupted`:A.hit?`hit`:`miss`;c.setCacheStatus(M),d.info(`Cache restore completed`,{cacheStatus:M,key:A.key});let P=await ho({workspacePath:k,logger:O});P.source===`error`?O.warning(`Failed to generate project ID (continuing)`,{error:P.error}):O.debug(`Project ID ready`,{projectId:P.projectId,source:P.source});let I=S({phase:`session`}),L=await io(k,{limit:10},I);I.debug(`Listed recent sessions`,{count:L.length});let z=y.issueTitle??y.repo,V=await oo(z,k,{limit:5},I);I.debug(`Searched prior sessions`,{query:z,resultCount:V.length});for(let e of V)c.addSessionUsed(e.sessionId);let H=S({phase:`attachments`}),U=y.commentBody??``,W=ia(U);if(W.length>0){H.info(`Processing attachments`,{count:W.length});let{validated:e,skipped:t}=ha(await la(W,u.githubToken,void 0,H),void 0,H);(e.length>0||t.length>0)&&(s=pa(U,W,e,t),H.info(`Attachments processed`,{processed:e.length,skipped:t.length}))}let G={context:y,customPrompt:u.prompt,cacheStatus:M,sessionContext:{recentSessions:L,priorWorkContext:V},triggerContext:v.context,fileParts:s?.fileParts},K=B.env.SKIP_AGENT_EXECUTION===`true`,q,te=Date.now();if(K)d.info(`Skipping agent execution (SKIP_AGENT_EXECUTION=true)`),q={success:!0,exitCode:0,sessionId:null,error:null,tokenUsage:null,model:null,cost:null,prsCreated:[],commitsCreated:[],commentsPosted:0,llmError:null};else{let e=await Ui(G,S({phase:`execution`}),{agent:u.agent,model:u.model,timeoutMs:u.timeoutMs}),t=e.sessionId;if(t==null){let e=await to(te,I);e!=null&&(t=e.session.id,I.debug(`Identified session from execution`,{sessionId:t}))}q={...e,sessionId:t}}q.sessionId!=null&&w(j.SESSION_ID,q.sessionId),i=q.success,q.sessionId!=null&&c.addSessionCreated(q.sessionId),q.tokenUsage!=null&&c.setTokenUsage(q.tokenUsage,q.model,q.cost);for(let e of q.prsCreated)c.addPRCreated(e);for(let e of q.commitsCreated)c.addCommitCreated(e);for(let e=0;e<q.commentsPosted;e++)c.incrementComments();if(q.sessionId!=null){let e={eventType:y.eventName,repo:y.repo,ref:y.ref,runId:Number(y.runId),cacheStatus:M,sessionIds:[q.sessionId],createdPRs:[...q.prsCreated],createdCommits:[...q.commitsCreated],duration:Math.round((Date.now()-t)/1e3),tokenUsage:q.tokenUsage};await fo(q.sessionId,e,I),I.debug(`Wrote session summary`,{sessionId:q.sessionId})}c.end();let J=Date.now()-t;if(Ua({sessionId:q.sessionId,cacheStatus:M,duration:J}),await Va({eventType:y.eventName,repo:y.repo,ref:y.ref,runId:Number(y.runId),runUrl:`https://github.com/${y.repo}/actions/runs/${y.runId}`,metrics:c.getMetrics(),agent:u.agent},d),q.success)d.info(`Agent run completed successfully`,{durationMs:J});else if(q.llmError==null)a=q.exitCode,e(`Agent execution failed with exit code ${q.exitCode}`);else{d.info(`Agent failed with recoverable LLM error`,{error:q.llmError.message,type:q.llmError.type,durationMs:J});let[e,t]=y.repo.split(`/`),n={type:v.context.eventType===`discussion_comment`?`discussion`:y.issueType===`pr`?`pr`:`issue`,number:y.issueNumber??0,owner:e??``,repo:t??``};if(n.number>0&&n.owner.length>0&&n.repo.length>0){let e=Nr(q.llmError),t=S({phase:`error-comment`}),r=await Oa(o,n,{body:e},t);r==null?t.warning(`Failed to post LLM error comment`):(t.info(`Posted LLM error comment`,{commentUrl:r.url}),c.incrementComments())}else d.warning(`Cannot post error comment: missing target context`);a=0}}catch(r){a=1;let i=Date.now()-t,o=r instanceof Error?r.name:`UnknownError`,s=r instanceof Error?r.message:String(r);c.recordError(o,s,!1),c.end(),Ua({sessionId:null,cacheStatus:`miss`,duration:i}),r instanceof Error?(n.error(`Agent failed`,{error:r.message}),e(r.message)):(n.error(`Agent failed with unknown error`),e(`An unknown error occurred`))}finally{try{if(s!=null){let e=S({phase:`attachment-cleanup`});await ua(s.tempFiles,e)}if(r!=null&&o!=null){let e=S({phase:`cleanup`});await ta(o,r,i,e)}let e=S({phase:`prune`}),t=await ro(g(),no,e);t.prunedCount>0&&e.info(`Pruned old sessions`,{pruned:t.prunedCount,remaining:t.remainingCount});let n={agentIdentity:`github`,repo:x(),ref:E(),os:F()},a=S({phase:`cache-save`}),c=m(),l=R.join(c,`.git`,`opencode`);await ee({components:n,runId:b(),logger:a,storagePath:g(),authPath:N(),projectIdPath:l})&&w(j.CACHE_SAVED,`true`)}catch(e){n.warning(`Cleanup failed (non-fatal)`,{error:e instanceof Error?e.message:String(e)})}}return a}await Jo().then(e=>{B.exit(e)});export{};