import{$ as e,A as t,B as n,C as r,D as i,E as a,G as o,H as s,I as c,J as l,K as u,L as d,M as f,N as p,O as m,P as h,Q as g,R as _,S as v,T as y,U as b,V as x,W as S,X as C,Y as w,Z as T,_ as ee,a as E,b as te,c as D,d as O,et as ne,f as re,g as k,h as A,i as ie,j,k as ae,l as oe,m as se,n as ce,o as le,p as M,q as N,r as ue,s as de,t as P,u as F,v as fe,w as pe,x as me,y as he,z as I}from"./state-keys-DamBXyXP.js";import*as L from"node:path";import ge,{join as _e}from"node:path";import R from"node:process";import*as ve from"os";import{EOL as ye}from"os";import*as be from"crypto";import*as z from"fs";import{existsSync as xe,readFileSync as Se}from"fs";import*as B from"path";import{ok as Ce}from"assert";import*as we from"util";import{Buffer as Te}from"node:buffer";import*as Ee from"node:crypto";import{pathToFileURL as De}from"node:url";import*as V from"node:fs/promises";import Oe from"node:fs/promises";import{spawn as ke}from"node:child_process";import*as Ae from"node:os";import je,{homedir as Me}from"node:os";import*as Ne from"stream";const Pe={maxComments:50,maxCommits:100,maxFiles:100,maxReviews:100,maxBodyBytes:10*1024,maxTotalBytes:100*1024},Fe=`â€¦[truncated]`;function Ie(e,t){if(e.length===0)return{text:``,truncated:!1};let n=new TextEncoder,r=n.encode(e);if(r.length<=t)return{text:e,truncated:!1};let i=t-n.encode(Fe).length;if(i<=0)return{text:Fe,truncated:!0};let a=r.slice(0,i),o=new TextDecoder(`utf-8`,{fatal:!1}).decode(a);for(;o.length>0&&o.charCodeAt(o.length-1)===65533;)a=a.slice(0,-1),o=new TextDecoder(`utf-8`,{fatal:!1}).decode(a);return{text:o+Fe,truncated:!0}}function Le(e){return e.length===0?``:`**Labels:** ${e.map(e=>`\`${e.name}\``).join(`, `)}\n`}function Re(e){return e.length===0?``:`**Assignees:** ${e.map(e=>`@${e.login}`).join(`, `)}\n`}function ze(e){let t=[];t.push(`## Issue #${e.number}`),t.push(``),t.push(`**Title:** ${e.title}`),t.push(`**State:** ${e.state}`),t.push(`**Author:** ${e.author??`unknown`}`),t.push(`**Created:** ${e.createdAt}`);let n=Le(e.labels);n.length>0&&t.push(n.trimEnd());let r=Re(e.assignees);if(r.length>0&&t.push(r.trimEnd()),t.push(``),t.push(`### Body`),t.push(``),t.push(e.body),e.bodyTruncated&&(t.push(``),t.push(`*Note: Body was truncated due to size limits.*`)),e.comments.length>0){t.push(``),t.push(`### Comments (${e.comments.length}${e.commentsTruncated?` of ${e.totalComments}`:``})`),e.commentsTruncated&&(t.push(``),t.push(`*Note: Comments were truncated due to limits.*`)),t.push(``);for(let n of e.comments)t.push(`**${n.author??`unknown`}** (${n.createdAt}):`),t.push(n.body),t.push(``)}return t.join(`
`)}function Be(e){let t=[];t.push(`## Pull Request #${e.number}`),t.push(``),t.push(`**Title:** ${e.title}`),t.push(`**State:** ${e.state}`),t.push(`**Author:** ${e.author??`unknown`}`),t.push(`**Created:** ${e.createdAt}`),t.push(`**Base:** ${e.baseBranch} â† **Head:** ${e.headBranch}`),e.isFork&&t.push(`**Fork:** Yes (external contributor)`);let n=Le(e.labels);n.length>0&&t.push(n.trimEnd());let r=Re(e.assignees);if(r.length>0&&t.push(r.trimEnd()),t.push(``),t.push(`### Description`),t.push(``),t.push(e.body),e.bodyTruncated&&(t.push(``),t.push(`*Note: Description was truncated due to size limits.*`)),e.files.length>0){t.push(``),t.push(`### Files Changed (${e.files.length}${e.filesTruncated?` of ${e.totalFiles}`:``})`),t.push(``),t.push(`| File | +/- |`),t.push(`|------|-----|`);for(let n of e.files)t.push(`| \`${n.path}\` | +${n.additions}/-${n.deletions} |`)}if(e.commits.length>0){t.push(``),t.push(`### Commits (${e.commits.length}${e.commitsTruncated?` of ${e.totalCommits}`:``})`),t.push(``);for(let n of e.commits){let e=n.oid.slice(0,7);t.push(`- \`${e}\` ${n.message.split(`
`)[0]}`)}}if(e.reviews.length>0){t.push(``),t.push(`### Reviews (${e.reviews.length}${e.reviewsTruncated?` of ${e.totalReviews}`:``})`),t.push(``);for(let n of e.reviews)t.push(`**${n.author??`unknown`}** - ${n.state}`),n.body.length>0&&t.push(n.body),t.push(``)}if(e.comments.length>0){t.push(``),t.push(`### Comments (${e.comments.length}${e.commentsTruncated?` of ${e.totalComments}`:``})`),t.push(``);for(let n of e.comments)t.push(`**${n.author??`unknown`}** (${n.createdAt}):`),t.push(n.body),t.push(``)}return t.join(`
`)}function Ve(e){return e.type===`issue`?ze(e):Be(e)}async function He(e,n,r,i,a,o){try{let[t,o]=await Promise.all([e.rest.issues.get({owner:n,repo:r,issue_number:i}),e.rest.issues.listComments({owner:n,repo:r,issue_number:i,per_page:a.maxComments})]),s=t.data,c=Ie(s.body??``,a.maxBodyBytes),l=o.data.slice(0,a.maxComments).map(e=>({id:e.node_id??String(e.id),author:e.user?.login??null,body:e.body??``,createdAt:e.created_at,authorAssociation:e.author_association,isMinimized:!1})),u=(s.labels??[]).filter(e=>typeof e==`object`&&!!e&&`name`in e).map(e=>({name:e.name??``,color:e.color})),d=(s.assignees??[]).map(e=>({login:e?.login??``}));return{type:`issue`,number:s.number,title:s.title,body:c.text,bodyTruncated:c.truncated,state:s.state,author:s.user?.login??null,createdAt:s.created_at,labels:u,assignees:d,comments:l,commentsTruncated:o.data.length>=a.maxComments,totalComments:o.data.length}}catch(e){return o.warning(`REST issue fallback failed`,{owner:n,repo:r,number:i,error:t(e)}),null}}async function Ue(e,n,r,i,a,o){try{let[s,c,l,u,d]=await Promise.all([e.rest.pulls.get({owner:n,repo:r,pull_number:i}),e.rest.pulls.listCommits({owner:n,repo:r,pull_number:i,per_page:a.maxCommits}),e.rest.pulls.listFiles({owner:n,repo:r,pull_number:i,per_page:a.maxFiles}),e.rest.pulls.listReviews({owner:n,repo:r,pull_number:i,per_page:a.maxReviews}),e.rest.issues.listComments({owner:n,repo:r,issue_number:i,per_page:a.maxComments})]),f=await e.rest.pulls.listRequestedReviewers({owner:n,repo:r,pull_number:i}).catch(e=>(o.warning(`Failed to fetch requested reviewers, defaulting to empty`,{owner:n,repo:r,number:i,error:t(e)}),{data:{users:[],teams:[]}})),p=s.data,m=Ie(p.body??``,a.maxBodyBytes),h=p.base.repo?.owner.login,g=p.head.repo?.owner.login,_=g==null||h!==g,v=d.data.slice(0,a.maxComments).map(e=>({id:e.node_id??String(e.id),author:e.user?.login??null,body:e.body??``,createdAt:e.created_at,authorAssociation:e.author_association,isMinimized:!1})),y=c.data.slice(0,a.maxCommits).map(e=>({oid:e.sha,message:e.commit.message,author:e.commit.author?.name??null})),b=l.data.slice(0,a.maxFiles).map(e=>({path:e.filename,additions:e.additions,deletions:e.deletions,status:e.status})),x=u.data.slice(0,a.maxReviews).map(e=>({author:e.user?.login??null,state:e.state,body:e.body??``,createdAt:e.submitted_at??``,comments:[]})),S=(p.labels??[]).map(e=>({name:e.name??``,color:e.color})),C=(p.assignees??[]).map(e=>({login:e?.login??``})),w=(f.data.users??[]).map(e=>e.login),T=(f.data.teams??[]).map(e=>e.name);return{type:`pull_request`,number:p.number,title:p.title,body:m.text,bodyTruncated:m.truncated,state:p.state,author:p.user?.login??null,createdAt:p.created_at,baseBranch:p.base.ref,headBranch:p.head.ref,isFork:_,labels:S,assignees:C,comments:v,commentsTruncated:d.data.length>=a.maxComments,totalComments:d.data.length,commits:y,commitsTruncated:c.data.length>=a.maxCommits,totalCommits:c.data.length,files:b,filesTruncated:l.data.length>=a.maxFiles,totalFiles:l.data.length,reviews:x,reviewsTruncated:u.data.length>=a.maxReviews,totalReviews:u.data.length,authorAssociation:p.author_association,requestedReviewers:w,requestedReviewerTeams:T}}catch(e){return o.warning(`REST pull request fallback failed`,{owner:n,repo:r,number:i,error:t(e)}),null}}async function We(e,n,r,i,a,o){try{return await e.graphql(`
  query GetIssue($owner: String!, $repo: String!, $number: Int!, $maxComments: Int!) {
    repository(owner: $owner, name: $repo) {
      issue(number: $number) {
        number
        title
        body
        state
        createdAt
        author { login }
        labels(first: 20) {
          nodes { name color }
        }
        assignees(first: 10) {
          nodes { login }
        }
        comments(first: $maxComments) {
          totalCount
          nodes {
            id
            body
            createdAt
            author { login }
            authorAssociation
            isMinimized
          }
        }
      }
    }
  }
`,{owner:n,repo:r,number:i,maxComments:a})}catch(e){return o.warning(`GraphQL issue query failed`,{owner:n,repo:r,number:i,error:t(e)}),null}}async function Ge(e,n,r,i,a,o,s,c,l){try{return await e.graphql(`
  query GetPullRequest(
    $owner: String!,
    $repo: String!,
    $number: Int!,
    $maxComments: Int!,
    $maxCommits: Int!,
    $maxFiles: Int!,
    $maxReviews: Int!
  ) {
    repository(owner: $owner, name: $repo) {
      pullRequest(number: $number) {
        number
        title
        body
        state
        createdAt
        author { login }
        baseRefName
        headRefName
        baseRepository { owner { login } }
        headRepository { owner { login } }
        labels(first: 20) {
          nodes { name color }
        }
        assignees(first: 10) {
          nodes { login }
        }
        comments(first: $maxComments) {
          totalCount
          nodes {
            id
            body
            createdAt
            author { login }
            authorAssociation
            isMinimized
          }
        }
        commits(first: $maxCommits) {
          totalCount
          nodes {
            commit {
              oid
              message
              author { name }
            }
          }
        }
        files(first: $maxFiles) {
          totalCount
          nodes {
            path
            additions
            deletions
          }
        }
        reviews(first: $maxReviews) {
          totalCount
          nodes {
            state
            body
            createdAt
            author { login }
            comments(first: 10) {
              nodes {
                id
                body
                path
                line
                createdAt
                author { login }
              }
            }
          }
        }
        authorAssociation
        reviewRequests(first: 20) {
          nodes {
            requestedReviewer {
              ... on User { login }
              ... on Team { name }
            }
          }
        }
      }
    }
  }
`,{owner:n,repo:r,number:i,maxComments:a,maxCommits:o,maxFiles:s,maxReviews:c})}catch(e){return l.warning(`GraphQL pull request query failed`,{owner:n,repo:r,number:i,error:t(e)}),null}}async function Ke(e,t,n,r,i,a){let o=await We(e,t,n,r,i.maxComments,a);if(o==null)return null;let s=o.repository.issue;if(s==null)return a.debug(`Issue not found`,{owner:t,repo:n,number:r}),null;let c=Ie(s.body??``,i.maxBodyBytes),l=s.comments.nodes.slice(0,i.maxComments),u=s.comments.totalCount>l.length,d=l.map(e=>({id:e.id,author:e.author?.login??null,body:e.body,createdAt:e.createdAt,authorAssociation:e.authorAssociation,isMinimized:e.isMinimized})),f=s.labels.nodes.map(e=>({name:e.name,color:e.color})),p=s.assignees.nodes.map(e=>({login:e.login}));return{type:`issue`,number:s.number,title:s.title,body:c.text,bodyTruncated:c.truncated,state:s.state,author:s.author?.login??null,createdAt:s.createdAt,labels:f,assignees:p,comments:d,commentsTruncated:u,totalComments:s.comments.totalCount}}async function qe(e,t,n,r,i,a){let o=await Ge(e,t,n,r,i.maxComments,i.maxCommits,i.maxFiles,i.maxReviews,a);if(o==null)return null;let s=o.repository.pullRequest;if(s==null)return a.debug(`Pull request not found`,{owner:t,repo:n,number:r}),null;let c=Ie(s.body??``,i.maxBodyBytes),l=s.baseRepository?.owner.login,u=s.headRepository?.owner.login,d=u==null||l!==u,f=s.comments.nodes.slice(0,i.maxComments),p=s.comments.totalCount>f.length,m=f.map(e=>({id:e.id,author:e.author?.login??null,body:e.body,createdAt:e.createdAt,authorAssociation:e.authorAssociation,isMinimized:e.isMinimized})),h=s.commits.nodes.slice(0,i.maxCommits),g=s.commits.totalCount>h.length,_=h.map(e=>({oid:e.commit.oid,message:e.commit.message,author:e.commit.author?.name??null})),v=s.files.nodes.slice(0,i.maxFiles),y=s.files.totalCount>v.length,b=v.map(e=>({path:e.path,additions:e.additions,deletions:e.deletions})),x=s.reviews.nodes.slice(0,i.maxReviews),S=s.reviews.totalCount>x.length,C=x.map(e=>({author:e.author?.login??null,state:e.state,body:e.body,createdAt:e.createdAt,comments:e.comments.nodes.map(e=>({id:e.id,author:e.author?.login??null,body:e.body,path:e.path,line:e.line,createdAt:e.createdAt}))})),w=s.labels.nodes.map(e=>({name:e.name,color:e.color})),T=s.assignees.nodes.map(e=>({login:e.login})),ee=s.reviewRequests.nodes.map(e=>`login`in e.requestedReviewer?e.requestedReviewer.login:null).filter(e=>e!=null),E=s.reviewRequests.nodes.map(e=>`name`in e.requestedReviewer?e.requestedReviewer.name:null).filter(e=>e!=null);return{type:`pull_request`,number:s.number,title:s.title,body:c.text,bodyTruncated:c.truncated,state:s.state,author:s.author?.login??null,createdAt:s.createdAt,baseBranch:s.baseRefName,headBranch:s.headRefName,isFork:d,labels:w,assignees:T,comments:m,commentsTruncated:p,totalComments:s.comments.totalCount,commits:_,commitsTruncated:g,totalCommits:s.commits.totalCount,files:b,filesTruncated:y,totalFiles:s.files.totalCount,reviews:C,reviewsTruncated:S,totalReviews:s.reviews.totalCount,authorAssociation:s.authorAssociation,requestedReviewers:ee,requestedReviewerTeams:E}}function H(e){let[t,n]=e.split(`/`);if(t==null||n==null||t.length===0||n.length===0)throw Error(`Invalid repository string: ${e}`);return{owner:t,repo:n}}async function Je(e,n,r,i,a){try{let{owner:t,repo:o}=H(n),{data:s}=await e.rest.reactions.createForIssueComment({owner:t,repo:o,comment_id:r,content:i});return a.debug(`Created comment reaction`,{commentId:r,content:i,reactionId:s.id}),{id:s.id}}catch(e){return a.warning(`Failed to create comment reaction`,{commentId:r,content:i,error:t(e)}),null}}async function Ye(e,n,r,i){try{let{owner:t,repo:i}=H(n),{data:a}=await e.rest.reactions.listForIssueComment({owner:t,repo:i,comment_id:r,per_page:100});return a.map(e=>({id:e.id,content:e.content,userLogin:e.user?.login??null}))}catch(e){return i.warning(`Failed to list comment reactions`,{commentId:r,error:t(e)}),[]}}async function Xe(e,n,r,i,a){try{let{owner:t,repo:o}=H(n);return await e.rest.reactions.deleteForIssueComment({owner:t,repo:o,comment_id:r,reaction_id:i}),a.debug(`Deleted comment reaction`,{commentId:r,reactionId:i}),!0}catch(e){return a.warning(`Failed to delete comment reaction`,{commentId:r,reactionId:i,error:t(e)}),!1}}async function Ze(e,n,r,i,a,o){let{owner:s,repo:c}=H(n);try{return await e.rest.issues.createLabel({owner:s,repo:c,name:r,color:i,description:a}),o.debug(`Created label`,{name:r,color:i}),!0}catch(e){return e instanceof Error&&`status`in e&&e.status===422?(o.debug(`Label already exists`,{name:r}),!0):(o.warning(`Failed to create label`,{name:r,error:t(e)}),!1)}}async function Qe(e,n,r,i,a){try{let{owner:t,repo:o}=H(n);return await e.rest.issues.addLabels({owner:t,repo:o,issue_number:r,labels:[...i]}),a.debug(`Added labels to issue`,{issueNumber:r,labels:i}),!0}catch(e){return a.warning(`Failed to add labels to issue`,{issueNumber:r,labels:i,error:t(e)}),!1}}async function $e(e,n,r,i,a){try{let{owner:t,repo:o}=H(n);return await e.rest.issues.removeLabel({owner:t,repo:o,issue_number:r,name:i}),a.debug(`Removed label from issue`,{issueNumber:r,label:i}),!0}catch(e){return e instanceof Error&&`status`in e&&e.status===404?(a.debug(`Label was not present on issue`,{issueNumber:r,label:i}),!0):(a.warning(`Failed to remove label from issue`,{issueNumber:r,label:i,error:t(e)}),!1)}}async function et(e,n,r){try{let{owner:t,repo:r}=H(n),{data:i}=await e.rest.repos.get({owner:t,repo:r});return i.default_branch}catch(e){return r.warning(`Failed to get default branch`,{repo:n,error:t(e)}),`main`}}async function tt(e,n,r){try{let{data:t}=await e.rest.users.getByUsername({username:n});return{id:t.id,login:t.login}}catch(e){return r.debug(`Failed to get user by username`,{username:n,error:t(e)}),null}}const nt={PER_PAGE:100,MAX_PAGES:50};async function rt(e,t,n,r,i){i.debug(`Fetching PR diff`,{prNumber:r});let a=[],o=1,s=!1;for(;o<=nt.MAX_PAGES;){let{data:c}=await e.rest.pulls.listFiles({owner:t,repo:n,pull_number:r,per_page:nt.PER_PAGE,page:o}),l=c.map(e=>({filename:e.filename,status:e.status,additions:e.additions,deletions:e.deletions,patch:e.patch??null,previousFilename:e.previous_filename??null}));if(a.push(...l),c.length<nt.PER_PAGE)break;o++,o>nt.MAX_PAGES&&(s=!0,i.warning(`PR diff pagination limit reached`,{filesLoaded:a.length,maxPages:nt.MAX_PAGES}))}let c=a.reduce((e,t)=>({additions:e.additions+t.additions,deletions:e.deletions+t.deletions}),{additions:0,deletions:0});return i.debug(`Fetched diff`,{files:a.length,additions:c.additions,deletions:c.deletions,truncated:s}),{files:a,additions:c.additions,deletions:c.deletions,changedFiles:a.length,truncated:s}}async function it(e,n,r,i){if(e.eventType!==`pull_request`)return null;let a=e.target?.number;if(a==null)return i.debug(`No PR number in trigger context, skipping diff collection`),null;let[o,s]=r.split(`/`);if(o==null||s==null)return i.warning(`Invalid repo format, skipping diff collection`,{repo:r}),null;try{let e=await rt(n,o,s,a,i),t={changedFiles:e.changedFiles,additions:e.additions,deletions:e.deletions,truncated:e.truncated,files:e.files.slice(0,50).map(e=>({filename:e.filename,status:e.status,additions:e.additions,deletions:e.deletions}))};return i.debug(`Collected diff context`,{files:t.changedFiles,additions:t.additions,deletions:t.deletions,truncated:t.truncated}),t}catch(e){return i.warning(`Failed to fetch PR diff`,{error:t(e)}),null}}async function at(e){let{logger:t,octokit:n,triggerContext:r,botLogin:i}=e,{repo:a,ref:o,actor:s,runId:c,target:l,author:u,commentBody:d,commentId:f}=r,p=`${a.owner}/${a.repo}`,m=l?.kind===`issue`||l?.kind===`pr`?l.kind:null,h=l?.number??null,g=l?.title??null,_=u?.login??null,v=await it(r,n,p,t),y=await ot(n,a.owner,a.repo,h,m,t),b=y?.type===`pull_request`?y:null,x=b?.authorAssociation??null,S=i!=null&&b!=null?b.requestedReviewers.includes(i):!1;return t.info(`Collected agent context`,{eventName:r.eventName,repo:p,issueNumber:h,issueType:m,hasComment:d!=null,hasDiffContext:v!=null,hasHydratedContext:y!=null}),{eventName:r.eventName,repo:p,ref:o,actor:s,runId:String(c),issueNumber:h,issueTitle:g,issueType:m,commentBody:d,commentAuthor:_,commentId:f,defaultBranch:await et(n,p,t),diffContext:v,hydratedContext:y,authorAssociation:x,isRequestedReviewer:S}}async function ot(e,t,n,r,i,a){if(r==null||i==null)return null;let o=Pe;return i===`issue`?await Ke(e,t,n,r,o,a)??He(e,t,n,r,o,a):await qe(e,t,n,r,o,a)??Ue(e,t,n,r,o,a)}const st=({onSseError:e,onSseEvent:t,responseTransformer:n,responseValidator:r,sseDefaultRetryDelay:i,sseMaxRetryAttempts:a,sseMaxRetryDelay:o,sseSleepFn:s,url:c,...l})=>{let u,d=s??(e=>new Promise(t=>setTimeout(t,e)));return{stream:async function*(){let s=i??3e3,f=0,p=l.signal??new AbortController().signal;for(;!p.aborted;){f++;let i=l.headers instanceof Headers?l.headers:new Headers(l.headers);u!==void 0&&i.set(`Last-Event-ID`,u);try{let e=await fetch(c,{...l,headers:i,signal:p});if(!e.ok)throw Error(`SSE failed: ${e.status} ${e.statusText}`);if(!e.body)throw Error(`No body in SSE response`);let a=e.body.pipeThrough(new TextDecoderStream).getReader(),o=``,d=()=>{try{a.cancel()}catch{}};p.addEventListener(`abort`,d);try{for(;;){let{done:e,value:i}=await a.read();if(e)break;o+=i;let c=o.split(`

`);o=c.pop()??``;for(let e of c){let i=e.split(`
`),a=[],o;for(let e of i)if(e.startsWith(`data:`))a.push(e.replace(/^data:\s*/,``));else if(e.startsWith(`event:`))o=e.replace(/^event:\s*/,``);else if(e.startsWith(`id:`))u=e.replace(/^id:\s*/,``);else if(e.startsWith(`retry:`)){let t=Number.parseInt(e.replace(/^retry:\s*/,``),10);Number.isNaN(t)||(s=t)}let c,l=!1;if(a.length){let e=a.join(`
`);try{c=JSON.parse(e),l=!0}catch{c=e}}l&&(r&&await r(c),n&&(c=await n(c))),t?.({data:c,event:o,id:u,retry:s}),a.length&&(yield c)}}}finally{p.removeEventListener(`abort`,d),a.releaseLock()}break}catch(t){if(e?.(t),a!==void 0&&f>=a)break;await d(Math.min(s*2**(f-1),o??3e4))}}}()}},ct=async(e,t)=>{let n=typeof t==`function`?await t(e):t;if(n)return e.scheme===`bearer`?`Bearer ${n}`:e.scheme===`basic`?`Basic ${btoa(n)}`:n},lt={bodySerializer:e=>JSON.stringify(e,(e,t)=>typeof t==`bigint`?t.toString():t)},ut=e=>{switch(e){case`label`:return`.`;case`matrix`:return`;`;case`simple`:return`,`;default:return`&`}},dt=e=>{switch(e){case`form`:return`,`;case`pipeDelimited`:return`|`;case`spaceDelimited`:return`%20`;default:return`,`}},ft=e=>{switch(e){case`label`:return`.`;case`matrix`:return`;`;case`simple`:return`,`;default:return`&`}},pt=({allowReserved:e,explode:t,name:n,style:r,value:i})=>{if(!t){let t=(e?i:i.map(e=>encodeURIComponent(e))).join(dt(r));switch(r){case`label`:return`.${t}`;case`matrix`:return`;${n}=${t}`;case`simple`:return t;default:return`${n}=${t}`}}let a=ut(r),o=i.map(t=>r===`label`||r===`simple`?e?t:encodeURIComponent(t):mt({allowReserved:e,name:n,value:t})).join(a);return r===`label`||r===`matrix`?a+o:o},mt=({allowReserved:e,name:t,value:n})=>{if(n==null)return``;if(typeof n==`object`)throw Error("Deeply-nested arrays/objects arenâ€™t supported. Provide your own `querySerializer()` to handle these.");return`${t}=${e?n:encodeURIComponent(n)}`},ht=({allowReserved:e,explode:t,name:n,style:r,value:i,valueOnly:a})=>{if(i instanceof Date)return a?i.toISOString():`${n}=${i.toISOString()}`;if(r!==`deepObject`&&!t){let t=[];Object.entries(i).forEach(([n,r])=>{t=[...t,n,e?r:encodeURIComponent(r)]});let a=t.join(`,`);switch(r){case`form`:return`${n}=${a}`;case`label`:return`.${a}`;case`matrix`:return`;${n}=${a}`;default:return a}}let o=ft(r),s=Object.entries(i).map(([t,i])=>mt({allowReserved:e,name:r===`deepObject`?`${n}[${t}]`:t,value:i})).join(o);return r===`label`||r===`matrix`?o+s:s},gt=/\{[^{}]+\}/g,_t=({path:e,url:t})=>{let n=t,r=t.match(gt);if(r)for(let t of r){let r=!1,i=t.substring(1,t.length-1),a=`simple`;i.endsWith(`*`)&&(r=!0,i=i.substring(0,i.length-1)),i.startsWith(`.`)?(i=i.substring(1),a=`label`):i.startsWith(`;`)&&(i=i.substring(1),a=`matrix`);let o=e[i];if(o==null)continue;if(Array.isArray(o)){n=n.replace(t,pt({explode:r,name:i,style:a,value:o}));continue}if(typeof o==`object`){n=n.replace(t,ht({explode:r,name:i,style:a,value:o,valueOnly:!0}));continue}if(a===`matrix`){n=n.replace(t,`;${mt({name:i,value:o})}`);continue}let s=encodeURIComponent(a===`label`?`.${o}`:o);n=n.replace(t,s)}return n},vt=({baseUrl:e,path:t,query:n,querySerializer:r,url:i})=>{let a=i.startsWith(`/`)?i:`/${i}`,o=(e??``)+a;t&&(o=_t({path:t,url:o}));let s=n?r(n):``;return s.startsWith(`?`)&&(s=s.substring(1)),s&&(o+=`?${s}`),o},yt=({allowReserved:e,array:t,object:n}={})=>r=>{let i=[];if(r&&typeof r==`object`)for(let a in r){let o=r[a];if(o!=null)if(Array.isArray(o)){let n=pt({allowReserved:e,explode:!0,name:a,style:`form`,value:o,...t});n&&i.push(n)}else if(typeof o==`object`){let t=ht({allowReserved:e,explode:!0,name:a,style:`deepObject`,value:o,...n});t&&i.push(t)}else{let t=mt({allowReserved:e,name:a,value:o});t&&i.push(t)}}return i.join(`&`)},bt=e=>{if(!e)return`stream`;let t=e.split(`;`)[0]?.trim();if(t){if(t.startsWith(`application/json`)||t.endsWith(`+json`))return`json`;if(t===`multipart/form-data`)return`formData`;if([`application/`,`audio/`,`image/`,`video/`].some(e=>t.startsWith(e)))return`blob`;if(t.startsWith(`text/`))return`text`}},xt=(e,t)=>t?!!(e.headers.has(t)||e.query?.[t]||e.headers.get(`Cookie`)?.includes(`${t}=`)):!1,St=async({security:e,...t})=>{for(let n of e){if(xt(t,n.name))continue;let e=await ct(n,t.auth);if(!e)continue;let r=n.name??`Authorization`;switch(n.in){case`query`:t.query||={},t.query[r]=e;break;case`cookie`:t.headers.append(`Cookie`,`${r}=${e}`);break;default:t.headers.set(r,e);break}}},Ct=e=>vt({baseUrl:e.baseUrl,path:e.path,query:e.query,querySerializer:typeof e.querySerializer==`function`?e.querySerializer:yt(e.querySerializer),url:e.url}),wt=(e,t)=>{let n={...e,...t};return n.baseUrl?.endsWith(`/`)&&(n.baseUrl=n.baseUrl.substring(0,n.baseUrl.length-1)),n.headers=Tt(e.headers,t.headers),n},Tt=(...e)=>{let t=new Headers;for(let n of e){if(!n||typeof n!=`object`)continue;let e=n instanceof Headers?n.entries():Object.entries(n);for(let[n,r]of e)if(r===null)t.delete(n);else if(Array.isArray(r))for(let e of r)t.append(n,e);else r!==void 0&&t.set(n,typeof r==`object`?JSON.stringify(r):r)}return t};var Et=class{_fns;constructor(){this._fns=[]}clear(){this._fns=[]}getInterceptorIndex(e){return typeof e==`number`?this._fns[e]?e:-1:this._fns.indexOf(e)}exists(e){let t=this.getInterceptorIndex(e);return!!this._fns[t]}eject(e){let t=this.getInterceptorIndex(e);this._fns[t]&&(this._fns[t]=null)}update(e,t){let n=this.getInterceptorIndex(e);return this._fns[n]?(this._fns[n]=t,e):!1}use(e){return this._fns=[...this._fns,e],this._fns.length-1}};const Dt=()=>({error:new Et,request:new Et,response:new Et}),Ot=yt({allowReserved:!1,array:{explode:!0,style:`form`},object:{explode:!0,style:`deepObject`}}),kt={"Content-Type":`application/json`},At=(e={})=>({...lt,headers:kt,parseAs:`auto`,querySerializer:Ot,...e}),jt=(e={})=>{let t=wt(At(),e),n=()=>({...t}),r=e=>(t=wt(t,e),n()),i=Dt(),a=async e=>{let n={...t,...e,fetch:e.fetch??t.fetch??globalThis.fetch,headers:Tt(t.headers,e.headers),serializedBody:void 0};return n.security&&await St({...n,security:n.security}),n.requestValidator&&await n.requestValidator(n),n.body&&n.bodySerializer&&(n.serializedBody=n.bodySerializer(n.body)),(n.serializedBody===void 0||n.serializedBody===``)&&n.headers.delete(`Content-Type`),{opts:n,url:Ct(n)}},o=async e=>{let{opts:t,url:n}=await a(e),r={redirect:`follow`,...t,body:t.serializedBody},o=new Request(n,r);for(let e of i.request._fns)e&&(o=await e(o,t));let s=t.fetch,c=await s(o);for(let e of i.response._fns)e&&(c=await e(c,o,t));let l={request:o,response:c};if(c.ok){if(c.status===204||c.headers.get(`Content-Length`)===`0`)return t.responseStyle===`data`?{}:{data:{},...l};let e=(t.parseAs===`auto`?bt(c.headers.get(`Content-Type`)):t.parseAs)??`json`,n;switch(e){case`arrayBuffer`:case`blob`:case`formData`:case`json`:case`text`:n=await c[e]();break;case`stream`:return t.responseStyle===`data`?c.body:{data:c.body,...l}}return e===`json`&&(t.responseValidator&&await t.responseValidator(n),t.responseTransformer&&(n=await t.responseTransformer(n))),t.responseStyle===`data`?n:{data:n,...l}}let u=await c.text(),d;try{d=JSON.parse(u)}catch{}let f=d??u,p=f;for(let e of i.error._fns)e&&(p=await e(f,c,o,t));if(p||={},t.throwOnError)throw p;return t.responseStyle===`data`?void 0:{error:p,...l}},s=e=>{let t=t=>o({...t,method:e});return t.sse=async t=>{let{opts:n,url:r}=await a(t);return st({...n,body:n.body,headers:n.headers,method:e,url:r})},t};return{buildUrl:Ct,connect:s(`CONNECT`),delete:s(`DELETE`),get:s(`GET`),getConfig:n,head:s(`HEAD`),interceptors:i,options:s(`OPTIONS`),patch:s(`PATCH`),post:s(`POST`),put:s(`PUT`),request:o,setConfig:r,trace:s(`TRACE`)}};Object.entries({$body_:`body`,$headers_:`headers`,$path_:`path`,$query_:`query`});const Mt=jt(At({baseUrl:`http://localhost:4096`}));var U=class{_client=Mt;constructor(e){e?.client&&(this._client=e.client)}},Nt=class extends U{event(e){return(e?.client??this._client).get.sse({url:`/global/event`,...e})}},Pt=class extends U{list(e){return(e?.client??this._client).get({url:`/project`,...e})}current(e){return(e?.client??this._client).get({url:`/project/current`,...e})}},Ft=class extends U{list(e){return(e?.client??this._client).get({url:`/pty`,...e})}create(e){return(e?.client??this._client).post({url:`/pty`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}remove(e){return(e.client??this._client).delete({url:`/pty/{id}`,...e})}get(e){return(e.client??this._client).get({url:`/pty/{id}`,...e})}update(e){return(e.client??this._client).put({url:`/pty/{id}`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}connect(e){return(e.client??this._client).get({url:`/pty/{id}/connect`,...e})}},It=class extends U{get(e){return(e?.client??this._client).get({url:`/config`,...e})}update(e){return(e?.client??this._client).patch({url:`/config`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}providers(e){return(e?.client??this._client).get({url:`/config/providers`,...e})}},Lt=class extends U{ids(e){return(e?.client??this._client).get({url:`/experimental/tool/ids`,...e})}list(e){return(e.client??this._client).get({url:`/experimental/tool`,...e})}},Rt=class extends U{dispose(e){return(e?.client??this._client).post({url:`/instance/dispose`,...e})}},zt=class extends U{get(e){return(e?.client??this._client).get({url:`/path`,...e})}},Bt=class extends U{get(e){return(e?.client??this._client).get({url:`/vcs`,...e})}},Vt=class extends U{list(e){return(e?.client??this._client).get({url:`/session`,...e})}create(e){return(e?.client??this._client).post({url:`/session`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}status(e){return(e?.client??this._client).get({url:`/session/status`,...e})}delete(e){return(e.client??this._client).delete({url:`/session/{id}`,...e})}get(e){return(e.client??this._client).get({url:`/session/{id}`,...e})}update(e){return(e.client??this._client).patch({url:`/session/{id}`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}children(e){return(e.client??this._client).get({url:`/session/{id}/children`,...e})}todo(e){return(e.client??this._client).get({url:`/session/{id}/todo`,...e})}init(e){return(e.client??this._client).post({url:`/session/{id}/init`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}fork(e){return(e.client??this._client).post({url:`/session/{id}/fork`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}abort(e){return(e.client??this._client).post({url:`/session/{id}/abort`,...e})}unshare(e){return(e.client??this._client).delete({url:`/session/{id}/share`,...e})}share(e){return(e.client??this._client).post({url:`/session/{id}/share`,...e})}diff(e){return(e.client??this._client).get({url:`/session/{id}/diff`,...e})}summarize(e){return(e.client??this._client).post({url:`/session/{id}/summarize`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}messages(e){return(e.client??this._client).get({url:`/session/{id}/message`,...e})}prompt(e){return(e.client??this._client).post({url:`/session/{id}/message`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}message(e){return(e.client??this._client).get({url:`/session/{id}/message/{messageID}`,...e})}promptAsync(e){return(e.client??this._client).post({url:`/session/{id}/prompt_async`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}command(e){return(e.client??this._client).post({url:`/session/{id}/command`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}shell(e){return(e.client??this._client).post({url:`/session/{id}/shell`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}revert(e){return(e.client??this._client).post({url:`/session/{id}/revert`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}unrevert(e){return(e.client??this._client).post({url:`/session/{id}/unrevert`,...e})}},Ht=class extends U{list(e){return(e?.client??this._client).get({url:`/command`,...e})}},Ut=class extends U{authorize(e){return(e.client??this._client).post({url:`/provider/{id}/oauth/authorize`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}callback(e){return(e.client??this._client).post({url:`/provider/{id}/oauth/callback`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}},Wt=class extends U{list(e){return(e?.client??this._client).get({url:`/provider`,...e})}auth(e){return(e?.client??this._client).get({url:`/provider/auth`,...e})}oauth=new Ut({client:this._client})},Gt=class extends U{text(e){return(e.client??this._client).get({url:`/find`,...e})}files(e){return(e.client??this._client).get({url:`/find/file`,...e})}symbols(e){return(e.client??this._client).get({url:`/find/symbol`,...e})}},Kt=class extends U{list(e){return(e.client??this._client).get({url:`/file`,...e})}read(e){return(e.client??this._client).get({url:`/file/content`,...e})}status(e){return(e?.client??this._client).get({url:`/file/status`,...e})}},qt=class extends U{log(e){return(e?.client??this._client).post({url:`/log`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}agents(e){return(e?.client??this._client).get({url:`/agent`,...e})}},Jt=class extends U{remove(e){return(e.client??this._client).delete({url:`/mcp/{name}/auth`,...e})}start(e){return(e.client??this._client).post({url:`/mcp/{name}/auth`,...e})}callback(e){return(e.client??this._client).post({url:`/mcp/{name}/auth/callback`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}authenticate(e){return(e.client??this._client).post({url:`/mcp/{name}/auth/authenticate`,...e})}set(e){return(e.client??this._client).put({url:`/auth/{id}`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}},Yt=class extends U{status(e){return(e?.client??this._client).get({url:`/mcp`,...e})}add(e){return(e?.client??this._client).post({url:`/mcp`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}connect(e){return(e.client??this._client).post({url:`/mcp/{name}/connect`,...e})}disconnect(e){return(e.client??this._client).post({url:`/mcp/{name}/disconnect`,...e})}auth=new Jt({client:this._client})},Xt=class extends U{status(e){return(e?.client??this._client).get({url:`/lsp`,...e})}},Zt=class extends U{status(e){return(e?.client??this._client).get({url:`/formatter`,...e})}},Qt=class extends U{next(e){return(e?.client??this._client).get({url:`/tui/control/next`,...e})}response(e){return(e?.client??this._client).post({url:`/tui/control/response`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}},$t=class extends U{appendPrompt(e){return(e?.client??this._client).post({url:`/tui/append-prompt`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}openHelp(e){return(e?.client??this._client).post({url:`/tui/open-help`,...e})}openSessions(e){return(e?.client??this._client).post({url:`/tui/open-sessions`,...e})}openThemes(e){return(e?.client??this._client).post({url:`/tui/open-themes`,...e})}openModels(e){return(e?.client??this._client).post({url:`/tui/open-models`,...e})}submitPrompt(e){return(e?.client??this._client).post({url:`/tui/submit-prompt`,...e})}clearPrompt(e){return(e?.client??this._client).post({url:`/tui/clear-prompt`,...e})}executeCommand(e){return(e?.client??this._client).post({url:`/tui/execute-command`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}showToast(e){return(e?.client??this._client).post({url:`/tui/show-toast`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}publish(e){return(e?.client??this._client).post({url:`/tui/publish`,...e,headers:{"Content-Type":`application/json`,...e?.headers}})}control=new Qt({client:this._client})},en=class extends U{subscribe(e){return(e?.client??this._client).get.sse({url:`/event`,...e})}},tn=class extends U{postSessionIdPermissionsPermissionId(e){return(e.client??this._client).post({url:`/session/{id}/permissions/{permissionID}`,...e,headers:{"Content-Type":`application/json`,...e.headers}})}global=new Nt({client:this._client});project=new Pt({client:this._client});pty=new Ft({client:this._client});config=new It({client:this._client});tool=new Lt({client:this._client});instance=new Rt({client:this._client});path=new zt({client:this._client});vcs=new Bt({client:this._client});session=new Vt({client:this._client});command=new Ht({client:this._client});provider=new Wt({client:this._client});find=new Gt({client:this._client});file=new Kt({client:this._client});app=new qt({client:this._client});mcp=new Yt({client:this._client});lsp=new Xt({client:this._client});formatter=new Zt({client:this._client});tui=new $t({client:this._client});auth=new Jt({client:this._client});event=new en({client:this._client})};function nn(e){if(!e?.fetch){let t=e=>(e.timeout=!1,fetch(e));e={...e,fetch:t}}return e?.directory&&(e.headers={...e.headers,"x-opencode-directory":encodeURIComponent(e.directory)}),new tn({client:jt(e)})}async function rn(e){e=Object.assign({hostname:`127.0.0.1`,port:4096,timeout:5e3},e??{});let t=[`serve`,`--hostname=${e.hostname}`,`--port=${e.port}`];e.config?.logLevel&&t.push(`--log-level=${e.config.logLevel}`);let n=ke(`opencode`,t,{signal:e.signal,env:{...process.env,OPENCODE_CONFIG_CONTENT:JSON.stringify(e.config??{})}});return{url:await new Promise((t,r)=>{let i=setTimeout(()=>{r(Error(`Timeout waiting for server to start after ${e.timeout}ms`))},e.timeout),a=``;n.stdout?.on(`data`,e=>{a+=e.toString();let n=a.split(`
`);for(let e of n)if(e.startsWith(`opencode server listening`)){let n=e.match(/on\s+(https?:\/\/[^\s]+)/);if(!n)throw Error(`Failed to parse server url from output: ${e}`);clearTimeout(i),t(n[1]);return}}),n.stderr?.on(`data`,e=>{a+=e.toString()}),n.on(`exit`,e=>{clearTimeout(i);let t=`Server exited with code ${e}`;a.trim()&&(t+=`\nServer output: ${a}`),r(Error(t))}),n.on(`error`,e=>{clearTimeout(i),r(e)}),e.signal&&e.signal.addEventListener(`abort`,()=>{clearTimeout(i),r(Error(`Aborted`))})}),close(){n.kill()}}}async function an(e){let t=await rn({...e});return{client:nn({baseUrl:t.url}),server:t}}async function on(e){if(e<0||!Number.isFinite(e))throw Error(`Invalid sleep duration: ${e}`);return new Promise(t=>setTimeout(t,e))}const sn={todowrite:[`Todo`,`\x1B[33m\x1B[1m`],todoread:[`Todo`,`\x1B[33m\x1B[1m`],bash:[`Bash`,`\x1B[31m\x1B[1m`],edit:[`Edit`,`\x1B[32m\x1B[1m`],glob:[`Glob`,`\x1B[34m\x1B[1m`],grep:[`Grep`,`\x1B[34m\x1B[1m`],list:[`List`,`\x1B[34m\x1B[1m`],read:[`Read`,`\x1B[35m\x1B[1m`],write:[`Write`,`\x1B[32m\x1B[1m`],websearch:[`Search`,`\x1B[2m\x1B[1m`]},cn=`\x1B[0m`;function ln(){return R.env.NO_COLOR==null}function un(e,t){let[n,r]=sn[e.toLowerCase()]??[e,`\x1B[36m\x1B[1m`],i=n.padEnd(10,` `);ln()?R.stdout.write(`\n${r}|${cn}[2m ${i} ${cn}${t}\n`):R.stdout.write(`\n| ${i} ${t}\n`)}function dn(e){R.stdout.write(`\n${e}\n`)}const fn={api_error:`API Error`,configuration:`Configuration Error`,internal:`Internal Error`,llm_fetch_error:`LLM Fetch Error`,llm_timeout:`LLM Timeout`,permission:`Permission Error`,rate_limit:`Rate Limit`,validation:`Validation Error`};function pn(e){return e.type===`rate_limit`?`:warning:`:e.type===`llm_timeout`?`:hourglass:`:e.type===`llm_fetch_error`||e.retryable?`:warning:`:`:x:`}function mn(e){let t=pn(e),n=fn[e.type],r=[];return r.push(`${t} **${n}**`),r.push(``),r.push(e.message),e.details!=null&&(r.push(``),r.push(`> ${e.details}`)),e.suggestedAction!=null&&(r.push(``),r.push(`**Suggested action:** ${e.suggestedAction}`)),e.retryable&&(r.push(``),r.push(`_This error is retryable._`)),e.resetTime!=null&&(r.push(``),r.push(`_Rate limit resets at: ${e.resetTime.toISOString()}_`)),r.join(`
`)}function hn(e,t,n,r){return{type:e,message:t,retryable:n,details:r?.details,suggestedAction:r?.suggestedAction,resetTime:r?.resetTime}}const gn=[/fetch failed/i,/connect\s*timeout/i,/connecttimeouterror/i,/timed?\s*out/i,/econnrefused/i,/econnreset/i,/etimedout/i,/network error/i];function _n(e){if(e==null)return!1;let t=``;if(typeof e==`string`)t=e;else if(e instanceof Error)t=e.message,`cause`in e&&typeof e.cause==`string`&&(t+=` ${e.cause}`);else if(typeof e==`object`){let n=e;typeof n.message==`string`&&(t=n.message),typeof n.cause==`string`&&(t+=` ${n.cause}`)}return gn.some(e=>e.test(t))}function vn(e,t){return hn(`llm_fetch_error`,`LLM request failed: ${e}`,!0,{details:t==null?void 0:`Model: ${t}`,suggestedAction:`This is a transient network error. The request may succeed on retry, or try a different model.`})}const yn=[/agent\s+not\s+found/i,/unknown\s+agent/i,/invalid\s+agent/i,/agent\s+\S+\s+does\s+not\s+exist/i,/no\s+agent\s+named/i,/agent\s+\S+\s+is\s+not\s+available/i];function bn(e){if(e==null)return!1;let t=``;if(typeof e==`string`)t=e;else if(e instanceof Error)t=e.message;else if(typeof e==`object`){let n=e;typeof n.message==`string`&&(t=n.message)}return yn.some(e=>e.test(t))}function xn(e,t){return hn(`configuration`,`Agent error: ${e}`,!1,{details:t==null?void 0:`Requested agent: ${t}`,suggestedAction:`Verify the agent name is correct and the required plugins (e.g., oMo) are installed.`})}function Sn(e){try{let t=new URL(e);return t.hostname===`github.com`||t.hostname===`api.github.com`}catch{return!1}}function Cn(e){try{let t=new URL(e);return t.hostname===`github.com`&&(t.pathname.startsWith(`/user-attachments/assets/`)||t.pathname.startsWith(`/user-attachments/files/`))}catch{return!1}}function wn(e){let t=e.match(/https:\/\/github\.com\/[a-zA-Z0-9-]+\/[\w.-]+\/(?:pull|issues)\/\d+(?:#issuecomment-\d+)?/g)??[];return[...new Set(t)].filter(Sn)}function Tn(e){let t=/\[[\w-]+\s+([a-f0-9]{7,40})\]/g,n=[];for(let r of e.matchAll(t))r[1]!=null&&n.push(r[1]);return[...new Set(n)]}var En=class{constructor(){if(this.payload={},process.env.GITHUB_EVENT_PATH)if(xe(process.env.GITHUB_EVENT_PATH))this.payload=JSON.parse(Se(process.env.GITHUB_EVENT_PATH,{encoding:`utf8`}));else{let e=process.env.GITHUB_EVENT_PATH;process.stdout.write(`GITHUB_EVENT_PATH ${e} does not exist${ye}`)}this.eventName=process.env.GITHUB_EVENT_NAME,this.sha=process.env.GITHUB_SHA,this.ref=process.env.GITHUB_REF,this.workflow=process.env.GITHUB_WORKFLOW,this.action=process.env.GITHUB_ACTION,this.actor=process.env.GITHUB_ACTOR,this.job=process.env.GITHUB_JOB,this.runAttempt=parseInt(process.env.GITHUB_RUN_ATTEMPT,10),this.runNumber=parseInt(process.env.GITHUB_RUN_NUMBER,10),this.runId=parseInt(process.env.GITHUB_RUN_ID,10),this.apiUrl=process.env.GITHUB_API_URL??`https://api.github.com`,this.serverUrl=process.env.GITHUB_SERVER_URL??`https://github.com`,this.graphqlUrl=process.env.GITHUB_GRAPHQL_URL??`https://api.github.com/graphql`}get issue(){let e=this.payload;return Object.assign(Object.assign({},this.repo),{number:(e.issue||e.pull_request||e).number})}get repo(){if(process.env.GITHUB_REPOSITORY){let[e,t]=process.env.GITHUB_REPOSITORY.split(`/`);return{owner:e,repo:t}}if(this.payload.repository)return{owner:this.payload.repository.owner.login,repo:this.payload.repository.name};throw Error(`context.repo requires a GITHUB_REPOSITORY environment variable like 'owner/repo'`)}},Dn=g((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getProxyUrl=t,e.checkBypass=n;function t(e){let t=e.protocol===`https:`;if(n(e))return;let r=t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY;if(r)try{return new i(r)}catch{if(!r.startsWith(`http://`)&&!r.startsWith(`https://`))return new i(`http://${r}`)}else return}function n(e){if(!e.hostname)return!1;let t=e.hostname;if(r(t))return!0;let n=process.env.no_proxy||process.env.NO_PROXY||``;if(!n)return!1;let i;e.port?i=Number(e.port):e.protocol===`http:`?i=80:e.protocol===`https:`&&(i=443);let a=[e.hostname.toUpperCase()];typeof i==`number`&&a.push(`${a[0]}:${i}`);for(let e of n.split(`,`).map(e=>e.trim().toUpperCase()).filter(e=>e))if(e===`*`||a.some(t=>t===e||t.endsWith(`.${e}`)||e.startsWith(`.`)&&t.endsWith(`${e}`)))return!0;return!1}function r(e){let t=e.toLowerCase();return t===`localhost`||t.startsWith(`127.`)||t.startsWith(`[::1]`)||t.startsWith(`[0:0:0:0:0:0:0:1]`)}var i=class extends URL{constructor(e,t){super(e,t),this._decodedUsername=decodeURIComponent(super.username),this._decodedPassword=decodeURIComponent(super.password)}get username(){return this._decodedUsername}get password(){return this._decodedPassword}}})),On=ne(g((t=>{var n=t&&t.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),r=t&&t.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),i=t&&t.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(t){if(t&&t.__esModule)return t;var i={};if(t!=null)for(var a=e(t),o=0;o<a.length;o++)a[o]!==`default`&&n(i,t,a[o]);return r(i,t),i}})(),a=t&&t.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,`__esModule`,{value:!0}),t.HttpClient=t.HttpClientResponse=t.HttpClientError=t.MediaTypes=t.Headers=t.HttpCodes=void 0,t.getProxyUrl=m,t.isHttps=b;let o=i(e(`http`)),s=i(e(`https`)),c=i(Dn()),l=i(T()),u=C();var d;(function(e){e[e.OK=200]=`OK`,e[e.MultipleChoices=300]=`MultipleChoices`,e[e.MovedPermanently=301]=`MovedPermanently`,e[e.ResourceMoved=302]=`ResourceMoved`,e[e.SeeOther=303]=`SeeOther`,e[e.NotModified=304]=`NotModified`,e[e.UseProxy=305]=`UseProxy`,e[e.SwitchProxy=306]=`SwitchProxy`,e[e.TemporaryRedirect=307]=`TemporaryRedirect`,e[e.PermanentRedirect=308]=`PermanentRedirect`,e[e.BadRequest=400]=`BadRequest`,e[e.Unauthorized=401]=`Unauthorized`,e[e.PaymentRequired=402]=`PaymentRequired`,e[e.Forbidden=403]=`Forbidden`,e[e.NotFound=404]=`NotFound`,e[e.MethodNotAllowed=405]=`MethodNotAllowed`,e[e.NotAcceptable=406]=`NotAcceptable`,e[e.ProxyAuthenticationRequired=407]=`ProxyAuthenticationRequired`,e[e.RequestTimeout=408]=`RequestTimeout`,e[e.Conflict=409]=`Conflict`,e[e.Gone=410]=`Gone`,e[e.TooManyRequests=429]=`TooManyRequests`,e[e.InternalServerError=500]=`InternalServerError`,e[e.NotImplemented=501]=`NotImplemented`,e[e.BadGateway=502]=`BadGateway`,e[e.ServiceUnavailable=503]=`ServiceUnavailable`,e[e.GatewayTimeout=504]=`GatewayTimeout`})(d||(t.HttpCodes=d={}));var f;(function(e){e.Accept=`accept`,e.ContentType=`content-type`})(f||(t.Headers=f={}));var p;(function(e){e.ApplicationJson=`application/json`})(p||(t.MediaTypes=p={}));function m(e){let t=c.getProxyUrl(new URL(e));return t?t.href:``}let h=[d.MovedPermanently,d.ResourceMoved,d.SeeOther,d.TemporaryRedirect,d.PermanentRedirect],g=[d.BadGateway,d.ServiceUnavailable,d.GatewayTimeout],_=[`OPTIONS`,`GET`,`DELETE`,`HEAD`];var v=class e extends Error{constructor(t,n){super(t),this.name=`HttpClientError`,this.statusCode=n,Object.setPrototypeOf(this,e.prototype)}};t.HttpClientError=v;var y=class{constructor(e){this.message=e}readBody(){return a(this,void 0,void 0,function*(){return new Promise(e=>a(this,void 0,void 0,function*(){let t=Buffer.alloc(0);this.message.on(`data`,e=>{t=Buffer.concat([t,e])}),this.message.on(`end`,()=>{e(t.toString())})}))})}readBodyBuffer(){return a(this,void 0,void 0,function*(){return new Promise(e=>a(this,void 0,void 0,function*(){let t=[];this.message.on(`data`,e=>{t.push(e)}),this.message.on(`end`,()=>{e(Buffer.concat(t))})}))})}};t.HttpClientResponse=y;function b(e){return new URL(e).protocol===`https:`}t.HttpClient=class{constructor(e,t,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=this._getUserAgentWithOrchestrationId(e),this.handlers=t||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(e,t){return a(this,void 0,void 0,function*(){return this.request(`OPTIONS`,e,null,t||{})})}get(e,t){return a(this,void 0,void 0,function*(){return this.request(`GET`,e,null,t||{})})}del(e,t){return a(this,void 0,void 0,function*(){return this.request(`DELETE`,e,null,t||{})})}post(e,t,n){return a(this,void 0,void 0,function*(){return this.request(`POST`,e,t,n||{})})}patch(e,t,n){return a(this,void 0,void 0,function*(){return this.request(`PATCH`,e,t,n||{})})}put(e,t,n){return a(this,void 0,void 0,function*(){return this.request(`PUT`,e,t,n||{})})}head(e,t){return a(this,void 0,void 0,function*(){return this.request(`HEAD`,e,null,t||{})})}sendStream(e,t,n,r){return a(this,void 0,void 0,function*(){return this.request(e,t,n,r)})}getJson(e){return a(this,arguments,void 0,function*(e,t={}){t[f.Accept]=this._getExistingOrDefaultHeader(t,f.Accept,p.ApplicationJson);let n=yield this.get(e,t);return this._processResponse(n,this.requestOptions)})}postJson(e,t){return a(this,arguments,void 0,function*(e,t,n={}){let r=JSON.stringify(t,null,2);n[f.Accept]=this._getExistingOrDefaultHeader(n,f.Accept,p.ApplicationJson),n[f.ContentType]=this._getExistingOrDefaultContentTypeHeader(n,p.ApplicationJson);let i=yield this.post(e,r,n);return this._processResponse(i,this.requestOptions)})}putJson(e,t){return a(this,arguments,void 0,function*(e,t,n={}){let r=JSON.stringify(t,null,2);n[f.Accept]=this._getExistingOrDefaultHeader(n,f.Accept,p.ApplicationJson),n[f.ContentType]=this._getExistingOrDefaultContentTypeHeader(n,p.ApplicationJson);let i=yield this.put(e,r,n);return this._processResponse(i,this.requestOptions)})}patchJson(e,t){return a(this,arguments,void 0,function*(e,t,n={}){let r=JSON.stringify(t,null,2);n[f.Accept]=this._getExistingOrDefaultHeader(n,f.Accept,p.ApplicationJson),n[f.ContentType]=this._getExistingOrDefaultContentTypeHeader(n,p.ApplicationJson);let i=yield this.patch(e,r,n);return this._processResponse(i,this.requestOptions)})}request(e,t,n,r){return a(this,void 0,void 0,function*(){if(this._disposed)throw Error(`Client has already been disposed.`);let i=new URL(t),a=this._prepareRequest(e,i,r),o=this._allowRetries&&_.includes(e)?this._maxRetries+1:1,s=0,c;do{if(c=yield this.requestRaw(a,n),c&&c.message&&c.message.statusCode===d.Unauthorized){let e;for(let t of this.handlers)if(t.canHandleAuthentication(c)){e=t;break}return e?e.handleAuthentication(this,a,n):c}let t=this._maxRedirects;for(;c.message.statusCode&&h.includes(c.message.statusCode)&&this._allowRedirects&&t>0;){let o=c.message.headers.location;if(!o)break;let s=new URL(o);if(i.protocol===`https:`&&i.protocol!==s.protocol&&!this._allowRedirectDowngrade)throw Error(`Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.`);if(yield c.readBody(),s.hostname!==i.hostname)for(let e in r)e.toLowerCase()===`authorization`&&delete r[e];a=this._prepareRequest(e,s,r),c=yield this.requestRaw(a,n),t--}if(!c.message.statusCode||!g.includes(c.message.statusCode))return c;s+=1,s<o&&(yield c.readBody(),yield this._performExponentialBackoff(s))}while(s<o);return c})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,t){return a(this,void 0,void 0,function*(){return new Promise((n,r)=>{function i(e,t){e?r(e):t?n(t):r(Error(`Unknown error`))}this.requestRawWithCallback(e,t,i)})})}requestRawWithCallback(e,t,n){typeof t==`string`&&(e.options.headers||(e.options.headers={}),e.options.headers[`Content-Length`]=Buffer.byteLength(t,`utf8`));let r=!1;function i(e,t){r||(r=!0,n(e,t))}let a=e.httpModule.request(e.options,e=>{i(void 0,new y(e))}),o;a.on(`socket`,e=>{o=e}),a.setTimeout(this._socketTimeout||3*6e4,()=>{o&&o.end(),i(Error(`Request timeout: ${e.options.path}`))}),a.on(`error`,function(e){i(e)}),t&&typeof t==`string`&&a.write(t,`utf8`),t&&typeof t!=`string`?(t.on(`close`,function(){a.end()}),t.pipe(a)):a.end()}getAgent(e){let t=new URL(e);return this._getAgent(t)}getAgentDispatcher(e){let t=new URL(e),n=c.getProxyUrl(t);if(n&&n.hostname)return this._getProxyAgentDispatcher(t,n)}_prepareRequest(e,t,n){let r={};r.parsedUrl=t;let i=r.parsedUrl.protocol===`https:`;r.httpModule=i?s:o;let a=i?443:80;if(r.options={},r.options.host=r.parsedUrl.hostname,r.options.port=r.parsedUrl.port?parseInt(r.parsedUrl.port):a,r.options.path=(r.parsedUrl.pathname||``)+(r.parsedUrl.search||``),r.options.method=e,r.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(r.options.headers[`user-agent`]=this.userAgent),r.options.agent=this._getAgent(r.parsedUrl),this.handlers)for(let e of this.handlers)e.prepareRequest(r.options);return r}_mergeHeaders(e){return this.requestOptions&&this.requestOptions.headers?Object.assign({},x(this.requestOptions.headers),x(e||{})):x(e||{})}_getExistingOrDefaultHeader(e,t,n){let r;if(this.requestOptions&&this.requestOptions.headers){let e=x(this.requestOptions.headers)[t];e&&(r=typeof e==`number`?e.toString():e)}let i=e[t];return i===void 0?r===void 0?n:r:typeof i==`number`?i.toString():i}_getExistingOrDefaultContentTypeHeader(e,t){let n;if(this.requestOptions&&this.requestOptions.headers){let e=x(this.requestOptions.headers)[f.ContentType];e&&(n=typeof e==`number`?String(e):Array.isArray(e)?e.join(`, `):e)}let r=e[f.ContentType];return r===void 0?n===void 0?t:n:typeof r==`number`?String(r):Array.isArray(r)?r.join(`, `):r}_getAgent(e){let t,n=c.getProxyUrl(e),r=n&&n.hostname;if(this._keepAlive&&r&&(t=this._proxyAgent),r||(t=this._agent),t)return t;let i=e.protocol===`https:`,a=100;if(this.requestOptions&&(a=this.requestOptions.maxSockets||o.globalAgent.maxSockets),n&&n.hostname){let e={maxSockets:a,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},r,o=n.protocol===`https:`;r=i?o?l.httpsOverHttps:l.httpsOverHttp:o?l.httpOverHttps:l.httpOverHttp,t=r(e),this._proxyAgent=t}if(!t){let e={keepAlive:this._keepAlive,maxSockets:a};t=i?new s.Agent(e):new o.Agent(e),this._agent=t}return i&&this._ignoreSslError&&(t.options=Object.assign(t.options||{},{rejectUnauthorized:!1})),t}_getProxyAgentDispatcher(e,t){let n;if(this._keepAlive&&(n=this._proxyAgentDispatcher),n)return n;let r=e.protocol===`https:`;return n=new u.ProxyAgent(Object.assign({uri:t.href,pipelining:this._keepAlive?1:0},(t.username||t.password)&&{token:`Basic ${Buffer.from(`${t.username}:${t.password}`).toString(`base64`)}`})),this._proxyAgentDispatcher=n,r&&this._ignoreSslError&&(n.options=Object.assign(n.options.requestTls||{},{rejectUnauthorized:!1})),n}_getUserAgentWithOrchestrationId(e){let t=e||`actions/http-client`,n=process.env.ACTIONS_ORCHESTRATION_ID;return n?`${t} actions_orchestration_id/${n.replace(/[^a-z0-9_.-]/gi,`_`)}`:t}_performExponentialBackoff(e){return a(this,void 0,void 0,function*(){e=Math.min(10,e);let t=5*2**e;return new Promise(e=>setTimeout(()=>e(),t))})}_processResponse(e,t){return a(this,void 0,void 0,function*(){return new Promise((n,r)=>a(this,void 0,void 0,function*(){let i=e.message.statusCode||0,a={statusCode:i,result:null,headers:{}};i===d.NotFound&&n(a);function o(e,t){if(typeof t==`string`){let e=new Date(t);if(!isNaN(e.valueOf()))return e}return t}let s,c;try{c=yield e.readBody(),c&&c.length>0&&(s=t&&t.deserializeDates?JSON.parse(c,o):JSON.parse(c),a.result=s),a.headers=e.message.headers}catch{}if(i>299){let e;e=s&&s.message?s.message:c&&c.length>0?c:`Failed request: (${i})`;let t=new v(e,i);t.result=a.result,r(t)}else n(a)}))})}};let x=e=>Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})}))(),1),kn=C(),An=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function jn(e,t){if(!e&&!t.auth)throw Error(`Parameter token or opts.auth is required`);if(e&&t.auth)throw Error(`Parameters token and opts.auth may not both be specified`);return typeof t.auth==`string`?t.auth:`token ${e}`}function Mn(e){return new On.HttpClient().getAgent(e)}function Nn(e){return new On.HttpClient().getAgentDispatcher(e)}function Pn(e){let t=Nn(e);return(e,n)=>An(this,void 0,void 0,function*(){return(0,kn.fetch)(e,Object.assign(Object.assign({},n),{dispatcher:t}))})}function Fn(){return process.env.GITHUB_API_URL||`https://api.github.com`}function In(){return typeof navigator==`object`&&`userAgent`in navigator?navigator.userAgent:typeof process==`object`&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:`<environment undetectable>`}function Ln(e,t,n,r){if(typeof n!=`function`)throw Error(`method for before hook must be a function`);return r||={},Array.isArray(t)?t.reverse().reduce((t,n)=>Ln.bind(null,e,n,t,r),n)():Promise.resolve().then(()=>e.registry[t]?e.registry[t].reduce((e,t)=>t.hook.bind(null,e,r),n)():n(r))}function Rn(e,t,n,r){let i=r;e.registry[n]||(e.registry[n]=[]),t===`before`&&(r=(e,t)=>Promise.resolve().then(i.bind(null,t)).then(e.bind(null,t))),t===`after`&&(r=(e,t)=>{let n;return Promise.resolve().then(e.bind(null,t)).then(e=>(n=e,i(n,t))).then(()=>n)}),t===`error`&&(r=(e,t)=>Promise.resolve().then(e.bind(null,t)).catch(e=>i(e,t))),e.registry[n].push({hook:r,orig:i})}function zn(e,t,n){if(!e.registry[t])return;let r=e.registry[t].map(e=>e.orig).indexOf(n);r!==-1&&e.registry[t].splice(r,1)}const Bn=Function.bind,Vn=Bn.bind(Bn);function Hn(e,t,n){let r=Vn(zn,null).apply(null,n?[t,n]:[t]);e.api={remove:r},e.remove=r,[`before`,`error`,`after`,`wrap`].forEach(r=>{let i=n?[t,r,n]:[t,r];e[r]=e.api[r]=Vn(Rn,null).apply(null,i)})}function Un(){let e=Symbol(`Singular`),t={registry:{}},n=Ln.bind(null,t,e);return Hn(n,t,e),n}function Wn(){let e={registry:{}},t=Ln.bind(null,e);return Hn(t,e),t}var Gn={Singular:Un,Collection:Wn},Kn=`octokit-endpoint.js/0.0.0-development ${In()}`,qn={method:`GET`,baseUrl:`https://api.github.com`,headers:{accept:`application/vnd.github.v3+json`,"user-agent":Kn},mediaType:{format:``}};function Jn(e){return e?Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{}):{}}function Yn(e){if(typeof e!=`object`||!e||Object.prototype.toString.call(e)!==`[object Object]`)return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let n=Object.prototype.hasOwnProperty.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}function Xn(e,t){let n=Object.assign({},e);return Object.keys(t).forEach(r=>{Yn(t[r])&&r in e?n[r]=Xn(e[r],t[r]):Object.assign(n,{[r]:t[r]})}),n}function Zn(e){for(let t in e)e[t]===void 0&&delete e[t];return e}function Qn(e,t,n){if(typeof t==`string`){let[e,r]=t.split(` `);n=Object.assign(r?{method:e,url:r}:{url:e},n)}else n=Object.assign({},t);n.headers=Jn(n.headers),Zn(n),Zn(n.headers);let r=Xn(e||{},n);return n.url===`/graphql`&&(e&&e.mediaType.previews?.length&&(r.mediaType.previews=e.mediaType.previews.filter(e=>!r.mediaType.previews.includes(e)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(e=>e.replace(/-preview/,``))),r}function $n(e,t){let n=/\?/.test(e)?`&`:`?`,r=Object.keys(t);return r.length===0?e:e+n+r.map(e=>e===`q`?`q=`+t.q.split(`+`).map(encodeURIComponent).join(`+`):`${e}=${encodeURIComponent(t[e])}`).join(`&`)}var er=/\{[^{}}]+\}/g;function tr(e){return e.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,``).split(/,/)}function nr(e){let t=e.match(er);return t?t.map(tr).reduce((e,t)=>e.concat(t),[]):[]}function rr(e,t){let n={__proto__:null};for(let r of Object.keys(e))t.indexOf(r)===-1&&(n[r]=e[r]);return n}function ir(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,`[`).replace(/%5D/g,`]`)),e}).join(``)}function W(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return`%`+e.charCodeAt(0).toString(16).toUpperCase()})}function ar(e,t,n){return t=e===`+`||e===`#`?ir(t):W(t),n?W(n)+`=`+t:t}function G(e){return e!=null}function or(e){return e===`;`||e===`&`||e===`?`}function sr(e,t,n,r){var i=e[n],a=[];if(G(i)&&i!==``)if(typeof i==`string`||typeof i==`number`||typeof i==`boolean`)i=i.toString(),r&&r!==`*`&&(i=i.substring(0,parseInt(r,10))),a.push(ar(t,i,or(t)?n:``));else if(r===`*`)Array.isArray(i)?i.filter(G).forEach(function(e){a.push(ar(t,e,or(t)?n:``))}):Object.keys(i).forEach(function(e){G(i[e])&&a.push(ar(t,i[e],e))});else{let e=[];Array.isArray(i)?i.filter(G).forEach(function(n){e.push(ar(t,n))}):Object.keys(i).forEach(function(n){G(i[n])&&(e.push(W(n)),e.push(ar(t,i[n].toString())))}),or(t)?a.push(W(n)+`=`+e.join(`,`)):e.length!==0&&a.push(e.join(`,`))}else t===`;`?G(i)&&a.push(W(n)):i===``&&(t===`&`||t===`?`)?a.push(W(n)+`=`):i===``&&a.push(``);return a}function cr(e){return{expand:lr.bind(null,e)}}function lr(e,t){var n=[`+`,`#`,`.`,`/`,`;`,`?`,`&`];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(e,r,i){if(r){let e=``,i=[];if(n.indexOf(r.charAt(0))!==-1&&(e=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach(function(n){var r=/([^:\*]*)(?::(\d+)|(\*))?/.exec(n);i.push(sr(t,e,r[1],r[2]||r[3]))}),e&&e!==`+`){var a=`,`;return e===`?`?a=`&`:e!==`#`&&(a=e),(i.length===0?``:e)+i.join(a)}else return i.join(`,`)}else return ir(i)}),e===`/`?e:e.replace(/\/$/,``)}function ur(e){let t=e.method.toUpperCase(),n=(e.url||`/`).replace(/:([a-z]\w+)/g,`{$1}`),r=Object.assign({},e.headers),i,a=rr(e,[`method`,`baseUrl`,`url`,`headers`,`request`,`mediaType`]),o=nr(n);n=cr(n).expand(a),/^http/.test(n)||(n=e.baseUrl+n);let s=rr(a,Object.keys(e).filter(e=>o.includes(e)).concat(`baseUrl`));return/application\/octet-stream/i.test(r.accept)||(e.mediaType.format&&(r.accept=r.accept.split(/,/).map(t=>t.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(`,`)),n.endsWith(`/graphql`)&&e.mediaType.previews?.length&&(r.accept=(r.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[]).concat(e.mediaType.previews).map(t=>`application/vnd.github.${t}-preview${e.mediaType.format?`.${e.mediaType.format}`:`+json`}`).join(`,`))),[`GET`,`HEAD`].includes(t)?n=$n(n,s):`data`in s?i=s.data:Object.keys(s).length&&(i=s),!r[`content-type`]&&i!==void 0&&(r[`content-type`]=`application/json; charset=utf-8`),[`PATCH`,`PUT`].includes(t)&&i===void 0&&(i=``),Object.assign({method:t,url:n,headers:r},i===void 0?null:{body:i},e.request?{request:e.request}:null)}function dr(e,t,n){return ur(Qn(e,t,n))}function fr(e,t){let n=Qn(e,t),r=dr.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:fr.bind(null,n),merge:Qn.bind(null,n),parse:ur})}var pr=fr(null,qn),mr=g(((e,t)=>{let n=function(){};n.prototype=Object.create(null);let r=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,i=/\\([\v\u0020-\u00ff])/gu,a=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,o={type:``,parameters:new n};Object.freeze(o.parameters),Object.freeze(o);function s(e){if(typeof e!=`string`)throw TypeError(`argument header is required and must be a string`);let t=e.indexOf(`;`),o=t===-1?e.trim():e.slice(0,t).trim();if(a.test(o)===!1)throw TypeError(`invalid media type`);let s={type:o.toLowerCase(),parameters:new n};if(t===-1)return s;let c,l,u;for(r.lastIndex=t;l=r.exec(e);){if(l.index!==t)throw TypeError(`invalid parameter format`);t+=l[0].length,c=l[1].toLowerCase(),u=l[2],u[0]===`"`&&(u=u.slice(1,u.length-1),i.test(u)&&(u=u.replace(i,`$1`))),s.parameters[c]=u}if(t!==e.length)throw TypeError(`invalid parameter format`);return s}function c(e){if(typeof e!=`string`)return o;let t=e.indexOf(`;`),s=t===-1?e.trim():e.slice(0,t).trim();if(a.test(s)===!1)return o;let c={type:s.toLowerCase(),parameters:new n};if(t===-1)return c;let l,u,d;for(r.lastIndex=t;u=r.exec(e);){if(u.index!==t)return o;t+=u[0].length,l=u[1].toLowerCase(),d=u[2],d[0]===`"`&&(d=d.slice(1,d.length-1),i.test(d)&&(d=d.replace(i,`$1`))),c.parameters[l]=d}return t===e.length?c:o}t.exports.default={parse:s,safeParse:c},t.exports.parse=s,t.exports.safeParse=c,t.exports.defaultContentType=o}))(),hr=class extends Error{name;status;request;response;constructor(e,t,n){super(e,{cause:n.cause}),this.name=`HttpError`,this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),`response`in n&&(this.response=n.response);let r=Object.assign({},n.request);n.request.headers.authorization&&(r.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/(?<! ) .*$/,` [REDACTED]`)})),r.url=r.url.replace(/\bclient_secret=\w+/g,`client_secret=[REDACTED]`).replace(/\baccess_token=\w+/g,`access_token=[REDACTED]`),this.request=r}},gr=`10.0.7`,_r={headers:{"user-agent":`octokit-request.js/${gr} ${In()}`}};function vr(e){if(typeof e!=`object`||!e||Object.prototype.toString.call(e)!==`[object Object]`)return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let n=Object.prototype.hasOwnProperty.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}var yr=()=>``;async function br(e){let t=e.request?.fetch||globalThis.fetch;if(!t)throw Error(`fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing`);let n=e.request?.log||console,r=e.request?.parseSuccessResponseBody!==!1,i=vr(e.body)||Array.isArray(e.body)?JSON.stringify(e.body):e.body,a=Object.fromEntries(Object.entries(e.headers).map(([e,t])=>[e,String(t)])),o;try{o=await t(e.url,{method:e.method,body:i,redirect:e.request?.redirect,headers:a,signal:e.request?.signal,...e.body&&{duplex:`half`}})}catch(t){let n=`Unknown Error`;if(t instanceof Error){if(t.name===`AbortError`)throw t.status=500,t;n=t.message,t.name===`TypeError`&&`cause`in t&&(t.cause instanceof Error?n=t.cause.message:typeof t.cause==`string`&&(n=t.cause))}let r=new hr(n,500,{request:e});throw r.cause=t,r}let s=o.status,c=o.url,l={};for(let[e,t]of o.headers)l[e]=t;let u={url:c,status:s,headers:l,data:``};if(`deprecation`in l){let t=l.link&&l.link.match(/<([^<>]+)>; rel="deprecation"/),r=t&&t.pop();n.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${l.sunset}${r?`. See ${r}`:``}`)}if(s===204||s===205)return u;if(e.method===`HEAD`){if(s<400)return u;throw new hr(o.statusText,s,{response:u,request:e})}if(s===304)throw u.data=await xr(o),new hr(`Not modified`,s,{response:u,request:e});if(s>=400)throw u.data=await xr(o),new hr(Cr(u.data),s,{response:u,request:e});return u.data=r?await xr(o):o.body,u}async function xr(e){let t=e.headers.get(`content-type`);if(!t)return e.text().catch(yr);let n=(0,mr.safeParse)(t);if(Sr(n)){let t=``;try{return t=await e.text(),JSON.parse(t)}catch{return t}}else if(n.type.startsWith(`text/`)||n.parameters.charset?.toLowerCase()===`utf-8`)return e.text().catch(yr);else return e.arrayBuffer().catch(()=>new ArrayBuffer(0))}function Sr(e){return e.type===`application/json`||e.type===`application/scim+json`}function Cr(e){if(typeof e==`string`)return e;if(e instanceof ArrayBuffer)return`Unknown error`;if(`message`in e){let t=`documentation_url`in e?` - ${e.documentation_url}`:``;return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(e=>JSON.stringify(e)).join(`, `)}${t}`:`${e.message}${t}`}return`Unknown error: ${JSON.stringify(e)}`}function wr(e,t){let n=e.defaults(t);return Object.assign(function(e,t){let r=n.merge(e,t);if(!r.request||!r.request.hook)return br(n.parse(r));let i=(e,t)=>br(n.parse(n.merge(e,t)));return Object.assign(i,{endpoint:n,defaults:wr.bind(null,n)}),r.request.hook(i,r)},{endpoint:n,defaults:wr.bind(null,n)})}var Tr=wr(pr,_r),Er=`0.0.0-development`;function Dr(e){return`Request failed due to following response errors:
`+e.errors.map(e=>` - ${e.message}`).join(`
`)}var Or=class extends Error{constructor(e,t,n){super(Dr(n)),this.request=e,this.headers=t,this.response=n,this.errors=n.errors,this.data=n.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name=`GraphqlResponseError`;errors;data},kr=[`method`,`baseUrl`,`url`,`headers`,`request`,`query`,`mediaType`,`operationName`],Ar=[`query`,`method`,`url`],jr=/\/api\/v3\/?$/;function Mr(e,t,n){if(n){if(typeof t==`string`&&`query`in n)return Promise.reject(Error(`[@octokit/graphql] "query" cannot be used as variable name`));for(let e in n)if(Ar.includes(e))return Promise.reject(Error(`[@octokit/graphql] "${e}" cannot be used as variable name`))}let r=typeof t==`string`?Object.assign({query:t},n):t,i=Object.keys(r).reduce((e,t)=>kr.includes(t)?(e[t]=r[t],e):(e.variables||={},e.variables[t]=r[t],e),{}),a=r.baseUrl||e.endpoint.DEFAULTS.baseUrl;return jr.test(a)&&(i.url=a.replace(jr,`/api/graphql`)),e(i).then(e=>{if(e.data.errors){let t={};for(let n of Object.keys(e.headers))t[n]=e.headers[n];throw new Or(i,t,e.data)}return e.data.data})}function Nr(e,t){let n=e.defaults(t);return Object.assign((e,t)=>Mr(n,e,t),{defaults:Nr.bind(null,n),endpoint:n.endpoint})}Nr(Tr,{headers:{"user-agent":`octokit-graphql.js/${Er} ${In()}`},method:`POST`,url:`/graphql`});function Pr(e){return Nr(e,{method:`POST`,url:`/graphql`})}var Fr=`(?:[a-zA-Z0-9_-]+)`,Ir=`\\.`,Lr=RegExp(`^${Fr}${Ir}${Fr}${Ir}${Fr}$`),Rr=Lr.test.bind(Lr);async function zr(e){let t=Rr(e),n=e.startsWith(`v1.`)||e.startsWith(`ghs_`),r=e.startsWith(`ghu_`);return{type:`token`,token:e,tokenType:t?`app`:n?`installation`:r?`user-to-server`:`oauth`}}function Br(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}async function Vr(e,t,n,r){let i=t.endpoint.merge(n,r);return i.headers.authorization=Br(e),t(i)}var Hr=function(e){if(!e)throw Error(`[@octokit/auth-token] No token passed to createTokenAuth`);if(typeof e!=`string`)throw Error(`[@octokit/auth-token] Token passed to createTokenAuth is not a string`);return e=e.replace(/^(token|bearer) +/i,``),Object.assign(zr.bind(null,e),{hook:Vr.bind(null,e)})};const Ur=`7.0.6`,Wr=()=>{},Gr=console.warn.bind(console),Kr=console.error.bind(console);function qr(e={}){return typeof e.debug!=`function`&&(e.debug=Wr),typeof e.info!=`function`&&(e.info=Wr),typeof e.warn!=`function`&&(e.warn=Gr),typeof e.error!=`function`&&(e.error=Kr),e}const Jr=`octokit-core.js/${Ur} ${In()}`;var Yr=class{static VERSION=Ur;static defaults(e){return class extends this{constructor(...t){let n=t[0]||{};if(typeof e==`function`){super(e(n));return}super(Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){let t=this.plugins;return class extends this{static plugins=t.concat(e.filter(e=>!t.includes(e)))}}constructor(e={}){let t=new Gn.Collection,n={baseUrl:Tr.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:t.bind(null,`request`)}),mediaType:{previews:[],format:``}};if(n.headers[`user-agent`]=e.userAgent?`${e.userAgent} ${Jr}`:Jr,e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers[`time-zone`]=e.timeZone),this.request=Tr.defaults(n),this.graphql=Pr(this.request).defaults(n),this.log=qr(e.log),this.hook=t,e.authStrategy){let{authStrategy:n,...r}=e,i=n(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:r},e.auth));t.wrap(`request`,i.hook),this.auth=i}else if(!e.auth)this.auth=async()=>({type:`unauthenticated`});else{let n=Hr(e.auth);t.wrap(`request`,n.hook),this.auth=n}let r=this.constructor;for(let t=0;t<r.plugins.length;++t)Object.assign(this,r.plugins[t](this,e))}request;graphql;log;hook;auth};const Xr=`17.0.0`;var Zr={actions:{addCustomLabelsToSelfHostedRunnerForOrg:[`POST /orgs/{org}/actions/runners/{runner_id}/labels`],addCustomLabelsToSelfHostedRunnerForRepo:[`POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],addRepoAccessToSelfHostedRunnerGroupInOrg:[`PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}`],addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}`],addSelectedRepoToOrgVariable:[`PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}`],approveWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve`],cancelWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel`],createEnvironmentVariable:[`POST /repos/{owner}/{repo}/environments/{environment_name}/variables`],createHostedRunnerForOrg:[`POST /orgs/{org}/actions/hosted-runners`],createOrUpdateEnvironmentSecret:[`PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}`],createOrgVariable:[`POST /orgs/{org}/actions/variables`],createRegistrationTokenForOrg:[`POST /orgs/{org}/actions/runners/registration-token`],createRegistrationTokenForRepo:[`POST /repos/{owner}/{repo}/actions/runners/registration-token`],createRemoveTokenForOrg:[`POST /orgs/{org}/actions/runners/remove-token`],createRemoveTokenForRepo:[`POST /repos/{owner}/{repo}/actions/runners/remove-token`],createRepoVariable:[`POST /repos/{owner}/{repo}/actions/variables`],createWorkflowDispatch:[`POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches`],deleteActionsCacheById:[`DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}`],deleteActionsCacheByKey:[`DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}`],deleteArtifact:[`DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}`],deleteCustomImageFromOrg:[`DELETE /orgs/{org}/actions/hosted-runners/images/custom/{image_definition_id}`],deleteCustomImageVersionFromOrg:[`DELETE /orgs/{org}/actions/hosted-runners/images/custom/{image_definition_id}/versions/{version}`],deleteEnvironmentSecret:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],deleteEnvironmentVariable:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],deleteHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],deleteOrgSecret:[`DELETE /orgs/{org}/actions/secrets/{secret_name}`],deleteOrgVariable:[`DELETE /orgs/{org}/actions/variables/{name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}`],deleteRepoVariable:[`DELETE /repos/{owner}/{repo}/actions/variables/{name}`],deleteSelfHostedRunnerFromOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}`],deleteSelfHostedRunnerFromRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}`],deleteWorkflowRun:[`DELETE /repos/{owner}/{repo}/actions/runs/{run_id}`],deleteWorkflowRunLogs:[`DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs`],disableSelectedRepositoryGithubActionsOrganization:[`DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}`],disableWorkflow:[`PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable`],downloadArtifact:[`GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}`],downloadJobLogsForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs`],downloadWorkflowRunAttemptLogs:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs`],downloadWorkflowRunLogs:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs`],enableSelectedRepositoryGithubActionsOrganization:[`PUT /orgs/{org}/actions/permissions/repositories/{repository_id}`],enableWorkflow:[`PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable`],forceCancelWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel`],generateRunnerJitconfigForOrg:[`POST /orgs/{org}/actions/runners/generate-jitconfig`],generateRunnerJitconfigForRepo:[`POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig`],getActionsCacheList:[`GET /repos/{owner}/{repo}/actions/caches`],getActionsCacheUsage:[`GET /repos/{owner}/{repo}/actions/cache/usage`],getActionsCacheUsageByRepoForOrg:[`GET /orgs/{org}/actions/cache/usage-by-repository`],getActionsCacheUsageForOrg:[`GET /orgs/{org}/actions/cache/usage`],getAllowedActionsOrganization:[`GET /orgs/{org}/actions/permissions/selected-actions`],getAllowedActionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions/selected-actions`],getArtifact:[`GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}`],getCustomImageForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/custom/{image_definition_id}`],getCustomImageVersionForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/custom/{image_definition_id}/versions/{version}`],getCustomOidcSubClaimForRepo:[`GET /repos/{owner}/{repo}/actions/oidc/customization/sub`],getEnvironmentPublicKey:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key`],getEnvironmentSecret:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],getEnvironmentVariable:[`GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],getGithubActionsDefaultWorkflowPermissionsOrganization:[`GET /orgs/{org}/actions/permissions/workflow`],getGithubActionsDefaultWorkflowPermissionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions/workflow`],getGithubActionsPermissionsOrganization:[`GET /orgs/{org}/actions/permissions`],getGithubActionsPermissionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions`],getHostedRunnerForOrg:[`GET /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],getHostedRunnersGithubOwnedImagesForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/github-owned`],getHostedRunnersLimitsForOrg:[`GET /orgs/{org}/actions/hosted-runners/limits`],getHostedRunnersMachineSpecsForOrg:[`GET /orgs/{org}/actions/hosted-runners/machine-sizes`],getHostedRunnersPartnerImagesForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/partner`],getHostedRunnersPlatformsForOrg:[`GET /orgs/{org}/actions/hosted-runners/platforms`],getJobForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/jobs/{job_id}`],getOrgPublicKey:[`GET /orgs/{org}/actions/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/actions/secrets/{secret_name}`],getOrgVariable:[`GET /orgs/{org}/actions/variables/{name}`],getPendingDeploymentsForRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments`],getRepoPermissions:[`GET /repos/{owner}/{repo}/actions/permissions`,{},{renamed:[`actions`,`getGithubActionsPermissionsRepository`]}],getRepoPublicKey:[`GET /repos/{owner}/{repo}/actions/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/actions/secrets/{secret_name}`],getRepoVariable:[`GET /repos/{owner}/{repo}/actions/variables/{name}`],getReviewsForRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals`],getSelfHostedRunnerForOrg:[`GET /orgs/{org}/actions/runners/{runner_id}`],getSelfHostedRunnerForRepo:[`GET /repos/{owner}/{repo}/actions/runners/{runner_id}`],getWorkflow:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}`],getWorkflowAccessToRepository:[`GET /repos/{owner}/{repo}/actions/permissions/access`],getWorkflowRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}`],getWorkflowRunAttempt:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}`],getWorkflowRunUsage:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing`],getWorkflowUsage:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing`],listArtifactsForRepo:[`GET /repos/{owner}/{repo}/actions/artifacts`],listCustomImageVersionsForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/custom/{image_definition_id}/versions`],listCustomImagesForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/custom`],listEnvironmentSecrets:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets`],listEnvironmentVariables:[`GET /repos/{owner}/{repo}/environments/{environment_name}/variables`],listGithubHostedRunnersInGroupForOrg:[`GET /orgs/{org}/actions/runner-groups/{runner_group_id}/hosted-runners`],listHostedRunnersForOrg:[`GET /orgs/{org}/actions/hosted-runners`],listJobsForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs`],listJobsForWorkflowRunAttempt:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs`],listLabelsForSelfHostedRunnerForOrg:[`GET /orgs/{org}/actions/runners/{runner_id}/labels`],listLabelsForSelfHostedRunnerForRepo:[`GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],listOrgSecrets:[`GET /orgs/{org}/actions/secrets`],listOrgVariables:[`GET /orgs/{org}/actions/variables`],listRepoOrganizationSecrets:[`GET /repos/{owner}/{repo}/actions/organization-secrets`],listRepoOrganizationVariables:[`GET /repos/{owner}/{repo}/actions/organization-variables`],listRepoSecrets:[`GET /repos/{owner}/{repo}/actions/secrets`],listRepoVariables:[`GET /repos/{owner}/{repo}/actions/variables`],listRepoWorkflows:[`GET /repos/{owner}/{repo}/actions/workflows`],listRunnerApplicationsForOrg:[`GET /orgs/{org}/actions/runners/downloads`],listRunnerApplicationsForRepo:[`GET /repos/{owner}/{repo}/actions/runners/downloads`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/actions/secrets/{secret_name}/repositories`],listSelectedReposForOrgVariable:[`GET /orgs/{org}/actions/variables/{name}/repositories`],listSelectedRepositoriesEnabledGithubActionsOrganization:[`GET /orgs/{org}/actions/permissions/repositories`],listSelfHostedRunnersForOrg:[`GET /orgs/{org}/actions/runners`],listSelfHostedRunnersForRepo:[`GET /repos/{owner}/{repo}/actions/runners`],listWorkflowRunArtifacts:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts`],listWorkflowRuns:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs`],listWorkflowRunsForRepo:[`GET /repos/{owner}/{repo}/actions/runs`],reRunJobForWorkflowRun:[`POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun`],reRunWorkflow:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun`],reRunWorkflowFailedJobs:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs`],removeAllCustomLabelsFromSelfHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}/labels`],removeAllCustomLabelsFromSelfHostedRunnerForRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],removeCustomLabelFromSelfHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}`],removeCustomLabelFromSelfHostedRunnerForRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}`],removeSelectedRepoFromOrgVariable:[`DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}`],reviewCustomGatesForRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule`],reviewPendingDeploymentsForRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments`],setAllowedActionsOrganization:[`PUT /orgs/{org}/actions/permissions/selected-actions`],setAllowedActionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/selected-actions`],setCustomLabelsForSelfHostedRunnerForOrg:[`PUT /orgs/{org}/actions/runners/{runner_id}/labels`],setCustomLabelsForSelfHostedRunnerForRepo:[`PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],setCustomOidcSubClaimForRepo:[`PUT /repos/{owner}/{repo}/actions/oidc/customization/sub`],setGithubActionsDefaultWorkflowPermissionsOrganization:[`PUT /orgs/{org}/actions/permissions/workflow`],setGithubActionsDefaultWorkflowPermissionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/workflow`],setGithubActionsPermissionsOrganization:[`PUT /orgs/{org}/actions/permissions`],setGithubActionsPermissionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}/repositories`],setSelectedReposForOrgVariable:[`PUT /orgs/{org}/actions/variables/{name}/repositories`],setSelectedRepositoriesEnabledGithubActionsOrganization:[`PUT /orgs/{org}/actions/permissions/repositories`],setWorkflowAccessToRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/access`],updateEnvironmentVariable:[`PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],updateHostedRunnerForOrg:[`PATCH /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],updateOrgVariable:[`PATCH /orgs/{org}/actions/variables/{name}`],updateRepoVariable:[`PATCH /repos/{owner}/{repo}/actions/variables/{name}`]},activity:{checkRepoIsStarredByAuthenticatedUser:[`GET /user/starred/{owner}/{repo}`],deleteRepoSubscription:[`DELETE /repos/{owner}/{repo}/subscription`],deleteThreadSubscription:[`DELETE /notifications/threads/{thread_id}/subscription`],getFeeds:[`GET /feeds`],getRepoSubscription:[`GET /repos/{owner}/{repo}/subscription`],getThread:[`GET /notifications/threads/{thread_id}`],getThreadSubscriptionForAuthenticatedUser:[`GET /notifications/threads/{thread_id}/subscription`],listEventsForAuthenticatedUser:[`GET /users/{username}/events`],listNotificationsForAuthenticatedUser:[`GET /notifications`],listOrgEventsForAuthenticatedUser:[`GET /users/{username}/events/orgs/{org}`],listPublicEvents:[`GET /events`],listPublicEventsForRepoNetwork:[`GET /networks/{owner}/{repo}/events`],listPublicEventsForUser:[`GET /users/{username}/events/public`],listPublicOrgEvents:[`GET /orgs/{org}/events`],listReceivedEventsForUser:[`GET /users/{username}/received_events`],listReceivedPublicEventsForUser:[`GET /users/{username}/received_events/public`],listRepoEvents:[`GET /repos/{owner}/{repo}/events`],listRepoNotificationsForAuthenticatedUser:[`GET /repos/{owner}/{repo}/notifications`],listReposStarredByAuthenticatedUser:[`GET /user/starred`],listReposStarredByUser:[`GET /users/{username}/starred`],listReposWatchedByUser:[`GET /users/{username}/subscriptions`],listStargazersForRepo:[`GET /repos/{owner}/{repo}/stargazers`],listWatchedReposForAuthenticatedUser:[`GET /user/subscriptions`],listWatchersForRepo:[`GET /repos/{owner}/{repo}/subscribers`],markNotificationsAsRead:[`PUT /notifications`],markRepoNotificationsAsRead:[`PUT /repos/{owner}/{repo}/notifications`],markThreadAsDone:[`DELETE /notifications/threads/{thread_id}`],markThreadAsRead:[`PATCH /notifications/threads/{thread_id}`],setRepoSubscription:[`PUT /repos/{owner}/{repo}/subscription`],setThreadSubscription:[`PUT /notifications/threads/{thread_id}/subscription`],starRepoForAuthenticatedUser:[`PUT /user/starred/{owner}/{repo}`],unstarRepoForAuthenticatedUser:[`DELETE /user/starred/{owner}/{repo}`]},apps:{addRepoToInstallation:[`PUT /user/installations/{installation_id}/repositories/{repository_id}`,{},{renamed:[`apps`,`addRepoToInstallationForAuthenticatedUser`]}],addRepoToInstallationForAuthenticatedUser:[`PUT /user/installations/{installation_id}/repositories/{repository_id}`],checkToken:[`POST /applications/{client_id}/token`],createFromManifest:[`POST /app-manifests/{code}/conversions`],createInstallationAccessToken:[`POST /app/installations/{installation_id}/access_tokens`],deleteAuthorization:[`DELETE /applications/{client_id}/grant`],deleteInstallation:[`DELETE /app/installations/{installation_id}`],deleteToken:[`DELETE /applications/{client_id}/token`],getAuthenticated:[`GET /app`],getBySlug:[`GET /apps/{app_slug}`],getInstallation:[`GET /app/installations/{installation_id}`],getOrgInstallation:[`GET /orgs/{org}/installation`],getRepoInstallation:[`GET /repos/{owner}/{repo}/installation`],getSubscriptionPlanForAccount:[`GET /marketplace_listing/accounts/{account_id}`],getSubscriptionPlanForAccountStubbed:[`GET /marketplace_listing/stubbed/accounts/{account_id}`],getUserInstallation:[`GET /users/{username}/installation`],getWebhookConfigForApp:[`GET /app/hook/config`],getWebhookDelivery:[`GET /app/hook/deliveries/{delivery_id}`],listAccountsForPlan:[`GET /marketplace_listing/plans/{plan_id}/accounts`],listAccountsForPlanStubbed:[`GET /marketplace_listing/stubbed/plans/{plan_id}/accounts`],listInstallationReposForAuthenticatedUser:[`GET /user/installations/{installation_id}/repositories`],listInstallationRequestsForAuthenticatedApp:[`GET /app/installation-requests`],listInstallations:[`GET /app/installations`],listInstallationsForAuthenticatedUser:[`GET /user/installations`],listPlans:[`GET /marketplace_listing/plans`],listPlansStubbed:[`GET /marketplace_listing/stubbed/plans`],listReposAccessibleToInstallation:[`GET /installation/repositories`],listSubscriptionsForAuthenticatedUser:[`GET /user/marketplace_purchases`],listSubscriptionsForAuthenticatedUserStubbed:[`GET /user/marketplace_purchases/stubbed`],listWebhookDeliveries:[`GET /app/hook/deliveries`],redeliverWebhookDelivery:[`POST /app/hook/deliveries/{delivery_id}/attempts`],removeRepoFromInstallation:[`DELETE /user/installations/{installation_id}/repositories/{repository_id}`,{},{renamed:[`apps`,`removeRepoFromInstallationForAuthenticatedUser`]}],removeRepoFromInstallationForAuthenticatedUser:[`DELETE /user/installations/{installation_id}/repositories/{repository_id}`],resetToken:[`PATCH /applications/{client_id}/token`],revokeInstallationAccessToken:[`DELETE /installation/token`],scopeToken:[`POST /applications/{client_id}/token/scoped`],suspendInstallation:[`PUT /app/installations/{installation_id}/suspended`],unsuspendInstallation:[`DELETE /app/installations/{installation_id}/suspended`],updateWebhookConfigForApp:[`PATCH /app/hook/config`]},billing:{getGithubActionsBillingOrg:[`GET /orgs/{org}/settings/billing/actions`],getGithubActionsBillingUser:[`GET /users/{username}/settings/billing/actions`],getGithubBillingPremiumRequestUsageReportOrg:[`GET /organizations/{org}/settings/billing/premium_request/usage`],getGithubBillingPremiumRequestUsageReportUser:[`GET /users/{username}/settings/billing/premium_request/usage`],getGithubBillingUsageReportOrg:[`GET /organizations/{org}/settings/billing/usage`],getGithubBillingUsageReportUser:[`GET /users/{username}/settings/billing/usage`],getGithubPackagesBillingOrg:[`GET /orgs/{org}/settings/billing/packages`],getGithubPackagesBillingUser:[`GET /users/{username}/settings/billing/packages`],getSharedStorageBillingOrg:[`GET /orgs/{org}/settings/billing/shared-storage`],getSharedStorageBillingUser:[`GET /users/{username}/settings/billing/shared-storage`]},campaigns:{createCampaign:[`POST /orgs/{org}/campaigns`],deleteCampaign:[`DELETE /orgs/{org}/campaigns/{campaign_number}`],getCampaignSummary:[`GET /orgs/{org}/campaigns/{campaign_number}`],listOrgCampaigns:[`GET /orgs/{org}/campaigns`],updateCampaign:[`PATCH /orgs/{org}/campaigns/{campaign_number}`]},checks:{create:[`POST /repos/{owner}/{repo}/check-runs`],createSuite:[`POST /repos/{owner}/{repo}/check-suites`],get:[`GET /repos/{owner}/{repo}/check-runs/{check_run_id}`],getSuite:[`GET /repos/{owner}/{repo}/check-suites/{check_suite_id}`],listAnnotations:[`GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations`],listForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/check-runs`],listForSuite:[`GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs`],listSuitesForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/check-suites`],rerequestRun:[`POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest`],rerequestSuite:[`POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest`],setSuitesPreferences:[`PATCH /repos/{owner}/{repo}/check-suites/preferences`],update:[`PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}`]},codeScanning:{commitAutofix:[`POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits`],createAutofix:[`POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix`],createVariantAnalysis:[`POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses`],deleteAnalysis:[`DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}`],deleteCodeqlDatabase:[`DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}`],getAlert:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}`,{},{renamedParameters:{alert_id:`alert_number`}}],getAnalysis:[`GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}`],getAutofix:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix`],getCodeqlDatabase:[`GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}`],getDefaultSetup:[`GET /repos/{owner}/{repo}/code-scanning/default-setup`],getSarif:[`GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}`],getVariantAnalysis:[`GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}`],getVariantAnalysisRepoTask:[`GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}`],listAlertInstances:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances`],listAlertsForOrg:[`GET /orgs/{org}/code-scanning/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/code-scanning/alerts`],listAlertsInstances:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances`,{},{renamed:[`codeScanning`,`listAlertInstances`]}],listCodeqlDatabases:[`GET /repos/{owner}/{repo}/code-scanning/codeql/databases`],listRecentAnalyses:[`GET /repos/{owner}/{repo}/code-scanning/analyses`],updateAlert:[`PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}`],updateDefaultSetup:[`PATCH /repos/{owner}/{repo}/code-scanning/default-setup`],uploadSarif:[`POST /repos/{owner}/{repo}/code-scanning/sarifs`]},codeSecurity:{attachConfiguration:[`POST /orgs/{org}/code-security/configurations/{configuration_id}/attach`],attachEnterpriseConfiguration:[`POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach`],createConfiguration:[`POST /orgs/{org}/code-security/configurations`],createConfigurationForEnterprise:[`POST /enterprises/{enterprise}/code-security/configurations`],deleteConfiguration:[`DELETE /orgs/{org}/code-security/configurations/{configuration_id}`],deleteConfigurationForEnterprise:[`DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}`],detachConfiguration:[`DELETE /orgs/{org}/code-security/configurations/detach`],getConfiguration:[`GET /orgs/{org}/code-security/configurations/{configuration_id}`],getConfigurationForRepository:[`GET /repos/{owner}/{repo}/code-security-configuration`],getConfigurationsForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations`],getConfigurationsForOrg:[`GET /orgs/{org}/code-security/configurations`],getDefaultConfigurations:[`GET /orgs/{org}/code-security/configurations/defaults`],getDefaultConfigurationsForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations/defaults`],getRepositoriesForConfiguration:[`GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories`],getRepositoriesForEnterpriseConfiguration:[`GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories`],getSingleConfigurationForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}`],setConfigurationAsDefault:[`PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults`],setConfigurationAsDefaultForEnterprise:[`PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults`],updateConfiguration:[`PATCH /orgs/{org}/code-security/configurations/{configuration_id}`],updateEnterpriseConfiguration:[`PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}`]},codesOfConduct:{getAllCodesOfConduct:[`GET /codes_of_conduct`],getConductCode:[`GET /codes_of_conduct/{key}`]},codespaces:{addRepositoryForSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}`],addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}`],checkPermissionsForDevcontainer:[`GET /repos/{owner}/{repo}/codespaces/permissions_check`],codespaceMachinesForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}/machines`],createForAuthenticatedUser:[`POST /user/codespaces`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],createOrUpdateSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}`],createWithPrForAuthenticatedUser:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces`],createWithRepoForAuthenticatedUser:[`POST /repos/{owner}/{repo}/codespaces`],deleteForAuthenticatedUser:[`DELETE /user/codespaces/{codespace_name}`],deleteFromOrganization:[`DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}`],deleteOrgSecret:[`DELETE /orgs/{org}/codespaces/secrets/{secret_name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],deleteSecretForAuthenticatedUser:[`DELETE /user/codespaces/secrets/{secret_name}`],exportForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/exports`],getCodespacesForUserInOrg:[`GET /orgs/{org}/members/{username}/codespaces`],getExportDetailsForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}/exports/{export_id}`],getForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}`],getOrgPublicKey:[`GET /orgs/{org}/codespaces/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/codespaces/secrets/{secret_name}`],getPublicKeyForAuthenticatedUser:[`GET /user/codespaces/secrets/public-key`],getRepoPublicKey:[`GET /repos/{owner}/{repo}/codespaces/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],getSecretForAuthenticatedUser:[`GET /user/codespaces/secrets/{secret_name}`],listDevcontainersInRepositoryForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/devcontainers`],listForAuthenticatedUser:[`GET /user/codespaces`],listInOrganization:[`GET /orgs/{org}/codespaces`,{},{renamedParameters:{org_id:`org`}}],listInRepositoryForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces`],listOrgSecrets:[`GET /orgs/{org}/codespaces/secrets`],listRepoSecrets:[`GET /repos/{owner}/{repo}/codespaces/secrets`],listRepositoriesForSecretForAuthenticatedUser:[`GET /user/codespaces/secrets/{secret_name}/repositories`],listSecretsForAuthenticatedUser:[`GET /user/codespaces/secrets`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories`],preFlightWithRepoForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/new`],publishForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/publish`],removeRepositoryForSecretForAuthenticatedUser:[`DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}`],repoMachinesForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/machines`],setRepositoriesForSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}/repositories`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories`],startForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/start`],stopForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/stop`],stopInOrganization:[`POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop`],updateForAuthenticatedUser:[`PATCH /user/codespaces/{codespace_name}`]},copilot:{addCopilotSeatsForTeams:[`POST /orgs/{org}/copilot/billing/selected_teams`],addCopilotSeatsForUsers:[`POST /orgs/{org}/copilot/billing/selected_users`],cancelCopilotSeatAssignmentForTeams:[`DELETE /orgs/{org}/copilot/billing/selected_teams`],cancelCopilotSeatAssignmentForUsers:[`DELETE /orgs/{org}/copilot/billing/selected_users`],copilotMetricsForOrganization:[`GET /orgs/{org}/copilot/metrics`],copilotMetricsForTeam:[`GET /orgs/{org}/team/{team_slug}/copilot/metrics`],getCopilotOrganizationDetails:[`GET /orgs/{org}/copilot/billing`],getCopilotSeatDetailsForUser:[`GET /orgs/{org}/members/{username}/copilot`],listCopilotSeats:[`GET /orgs/{org}/copilot/billing/seats`]},credentials:{revoke:[`POST /credentials/revoke`]},dependabot:{addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],deleteOrgSecret:[`DELETE /orgs/{org}/dependabot/secrets/{secret_name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],getAlert:[`GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}`],getOrgPublicKey:[`GET /orgs/{org}/dependabot/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/dependabot/secrets/{secret_name}`],getRepoPublicKey:[`GET /repos/{owner}/{repo}/dependabot/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],listAlertsForEnterprise:[`GET /enterprises/{enterprise}/dependabot/alerts`],listAlertsForOrg:[`GET /orgs/{org}/dependabot/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/dependabot/alerts`],listOrgSecrets:[`GET /orgs/{org}/dependabot/secrets`],listRepoSecrets:[`GET /repos/{owner}/{repo}/dependabot/secrets`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}`],repositoryAccessForOrg:[`GET /organizations/{org}/dependabot/repository-access`],setRepositoryAccessDefaultLevel:[`PUT /organizations/{org}/dependabot/repository-access/default-level`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories`],updateAlert:[`PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}`],updateRepositoryAccessForOrg:[`PATCH /organizations/{org}/dependabot/repository-access`]},dependencyGraph:{createRepositorySnapshot:[`POST /repos/{owner}/{repo}/dependency-graph/snapshots`],diffRange:[`GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}`],exportSbom:[`GET /repos/{owner}/{repo}/dependency-graph/sbom`]},emojis:{get:[`GET /emojis`]},enterpriseTeamMemberships:{add:[`PUT /enterprises/{enterprise}/teams/{enterprise-team}/memberships/{username}`],bulkAdd:[`POST /enterprises/{enterprise}/teams/{enterprise-team}/memberships/add`],bulkRemove:[`POST /enterprises/{enterprise}/teams/{enterprise-team}/memberships/remove`],get:[`GET /enterprises/{enterprise}/teams/{enterprise-team}/memberships/{username}`],list:[`GET /enterprises/{enterprise}/teams/{enterprise-team}/memberships`],remove:[`DELETE /enterprises/{enterprise}/teams/{enterprise-team}/memberships/{username}`]},enterpriseTeamOrganizations:{add:[`PUT /enterprises/{enterprise}/teams/{enterprise-team}/organizations/{org}`],bulkAdd:[`POST /enterprises/{enterprise}/teams/{enterprise-team}/organizations/add`],bulkRemove:[`POST /enterprises/{enterprise}/teams/{enterprise-team}/organizations/remove`],delete:[`DELETE /enterprises/{enterprise}/teams/{enterprise-team}/organizations/{org}`],getAssignment:[`GET /enterprises/{enterprise}/teams/{enterprise-team}/organizations/{org}`],getAssignments:[`GET /enterprises/{enterprise}/teams/{enterprise-team}/organizations`]},enterpriseTeams:{create:[`POST /enterprises/{enterprise}/teams`],delete:[`DELETE /enterprises/{enterprise}/teams/{team_slug}`],get:[`GET /enterprises/{enterprise}/teams/{team_slug}`],list:[`GET /enterprises/{enterprise}/teams`],update:[`PATCH /enterprises/{enterprise}/teams/{team_slug}`]},gists:{checkIsStarred:[`GET /gists/{gist_id}/star`],create:[`POST /gists`],createComment:[`POST /gists/{gist_id}/comments`],delete:[`DELETE /gists/{gist_id}`],deleteComment:[`DELETE /gists/{gist_id}/comments/{comment_id}`],fork:[`POST /gists/{gist_id}/forks`],get:[`GET /gists/{gist_id}`],getComment:[`GET /gists/{gist_id}/comments/{comment_id}`],getRevision:[`GET /gists/{gist_id}/{sha}`],list:[`GET /gists`],listComments:[`GET /gists/{gist_id}/comments`],listCommits:[`GET /gists/{gist_id}/commits`],listForUser:[`GET /users/{username}/gists`],listForks:[`GET /gists/{gist_id}/forks`],listPublic:[`GET /gists/public`],listStarred:[`GET /gists/starred`],star:[`PUT /gists/{gist_id}/star`],unstar:[`DELETE /gists/{gist_id}/star`],update:[`PATCH /gists/{gist_id}`],updateComment:[`PATCH /gists/{gist_id}/comments/{comment_id}`]},git:{createBlob:[`POST /repos/{owner}/{repo}/git/blobs`],createCommit:[`POST /repos/{owner}/{repo}/git/commits`],createRef:[`POST /repos/{owner}/{repo}/git/refs`],createTag:[`POST /repos/{owner}/{repo}/git/tags`],createTree:[`POST /repos/{owner}/{repo}/git/trees`],deleteRef:[`DELETE /repos/{owner}/{repo}/git/refs/{ref}`],getBlob:[`GET /repos/{owner}/{repo}/git/blobs/{file_sha}`],getCommit:[`GET /repos/{owner}/{repo}/git/commits/{commit_sha}`],getRef:[`GET /repos/{owner}/{repo}/git/ref/{ref}`],getTag:[`GET /repos/{owner}/{repo}/git/tags/{tag_sha}`],getTree:[`GET /repos/{owner}/{repo}/git/trees/{tree_sha}`],listMatchingRefs:[`GET /repos/{owner}/{repo}/git/matching-refs/{ref}`],updateRef:[`PATCH /repos/{owner}/{repo}/git/refs/{ref}`]},gitignore:{getAllTemplates:[`GET /gitignore/templates`],getTemplate:[`GET /gitignore/templates/{name}`]},hostedCompute:{createNetworkConfigurationForOrg:[`POST /orgs/{org}/settings/network-configurations`],deleteNetworkConfigurationFromOrg:[`DELETE /orgs/{org}/settings/network-configurations/{network_configuration_id}`],getNetworkConfigurationForOrg:[`GET /orgs/{org}/settings/network-configurations/{network_configuration_id}`],getNetworkSettingsForOrg:[`GET /orgs/{org}/settings/network-settings/{network_settings_id}`],listNetworkConfigurationsForOrg:[`GET /orgs/{org}/settings/network-configurations`],updateNetworkConfigurationForOrg:[`PATCH /orgs/{org}/settings/network-configurations/{network_configuration_id}`]},interactions:{getRestrictionsForAuthenticatedUser:[`GET /user/interaction-limits`],getRestrictionsForOrg:[`GET /orgs/{org}/interaction-limits`],getRestrictionsForRepo:[`GET /repos/{owner}/{repo}/interaction-limits`],getRestrictionsForYourPublicRepos:[`GET /user/interaction-limits`,{},{renamed:[`interactions`,`getRestrictionsForAuthenticatedUser`]}],removeRestrictionsForAuthenticatedUser:[`DELETE /user/interaction-limits`],removeRestrictionsForOrg:[`DELETE /orgs/{org}/interaction-limits`],removeRestrictionsForRepo:[`DELETE /repos/{owner}/{repo}/interaction-limits`],removeRestrictionsForYourPublicRepos:[`DELETE /user/interaction-limits`,{},{renamed:[`interactions`,`removeRestrictionsForAuthenticatedUser`]}],setRestrictionsForAuthenticatedUser:[`PUT /user/interaction-limits`],setRestrictionsForOrg:[`PUT /orgs/{org}/interaction-limits`],setRestrictionsForRepo:[`PUT /repos/{owner}/{repo}/interaction-limits`],setRestrictionsForYourPublicRepos:[`PUT /user/interaction-limits`,{},{renamed:[`interactions`,`setRestrictionsForAuthenticatedUser`]}]},issues:{addAssignees:[`POST /repos/{owner}/{repo}/issues/{issue_number}/assignees`],addBlockedByDependency:[`POST /repos/{owner}/{repo}/issues/{issue_number}/dependencies/blocked_by`],addLabels:[`POST /repos/{owner}/{repo}/issues/{issue_number}/labels`],addSubIssue:[`POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues`],checkUserCanBeAssigned:[`GET /repos/{owner}/{repo}/assignees/{assignee}`],checkUserCanBeAssignedToIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}`],create:[`POST /repos/{owner}/{repo}/issues`],createComment:[`POST /repos/{owner}/{repo}/issues/{issue_number}/comments`],createLabel:[`POST /repos/{owner}/{repo}/labels`],createMilestone:[`POST /repos/{owner}/{repo}/milestones`],deleteComment:[`DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}`],deleteLabel:[`DELETE /repos/{owner}/{repo}/labels/{name}`],deleteMilestone:[`DELETE /repos/{owner}/{repo}/milestones/{milestone_number}`],get:[`GET /repos/{owner}/{repo}/issues/{issue_number}`],getComment:[`GET /repos/{owner}/{repo}/issues/comments/{comment_id}`],getEvent:[`GET /repos/{owner}/{repo}/issues/events/{event_id}`],getLabel:[`GET /repos/{owner}/{repo}/labels/{name}`],getMilestone:[`GET /repos/{owner}/{repo}/milestones/{milestone_number}`],getParent:[`GET /repos/{owner}/{repo}/issues/{issue_number}/parent`],list:[`GET /issues`],listAssignees:[`GET /repos/{owner}/{repo}/assignees`],listComments:[`GET /repos/{owner}/{repo}/issues/{issue_number}/comments`],listCommentsForRepo:[`GET /repos/{owner}/{repo}/issues/comments`],listDependenciesBlockedBy:[`GET /repos/{owner}/{repo}/issues/{issue_number}/dependencies/blocked_by`],listDependenciesBlocking:[`GET /repos/{owner}/{repo}/issues/{issue_number}/dependencies/blocking`],listEvents:[`GET /repos/{owner}/{repo}/issues/{issue_number}/events`],listEventsForRepo:[`GET /repos/{owner}/{repo}/issues/events`],listEventsForTimeline:[`GET /repos/{owner}/{repo}/issues/{issue_number}/timeline`],listForAuthenticatedUser:[`GET /user/issues`],listForOrg:[`GET /orgs/{org}/issues`],listForRepo:[`GET /repos/{owner}/{repo}/issues`],listLabelsForMilestone:[`GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels`],listLabelsForRepo:[`GET /repos/{owner}/{repo}/labels`],listLabelsOnIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/labels`],listMilestones:[`GET /repos/{owner}/{repo}/milestones`],listSubIssues:[`GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues`],lock:[`PUT /repos/{owner}/{repo}/issues/{issue_number}/lock`],removeAllLabels:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels`],removeAssignees:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees`],removeDependencyBlockedBy:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/dependencies/blocked_by/{issue_id}`],removeLabel:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}`],removeSubIssue:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue`],reprioritizeSubIssue:[`PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority`],setLabels:[`PUT /repos/{owner}/{repo}/issues/{issue_number}/labels`],unlock:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock`],update:[`PATCH /repos/{owner}/{repo}/issues/{issue_number}`],updateComment:[`PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}`],updateLabel:[`PATCH /repos/{owner}/{repo}/labels/{name}`],updateMilestone:[`PATCH /repos/{owner}/{repo}/milestones/{milestone_number}`]},licenses:{get:[`GET /licenses/{license}`],getAllCommonlyUsed:[`GET /licenses`],getForRepo:[`GET /repos/{owner}/{repo}/license`]},markdown:{render:[`POST /markdown`],renderRaw:[`POST /markdown/raw`,{headers:{"content-type":`text/plain; charset=utf-8`}}]},meta:{get:[`GET /meta`],getAllVersions:[`GET /versions`],getOctocat:[`GET /octocat`],getZen:[`GET /zen`],root:[`GET /`]},migrations:{deleteArchiveForAuthenticatedUser:[`DELETE /user/migrations/{migration_id}/archive`],deleteArchiveForOrg:[`DELETE /orgs/{org}/migrations/{migration_id}/archive`],downloadArchiveForOrg:[`GET /orgs/{org}/migrations/{migration_id}/archive`],getArchiveForAuthenticatedUser:[`GET /user/migrations/{migration_id}/archive`],getStatusForAuthenticatedUser:[`GET /user/migrations/{migration_id}`],getStatusForOrg:[`GET /orgs/{org}/migrations/{migration_id}`],listForAuthenticatedUser:[`GET /user/migrations`],listForOrg:[`GET /orgs/{org}/migrations`],listReposForAuthenticatedUser:[`GET /user/migrations/{migration_id}/repositories`],listReposForOrg:[`GET /orgs/{org}/migrations/{migration_id}/repositories`],listReposForUser:[`GET /user/migrations/{migration_id}/repositories`,{},{renamed:[`migrations`,`listReposForAuthenticatedUser`]}],startForAuthenticatedUser:[`POST /user/migrations`],startForOrg:[`POST /orgs/{org}/migrations`],unlockRepoForAuthenticatedUser:[`DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock`],unlockRepoForOrg:[`DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock`]},oidc:{getOidcCustomSubTemplateForOrg:[`GET /orgs/{org}/actions/oidc/customization/sub`],updateOidcCustomSubTemplateForOrg:[`PUT /orgs/{org}/actions/oidc/customization/sub`]},orgs:{addSecurityManagerTeam:[`PUT /orgs/{org}/security-managers/teams/{team_slug}`,{},{deprecated:`octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team`}],assignTeamToOrgRole:[`PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}`],assignUserToOrgRole:[`PUT /orgs/{org}/organization-roles/users/{username}/{role_id}`],blockUser:[`PUT /orgs/{org}/blocks/{username}`],cancelInvitation:[`DELETE /orgs/{org}/invitations/{invitation_id}`],checkBlockedUser:[`GET /orgs/{org}/blocks/{username}`],checkMembershipForUser:[`GET /orgs/{org}/members/{username}`],checkPublicMembershipForUser:[`GET /orgs/{org}/public_members/{username}`],convertMemberToOutsideCollaborator:[`PUT /orgs/{org}/outside_collaborators/{username}`],createArtifactStorageRecord:[`POST /orgs/{org}/artifacts/metadata/storage-record`],createInvitation:[`POST /orgs/{org}/invitations`],createIssueType:[`POST /orgs/{org}/issue-types`],createWebhook:[`POST /orgs/{org}/hooks`],customPropertiesForOrgsCreateOrUpdateOrganizationValues:[`PATCH /organizations/{org}/org-properties/values`],customPropertiesForOrgsGetOrganizationValues:[`GET /organizations/{org}/org-properties/values`],customPropertiesForReposCreateOrUpdateOrganizationDefinition:[`PUT /orgs/{org}/properties/schema/{custom_property_name}`],customPropertiesForReposCreateOrUpdateOrganizationDefinitions:[`PATCH /orgs/{org}/properties/schema`],customPropertiesForReposCreateOrUpdateOrganizationValues:[`PATCH /orgs/{org}/properties/values`],customPropertiesForReposDeleteOrganizationDefinition:[`DELETE /orgs/{org}/properties/schema/{custom_property_name}`],customPropertiesForReposGetOrganizationDefinition:[`GET /orgs/{org}/properties/schema/{custom_property_name}`],customPropertiesForReposGetOrganizationDefinitions:[`GET /orgs/{org}/properties/schema`],customPropertiesForReposGetOrganizationValues:[`GET /orgs/{org}/properties/values`],delete:[`DELETE /orgs/{org}`],deleteAttestationsBulk:[`POST /orgs/{org}/attestations/delete-request`],deleteAttestationsById:[`DELETE /orgs/{org}/attestations/{attestation_id}`],deleteAttestationsBySubjectDigest:[`DELETE /orgs/{org}/attestations/digest/{subject_digest}`],deleteIssueType:[`DELETE /orgs/{org}/issue-types/{issue_type_id}`],deleteWebhook:[`DELETE /orgs/{org}/hooks/{hook_id}`],disableSelectedRepositoryImmutableReleasesOrganization:[`DELETE /orgs/{org}/settings/immutable-releases/repositories/{repository_id}`],enableSelectedRepositoryImmutableReleasesOrganization:[`PUT /orgs/{org}/settings/immutable-releases/repositories/{repository_id}`],get:[`GET /orgs/{org}`],getImmutableReleasesSettings:[`GET /orgs/{org}/settings/immutable-releases`],getImmutableReleasesSettingsRepositories:[`GET /orgs/{org}/settings/immutable-releases/repositories`],getMembershipForAuthenticatedUser:[`GET /user/memberships/orgs/{org}`],getMembershipForUser:[`GET /orgs/{org}/memberships/{username}`],getOrgRole:[`GET /orgs/{org}/organization-roles/{role_id}`],getOrgRulesetHistory:[`GET /orgs/{org}/rulesets/{ruleset_id}/history`],getOrgRulesetVersion:[`GET /orgs/{org}/rulesets/{ruleset_id}/history/{version_id}`],getWebhook:[`GET /orgs/{org}/hooks/{hook_id}`],getWebhookConfigForOrg:[`GET /orgs/{org}/hooks/{hook_id}/config`],getWebhookDelivery:[`GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}`],list:[`GET /organizations`],listAppInstallations:[`GET /orgs/{org}/installations`],listArtifactStorageRecords:[`GET /orgs/{org}/artifacts/{subject_digest}/metadata/storage-records`],listAttestationRepositories:[`GET /orgs/{org}/attestations/repositories`],listAttestations:[`GET /orgs/{org}/attestations/{subject_digest}`],listAttestationsBulk:[`POST /orgs/{org}/attestations/bulk-list{?per_page,before,after}`],listBlockedUsers:[`GET /orgs/{org}/blocks`],listFailedInvitations:[`GET /orgs/{org}/failed_invitations`],listForAuthenticatedUser:[`GET /user/orgs`],listForUser:[`GET /users/{username}/orgs`],listInvitationTeams:[`GET /orgs/{org}/invitations/{invitation_id}/teams`],listIssueTypes:[`GET /orgs/{org}/issue-types`],listMembers:[`GET /orgs/{org}/members`],listMembershipsForAuthenticatedUser:[`GET /user/memberships/orgs`],listOrgRoleTeams:[`GET /orgs/{org}/organization-roles/{role_id}/teams`],listOrgRoleUsers:[`GET /orgs/{org}/organization-roles/{role_id}/users`],listOrgRoles:[`GET /orgs/{org}/organization-roles`],listOrganizationFineGrainedPermissions:[`GET /orgs/{org}/organization-fine-grained-permissions`],listOutsideCollaborators:[`GET /orgs/{org}/outside_collaborators`],listPatGrantRepositories:[`GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories`],listPatGrantRequestRepositories:[`GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories`],listPatGrantRequests:[`GET /orgs/{org}/personal-access-token-requests`],listPatGrants:[`GET /orgs/{org}/personal-access-tokens`],listPendingInvitations:[`GET /orgs/{org}/invitations`],listPublicMembers:[`GET /orgs/{org}/public_members`],listSecurityManagerTeams:[`GET /orgs/{org}/security-managers`,{},{deprecated:`octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams`}],listWebhookDeliveries:[`GET /orgs/{org}/hooks/{hook_id}/deliveries`],listWebhooks:[`GET /orgs/{org}/hooks`],pingWebhook:[`POST /orgs/{org}/hooks/{hook_id}/pings`],redeliverWebhookDelivery:[`POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts`],removeMember:[`DELETE /orgs/{org}/members/{username}`],removeMembershipForUser:[`DELETE /orgs/{org}/memberships/{username}`],removeOutsideCollaborator:[`DELETE /orgs/{org}/outside_collaborators/{username}`],removePublicMembershipForAuthenticatedUser:[`DELETE /orgs/{org}/public_members/{username}`],removeSecurityManagerTeam:[`DELETE /orgs/{org}/security-managers/teams/{team_slug}`,{},{deprecated:`octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team`}],reviewPatGrantRequest:[`POST /orgs/{org}/personal-access-token-requests/{pat_request_id}`],reviewPatGrantRequestsInBulk:[`POST /orgs/{org}/personal-access-token-requests`],revokeAllOrgRolesTeam:[`DELETE /orgs/{org}/organization-roles/teams/{team_slug}`],revokeAllOrgRolesUser:[`DELETE /orgs/{org}/organization-roles/users/{username}`],revokeOrgRoleTeam:[`DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}`],revokeOrgRoleUser:[`DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}`],setImmutableReleasesSettings:[`PUT /orgs/{org}/settings/immutable-releases`],setImmutableReleasesSettingsRepositories:[`PUT /orgs/{org}/settings/immutable-releases/repositories`],setMembershipForUser:[`PUT /orgs/{org}/memberships/{username}`],setPublicMembershipForAuthenticatedUser:[`PUT /orgs/{org}/public_members/{username}`],unblockUser:[`DELETE /orgs/{org}/blocks/{username}`],update:[`PATCH /orgs/{org}`],updateIssueType:[`PUT /orgs/{org}/issue-types/{issue_type_id}`],updateMembershipForAuthenticatedUser:[`PATCH /user/memberships/orgs/{org}`],updatePatAccess:[`POST /orgs/{org}/personal-access-tokens/{pat_id}`],updatePatAccesses:[`POST /orgs/{org}/personal-access-tokens`],updateWebhook:[`PATCH /orgs/{org}/hooks/{hook_id}`],updateWebhookConfigForOrg:[`PATCH /orgs/{org}/hooks/{hook_id}/config`]},packages:{deletePackageForAuthenticatedUser:[`DELETE /user/packages/{package_type}/{package_name}`],deletePackageForOrg:[`DELETE /orgs/{org}/packages/{package_type}/{package_name}`],deletePackageForUser:[`DELETE /users/{username}/packages/{package_type}/{package_name}`],deletePackageVersionForAuthenticatedUser:[`DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}`],deletePackageVersionForOrg:[`DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}`],deletePackageVersionForUser:[`DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}`],getAllPackageVersionsForAPackageOwnedByAnOrg:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions`,{},{renamed:[`packages`,`getAllPackageVersionsForPackageOwnedByOrg`]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions`,{},{renamed:[`packages`,`getAllPackageVersionsForPackageOwnedByAuthenticatedUser`]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions`],getAllPackageVersionsForPackageOwnedByOrg:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions`],getAllPackageVersionsForPackageOwnedByUser:[`GET /users/{username}/packages/{package_type}/{package_name}/versions`],getPackageForAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}`],getPackageForOrganization:[`GET /orgs/{org}/packages/{package_type}/{package_name}`],getPackageForUser:[`GET /users/{username}/packages/{package_type}/{package_name}`],getPackageVersionForAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}`],getPackageVersionForOrganization:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}`],getPackageVersionForUser:[`GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}`],listDockerMigrationConflictingPackagesForAuthenticatedUser:[`GET /user/docker/conflicts`],listDockerMigrationConflictingPackagesForOrganization:[`GET /orgs/{org}/docker/conflicts`],listDockerMigrationConflictingPackagesForUser:[`GET /users/{username}/docker/conflicts`],listPackagesForAuthenticatedUser:[`GET /user/packages`],listPackagesForOrganization:[`GET /orgs/{org}/packages`],listPackagesForUser:[`GET /users/{username}/packages`],restorePackageForAuthenticatedUser:[`POST /user/packages/{package_type}/{package_name}/restore{?token}`],restorePackageForOrg:[`POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}`],restorePackageForUser:[`POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}`],restorePackageVersionForAuthenticatedUser:[`POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`],restorePackageVersionForOrg:[`POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`],restorePackageVersionForUser:[`POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`]},privateRegistries:{createOrgPrivateRegistry:[`POST /orgs/{org}/private-registries`],deleteOrgPrivateRegistry:[`DELETE /orgs/{org}/private-registries/{secret_name}`],getOrgPrivateRegistry:[`GET /orgs/{org}/private-registries/{secret_name}`],getOrgPublicKey:[`GET /orgs/{org}/private-registries/public-key`],listOrgPrivateRegistries:[`GET /orgs/{org}/private-registries`],updateOrgPrivateRegistry:[`PATCH /orgs/{org}/private-registries/{secret_name}`]},projects:{addItemForOrg:[`POST /orgs/{org}/projectsV2/{project_number}/items`],addItemForUser:[`POST /users/{username}/projectsV2/{project_number}/items`],deleteItemForOrg:[`DELETE /orgs/{org}/projectsV2/{project_number}/items/{item_id}`],deleteItemForUser:[`DELETE /users/{username}/projectsV2/{project_number}/items/{item_id}`],getFieldForOrg:[`GET /orgs/{org}/projectsV2/{project_number}/fields/{field_id}`],getFieldForUser:[`GET /users/{username}/projectsV2/{project_number}/fields/{field_id}`],getForOrg:[`GET /orgs/{org}/projectsV2/{project_number}`],getForUser:[`GET /users/{username}/projectsV2/{project_number}`],getOrgItem:[`GET /orgs/{org}/projectsV2/{project_number}/items/{item_id}`],getUserItem:[`GET /users/{username}/projectsV2/{project_number}/items/{item_id}`],listFieldsForOrg:[`GET /orgs/{org}/projectsV2/{project_number}/fields`],listFieldsForUser:[`GET /users/{username}/projectsV2/{project_number}/fields`],listForOrg:[`GET /orgs/{org}/projectsV2`],listForUser:[`GET /users/{username}/projectsV2`],listItemsForOrg:[`GET /orgs/{org}/projectsV2/{project_number}/items`],listItemsForUser:[`GET /users/{username}/projectsV2/{project_number}/items`],updateItemForOrg:[`PATCH /orgs/{org}/projectsV2/{project_number}/items/{item_id}`],updateItemForUser:[`PATCH /users/{username}/projectsV2/{project_number}/items/{item_id}`]},pulls:{checkIfMerged:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/merge`],create:[`POST /repos/{owner}/{repo}/pulls`],createReplyForReviewComment:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies`],createReview:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews`],createReviewComment:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/comments`],deletePendingReview:[`DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],deleteReviewComment:[`DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}`],dismissReview:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals`],get:[`GET /repos/{owner}/{repo}/pulls/{pull_number}`],getReview:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],getReviewComment:[`GET /repos/{owner}/{repo}/pulls/comments/{comment_id}`],list:[`GET /repos/{owner}/{repo}/pulls`],listCommentsForReview:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments`],listCommits:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/commits`],listFiles:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/files`],listRequestedReviewers:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],listReviewComments:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/comments`],listReviewCommentsForRepo:[`GET /repos/{owner}/{repo}/pulls/comments`],listReviews:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews`],merge:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge`],removeRequestedReviewers:[`DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],requestReviewers:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],submitReview:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events`],update:[`PATCH /repos/{owner}/{repo}/pulls/{pull_number}`],updateBranch:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch`],updateReview:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],updateReviewComment:[`PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}`]},rateLimit:{get:[`GET /rate_limit`]},reactions:{createForCommitComment:[`POST /repos/{owner}/{repo}/comments/{comment_id}/reactions`],createForIssue:[`POST /repos/{owner}/{repo}/issues/{issue_number}/reactions`],createForIssueComment:[`POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions`],createForPullRequestReviewComment:[`POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions`],createForRelease:[`POST /repos/{owner}/{repo}/releases/{release_id}/reactions`],createForTeamDiscussionCommentInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions`],createForTeamDiscussionInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions`],deleteForCommitComment:[`DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}`],deleteForIssue:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}`],deleteForIssueComment:[`DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}`],deleteForPullRequestComment:[`DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}`],deleteForRelease:[`DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}`],deleteForTeamDiscussion:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}`],deleteForTeamDiscussionComment:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}`],listForCommitComment:[`GET /repos/{owner}/{repo}/comments/{comment_id}/reactions`],listForIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/reactions`],listForIssueComment:[`GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions`],listForPullRequestReviewComment:[`GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions`],listForRelease:[`GET /repos/{owner}/{repo}/releases/{release_id}/reactions`],listForTeamDiscussionCommentInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions`],listForTeamDiscussionInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions`]},repos:{acceptInvitation:[`PATCH /user/repository_invitations/{invitation_id}`,{},{renamed:[`repos`,`acceptInvitationForAuthenticatedUser`]}],acceptInvitationForAuthenticatedUser:[`PATCH /user/repository_invitations/{invitation_id}`],addAppAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],addCollaborator:[`PUT /repos/{owner}/{repo}/collaborators/{username}`],addStatusCheckContexts:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],addTeamAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],addUserAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],cancelPagesDeployment:[`POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel`],checkAutomatedSecurityFixes:[`GET /repos/{owner}/{repo}/automated-security-fixes`],checkCollaborator:[`GET /repos/{owner}/{repo}/collaborators/{username}`],checkImmutableReleases:[`GET /repos/{owner}/{repo}/immutable-releases`],checkPrivateVulnerabilityReporting:[`GET /repos/{owner}/{repo}/private-vulnerability-reporting`],checkVulnerabilityAlerts:[`GET /repos/{owner}/{repo}/vulnerability-alerts`],codeownersErrors:[`GET /repos/{owner}/{repo}/codeowners/errors`],compareCommits:[`GET /repos/{owner}/{repo}/compare/{base}...{head}`],compareCommitsWithBasehead:[`GET /repos/{owner}/{repo}/compare/{basehead}`],createAttestation:[`POST /repos/{owner}/{repo}/attestations`],createAutolink:[`POST /repos/{owner}/{repo}/autolinks`],createCommitComment:[`POST /repos/{owner}/{repo}/commits/{commit_sha}/comments`],createCommitSignatureProtection:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],createCommitStatus:[`POST /repos/{owner}/{repo}/statuses/{sha}`],createDeployKey:[`POST /repos/{owner}/{repo}/keys`],createDeployment:[`POST /repos/{owner}/{repo}/deployments`],createDeploymentBranchPolicy:[`POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies`],createDeploymentProtectionRule:[`POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules`],createDeploymentStatus:[`POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses`],createDispatchEvent:[`POST /repos/{owner}/{repo}/dispatches`],createForAuthenticatedUser:[`POST /user/repos`],createFork:[`POST /repos/{owner}/{repo}/forks`],createInOrg:[`POST /orgs/{org}/repos`],createOrUpdateEnvironment:[`PUT /repos/{owner}/{repo}/environments/{environment_name}`],createOrUpdateFileContents:[`PUT /repos/{owner}/{repo}/contents/{path}`],createOrgRuleset:[`POST /orgs/{org}/rulesets`],createPagesDeployment:[`POST /repos/{owner}/{repo}/pages/deployments`],createPagesSite:[`POST /repos/{owner}/{repo}/pages`],createRelease:[`POST /repos/{owner}/{repo}/releases`],createRepoRuleset:[`POST /repos/{owner}/{repo}/rulesets`],createUsingTemplate:[`POST /repos/{template_owner}/{template_repo}/generate`],createWebhook:[`POST /repos/{owner}/{repo}/hooks`],customPropertiesForReposCreateOrUpdateRepositoryValues:[`PATCH /repos/{owner}/{repo}/properties/values`],customPropertiesForReposGetRepositoryValues:[`GET /repos/{owner}/{repo}/properties/values`],declineInvitation:[`DELETE /user/repository_invitations/{invitation_id}`,{},{renamed:[`repos`,`declineInvitationForAuthenticatedUser`]}],declineInvitationForAuthenticatedUser:[`DELETE /user/repository_invitations/{invitation_id}`],delete:[`DELETE /repos/{owner}/{repo}`],deleteAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions`],deleteAdminBranchProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],deleteAnEnvironment:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}`],deleteAutolink:[`DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}`],deleteBranchProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection`],deleteCommitComment:[`DELETE /repos/{owner}/{repo}/comments/{comment_id}`],deleteCommitSignatureProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],deleteDeployKey:[`DELETE /repos/{owner}/{repo}/keys/{key_id}`],deleteDeployment:[`DELETE /repos/{owner}/{repo}/deployments/{deployment_id}`],deleteDeploymentBranchPolicy:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],deleteFile:[`DELETE /repos/{owner}/{repo}/contents/{path}`],deleteInvitation:[`DELETE /repos/{owner}/{repo}/invitations/{invitation_id}`],deleteOrgRuleset:[`DELETE /orgs/{org}/rulesets/{ruleset_id}`],deletePagesSite:[`DELETE /repos/{owner}/{repo}/pages`],deletePullRequestReviewProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],deleteRelease:[`DELETE /repos/{owner}/{repo}/releases/{release_id}`],deleteReleaseAsset:[`DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}`],deleteRepoRuleset:[`DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}`],deleteWebhook:[`DELETE /repos/{owner}/{repo}/hooks/{hook_id}`],disableAutomatedSecurityFixes:[`DELETE /repos/{owner}/{repo}/automated-security-fixes`],disableDeploymentProtectionRule:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}`],disableImmutableReleases:[`DELETE /repos/{owner}/{repo}/immutable-releases`],disablePrivateVulnerabilityReporting:[`DELETE /repos/{owner}/{repo}/private-vulnerability-reporting`],disableVulnerabilityAlerts:[`DELETE /repos/{owner}/{repo}/vulnerability-alerts`],downloadArchive:[`GET /repos/{owner}/{repo}/zipball/{ref}`,{},{renamed:[`repos`,`downloadZipballArchive`]}],downloadTarballArchive:[`GET /repos/{owner}/{repo}/tarball/{ref}`],downloadZipballArchive:[`GET /repos/{owner}/{repo}/zipball/{ref}`],enableAutomatedSecurityFixes:[`PUT /repos/{owner}/{repo}/automated-security-fixes`],enableImmutableReleases:[`PUT /repos/{owner}/{repo}/immutable-releases`],enablePrivateVulnerabilityReporting:[`PUT /repos/{owner}/{repo}/private-vulnerability-reporting`],enableVulnerabilityAlerts:[`PUT /repos/{owner}/{repo}/vulnerability-alerts`],generateReleaseNotes:[`POST /repos/{owner}/{repo}/releases/generate-notes`],get:[`GET /repos/{owner}/{repo}`],getAccessRestrictions:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions`],getAdminBranchProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],getAllDeploymentProtectionRules:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules`],getAllEnvironments:[`GET /repos/{owner}/{repo}/environments`],getAllStatusCheckContexts:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`],getAllTopics:[`GET /repos/{owner}/{repo}/topics`],getAppsWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`],getAutolink:[`GET /repos/{owner}/{repo}/autolinks/{autolink_id}`],getBranch:[`GET /repos/{owner}/{repo}/branches/{branch}`],getBranchProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection`],getBranchRules:[`GET /repos/{owner}/{repo}/rules/branches/{branch}`],getClones:[`GET /repos/{owner}/{repo}/traffic/clones`],getCodeFrequencyStats:[`GET /repos/{owner}/{repo}/stats/code_frequency`],getCollaboratorPermissionLevel:[`GET /repos/{owner}/{repo}/collaborators/{username}/permission`],getCombinedStatusForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/status`],getCommit:[`GET /repos/{owner}/{repo}/commits/{ref}`],getCommitActivityStats:[`GET /repos/{owner}/{repo}/stats/commit_activity`],getCommitComment:[`GET /repos/{owner}/{repo}/comments/{comment_id}`],getCommitSignatureProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],getCommunityProfileMetrics:[`GET /repos/{owner}/{repo}/community/profile`],getContent:[`GET /repos/{owner}/{repo}/contents/{path}`],getContributorsStats:[`GET /repos/{owner}/{repo}/stats/contributors`],getCustomDeploymentProtectionRule:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}`],getDeployKey:[`GET /repos/{owner}/{repo}/keys/{key_id}`],getDeployment:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}`],getDeploymentBranchPolicy:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],getDeploymentStatus:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}`],getEnvironment:[`GET /repos/{owner}/{repo}/environments/{environment_name}`],getLatestPagesBuild:[`GET /repos/{owner}/{repo}/pages/builds/latest`],getLatestRelease:[`GET /repos/{owner}/{repo}/releases/latest`],getOrgRuleSuite:[`GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}`],getOrgRuleSuites:[`GET /orgs/{org}/rulesets/rule-suites`],getOrgRuleset:[`GET /orgs/{org}/rulesets/{ruleset_id}`],getOrgRulesets:[`GET /orgs/{org}/rulesets`],getPages:[`GET /repos/{owner}/{repo}/pages`],getPagesBuild:[`GET /repos/{owner}/{repo}/pages/builds/{build_id}`],getPagesDeployment:[`GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}`],getPagesHealthCheck:[`GET /repos/{owner}/{repo}/pages/health`],getParticipationStats:[`GET /repos/{owner}/{repo}/stats/participation`],getPullRequestReviewProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],getPunchCardStats:[`GET /repos/{owner}/{repo}/stats/punch_card`],getReadme:[`GET /repos/{owner}/{repo}/readme`],getReadmeInDirectory:[`GET /repos/{owner}/{repo}/readme/{dir}`],getRelease:[`GET /repos/{owner}/{repo}/releases/{release_id}`],getReleaseAsset:[`GET /repos/{owner}/{repo}/releases/assets/{asset_id}`],getReleaseByTag:[`GET /repos/{owner}/{repo}/releases/tags/{tag}`],getRepoRuleSuite:[`GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}`],getRepoRuleSuites:[`GET /repos/{owner}/{repo}/rulesets/rule-suites`],getRepoRuleset:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}`],getRepoRulesetHistory:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history`],getRepoRulesetVersion:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history/{version_id}`],getRepoRulesets:[`GET /repos/{owner}/{repo}/rulesets`],getStatusChecksProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],getTeamsWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`],getTopPaths:[`GET /repos/{owner}/{repo}/traffic/popular/paths`],getTopReferrers:[`GET /repos/{owner}/{repo}/traffic/popular/referrers`],getUsersWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`],getViews:[`GET /repos/{owner}/{repo}/traffic/views`],getWebhook:[`GET /repos/{owner}/{repo}/hooks/{hook_id}`],getWebhookConfigForRepo:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/config`],getWebhookDelivery:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}`],listActivities:[`GET /repos/{owner}/{repo}/activity`],listAttestations:[`GET /repos/{owner}/{repo}/attestations/{subject_digest}`],listAutolinks:[`GET /repos/{owner}/{repo}/autolinks`],listBranches:[`GET /repos/{owner}/{repo}/branches`],listBranchesForHeadCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head`],listCollaborators:[`GET /repos/{owner}/{repo}/collaborators`],listCommentsForCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/comments`],listCommitCommentsForRepo:[`GET /repos/{owner}/{repo}/comments`],listCommitStatusesForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/statuses`],listCommits:[`GET /repos/{owner}/{repo}/commits`],listContributors:[`GET /repos/{owner}/{repo}/contributors`],listCustomDeploymentRuleIntegrations:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps`],listDeployKeys:[`GET /repos/{owner}/{repo}/keys`],listDeploymentBranchPolicies:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies`],listDeploymentStatuses:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses`],listDeployments:[`GET /repos/{owner}/{repo}/deployments`],listForAuthenticatedUser:[`GET /user/repos`],listForOrg:[`GET /orgs/{org}/repos`],listForUser:[`GET /users/{username}/repos`],listForks:[`GET /repos/{owner}/{repo}/forks`],listInvitations:[`GET /repos/{owner}/{repo}/invitations`],listInvitationsForAuthenticatedUser:[`GET /user/repository_invitations`],listLanguages:[`GET /repos/{owner}/{repo}/languages`],listPagesBuilds:[`GET /repos/{owner}/{repo}/pages/builds`],listPublic:[`GET /repositories`],listPullRequestsAssociatedWithCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls`],listReleaseAssets:[`GET /repos/{owner}/{repo}/releases/{release_id}/assets`],listReleases:[`GET /repos/{owner}/{repo}/releases`],listTags:[`GET /repos/{owner}/{repo}/tags`],listTeams:[`GET /repos/{owner}/{repo}/teams`],listWebhookDeliveries:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries`],listWebhooks:[`GET /repos/{owner}/{repo}/hooks`],merge:[`POST /repos/{owner}/{repo}/merges`],mergeUpstream:[`POST /repos/{owner}/{repo}/merge-upstream`],pingWebhook:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/pings`],redeliverWebhookDelivery:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts`],removeAppAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],removeCollaborator:[`DELETE /repos/{owner}/{repo}/collaborators/{username}`],removeStatusCheckContexts:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],removeStatusCheckProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],removeTeamAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],removeUserAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],renameBranch:[`POST /repos/{owner}/{repo}/branches/{branch}/rename`],replaceAllTopics:[`PUT /repos/{owner}/{repo}/topics`],requestPagesBuild:[`POST /repos/{owner}/{repo}/pages/builds`],setAdminBranchProtection:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],setAppAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],setStatusCheckContexts:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],setTeamAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],setUserAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],testPushWebhook:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/tests`],transfer:[`POST /repos/{owner}/{repo}/transfer`],update:[`PATCH /repos/{owner}/{repo}`],updateBranchProtection:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection`],updateCommitComment:[`PATCH /repos/{owner}/{repo}/comments/{comment_id}`],updateDeploymentBranchPolicy:[`PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],updateInformationAboutPagesSite:[`PUT /repos/{owner}/{repo}/pages`],updateInvitation:[`PATCH /repos/{owner}/{repo}/invitations/{invitation_id}`],updateOrgRuleset:[`PUT /orgs/{org}/rulesets/{ruleset_id}`],updatePullRequestReviewProtection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],updateRelease:[`PATCH /repos/{owner}/{repo}/releases/{release_id}`],updateReleaseAsset:[`PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}`],updateRepoRuleset:[`PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}`],updateStatusCheckPotection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`,{},{renamed:[`repos`,`updateStatusCheckProtection`]}],updateStatusCheckProtection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],updateWebhook:[`PATCH /repos/{owner}/{repo}/hooks/{hook_id}`],updateWebhookConfigForRepo:[`PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config`],uploadReleaseAsset:[`POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}`,{baseUrl:`https://uploads.github.com`}]},search:{code:[`GET /search/code`],commits:[`GET /search/commits`],issuesAndPullRequests:[`GET /search/issues`],labels:[`GET /search/labels`],repos:[`GET /search/repositories`],topics:[`GET /search/topics`],users:[`GET /search/users`]},secretScanning:{createPushProtectionBypass:[`POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses`],getAlert:[`GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}`],getScanHistory:[`GET /repos/{owner}/{repo}/secret-scanning/scan-history`],listAlertsForOrg:[`GET /orgs/{org}/secret-scanning/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/secret-scanning/alerts`],listLocationsForAlert:[`GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations`],listOrgPatternConfigs:[`GET /orgs/{org}/secret-scanning/pattern-configurations`],updateAlert:[`PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}`],updateOrgPatternConfigs:[`PATCH /orgs/{org}/secret-scanning/pattern-configurations`]},securityAdvisories:{createFork:[`POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks`],createPrivateVulnerabilityReport:[`POST /repos/{owner}/{repo}/security-advisories/reports`],createRepositoryAdvisory:[`POST /repos/{owner}/{repo}/security-advisories`],createRepositoryAdvisoryCveRequest:[`POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve`],getGlobalAdvisory:[`GET /advisories/{ghsa_id}`],getRepositoryAdvisory:[`GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}`],listGlobalAdvisories:[`GET /advisories`],listOrgRepositoryAdvisories:[`GET /orgs/{org}/security-advisories`],listRepositoryAdvisories:[`GET /repos/{owner}/{repo}/security-advisories`],updateRepositoryAdvisory:[`PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}`]},teams:{addOrUpdateMembershipForUserInOrg:[`PUT /orgs/{org}/teams/{team_slug}/memberships/{username}`],addOrUpdateRepoPermissionsInOrg:[`PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],checkPermissionsForRepoInOrg:[`GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],create:[`POST /orgs/{org}/teams`],createDiscussionCommentInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments`],createDiscussionInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions`],deleteDiscussionCommentInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],deleteDiscussionInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],deleteInOrg:[`DELETE /orgs/{org}/teams/{team_slug}`],getByName:[`GET /orgs/{org}/teams/{team_slug}`],getDiscussionCommentInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],getDiscussionInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],getMembershipForUserInOrg:[`GET /orgs/{org}/teams/{team_slug}/memberships/{username}`],list:[`GET /orgs/{org}/teams`],listChildInOrg:[`GET /orgs/{org}/teams/{team_slug}/teams`],listDiscussionCommentsInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments`],listDiscussionsInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions`],listForAuthenticatedUser:[`GET /user/teams`],listMembersInOrg:[`GET /orgs/{org}/teams/{team_slug}/members`],listPendingInvitationsInOrg:[`GET /orgs/{org}/teams/{team_slug}/invitations`],listReposInOrg:[`GET /orgs/{org}/teams/{team_slug}/repos`],removeMembershipForUserInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}`],removeRepoInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],updateDiscussionCommentInOrg:[`PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],updateDiscussionInOrg:[`PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],updateInOrg:[`PATCH /orgs/{org}/teams/{team_slug}`]},users:{addEmailForAuthenticated:[`POST /user/emails`,{},{renamed:[`users`,`addEmailForAuthenticatedUser`]}],addEmailForAuthenticatedUser:[`POST /user/emails`],addSocialAccountForAuthenticatedUser:[`POST /user/social_accounts`],block:[`PUT /user/blocks/{username}`],checkBlocked:[`GET /user/blocks/{username}`],checkFollowingForUser:[`GET /users/{username}/following/{target_user}`],checkPersonIsFollowedByAuthenticated:[`GET /user/following/{username}`],createGpgKeyForAuthenticated:[`POST /user/gpg_keys`,{},{renamed:[`users`,`createGpgKeyForAuthenticatedUser`]}],createGpgKeyForAuthenticatedUser:[`POST /user/gpg_keys`],createPublicSshKeyForAuthenticated:[`POST /user/keys`,{},{renamed:[`users`,`createPublicSshKeyForAuthenticatedUser`]}],createPublicSshKeyForAuthenticatedUser:[`POST /user/keys`],createSshSigningKeyForAuthenticatedUser:[`POST /user/ssh_signing_keys`],deleteAttestationsBulk:[`POST /users/{username}/attestations/delete-request`],deleteAttestationsById:[`DELETE /users/{username}/attestations/{attestation_id}`],deleteAttestationsBySubjectDigest:[`DELETE /users/{username}/attestations/digest/{subject_digest}`],deleteEmailForAuthenticated:[`DELETE /user/emails`,{},{renamed:[`users`,`deleteEmailForAuthenticatedUser`]}],deleteEmailForAuthenticatedUser:[`DELETE /user/emails`],deleteGpgKeyForAuthenticated:[`DELETE /user/gpg_keys/{gpg_key_id}`,{},{renamed:[`users`,`deleteGpgKeyForAuthenticatedUser`]}],deleteGpgKeyForAuthenticatedUser:[`DELETE /user/gpg_keys/{gpg_key_id}`],deletePublicSshKeyForAuthenticated:[`DELETE /user/keys/{key_id}`,{},{renamed:[`users`,`deletePublicSshKeyForAuthenticatedUser`]}],deletePublicSshKeyForAuthenticatedUser:[`DELETE /user/keys/{key_id}`],deleteSocialAccountForAuthenticatedUser:[`DELETE /user/social_accounts`],deleteSshSigningKeyForAuthenticatedUser:[`DELETE /user/ssh_signing_keys/{ssh_signing_key_id}`],follow:[`PUT /user/following/{username}`],getAuthenticated:[`GET /user`],getById:[`GET /user/{account_id}`],getByUsername:[`GET /users/{username}`],getContextForUser:[`GET /users/{username}/hovercard`],getGpgKeyForAuthenticated:[`GET /user/gpg_keys/{gpg_key_id}`,{},{renamed:[`users`,`getGpgKeyForAuthenticatedUser`]}],getGpgKeyForAuthenticatedUser:[`GET /user/gpg_keys/{gpg_key_id}`],getPublicSshKeyForAuthenticated:[`GET /user/keys/{key_id}`,{},{renamed:[`users`,`getPublicSshKeyForAuthenticatedUser`]}],getPublicSshKeyForAuthenticatedUser:[`GET /user/keys/{key_id}`],getSshSigningKeyForAuthenticatedUser:[`GET /user/ssh_signing_keys/{ssh_signing_key_id}`],list:[`GET /users`],listAttestations:[`GET /users/{username}/attestations/{subject_digest}`],listAttestationsBulk:[`POST /users/{username}/attestations/bulk-list{?per_page,before,after}`],listBlockedByAuthenticated:[`GET /user/blocks`,{},{renamed:[`users`,`listBlockedByAuthenticatedUser`]}],listBlockedByAuthenticatedUser:[`GET /user/blocks`],listEmailsForAuthenticated:[`GET /user/emails`,{},{renamed:[`users`,`listEmailsForAuthenticatedUser`]}],listEmailsForAuthenticatedUser:[`GET /user/emails`],listFollowedByAuthenticated:[`GET /user/following`,{},{renamed:[`users`,`listFollowedByAuthenticatedUser`]}],listFollowedByAuthenticatedUser:[`GET /user/following`],listFollowersForAuthenticatedUser:[`GET /user/followers`],listFollowersForUser:[`GET /users/{username}/followers`],listFollowingForUser:[`GET /users/{username}/following`],listGpgKeysForAuthenticated:[`GET /user/gpg_keys`,{},{renamed:[`users`,`listGpgKeysForAuthenticatedUser`]}],listGpgKeysForAuthenticatedUser:[`GET /user/gpg_keys`],listGpgKeysForUser:[`GET /users/{username}/gpg_keys`],listPublicEmailsForAuthenticated:[`GET /user/public_emails`,{},{renamed:[`users`,`listPublicEmailsForAuthenticatedUser`]}],listPublicEmailsForAuthenticatedUser:[`GET /user/public_emails`],listPublicKeysForUser:[`GET /users/{username}/keys`],listPublicSshKeysForAuthenticated:[`GET /user/keys`,{},{renamed:[`users`,`listPublicSshKeysForAuthenticatedUser`]}],listPublicSshKeysForAuthenticatedUser:[`GET /user/keys`],listSocialAccountsForAuthenticatedUser:[`GET /user/social_accounts`],listSocialAccountsForUser:[`GET /users/{username}/social_accounts`],listSshSigningKeysForAuthenticatedUser:[`GET /user/ssh_signing_keys`],listSshSigningKeysForUser:[`GET /users/{username}/ssh_signing_keys`],setPrimaryEmailVisibilityForAuthenticated:[`PATCH /user/email/visibility`,{},{renamed:[`users`,`setPrimaryEmailVisibilityForAuthenticatedUser`]}],setPrimaryEmailVisibilityForAuthenticatedUser:[`PATCH /user/email/visibility`],unblock:[`DELETE /user/blocks/{username}`],unfollow:[`DELETE /user/following/{username}`],updateAuthenticated:[`PATCH /user`]}};const K=new Map;for(let[e,t]of Object.entries(Zr))for(let[n,r]of Object.entries(t)){let[t,i,a]=r,[o,s]=t.split(/ /),c=Object.assign({method:o,url:s},i);K.has(e)||K.set(e,new Map),K.get(e).set(n,{scope:e,methodName:n,endpointDefaults:c,decorations:a})}const Qr={has({scope:e},t){return K.get(e).has(t)},getOwnPropertyDescriptor(e,t){return{value:this.get(e,t),configurable:!0,writable:!0,enumerable:!0}},defineProperty(e,t,n){return Object.defineProperty(e.cache,t,n),!0},deleteProperty(e,t){return delete e.cache[t],!0},ownKeys({scope:e}){return[...K.get(e).keys()]},set(e,t,n){return e.cache[t]=n},get({octokit:e,scope:t,cache:n},r){if(n[r])return n[r];let i=K.get(t).get(r);if(!i)return;let{endpointDefaults:a,decorations:o}=i;return o?n[r]=ei(e,t,r,a,o):n[r]=e.request.defaults(a),n[r]}};function $r(e){let t={};for(let n of K.keys())t[n]=new Proxy({octokit:e,scope:n,cache:{}},Qr);return t}function ei(e,t,n,r,i){let a=e.request.defaults(r);function o(...r){let o=a.endpoint.merge(...r);if(i.mapToData)return o=Object.assign({},o,{data:o[i.mapToData],[i.mapToData]:void 0}),a(o);if(i.renamed){let[r,a]=i.renamed;e.log.warn(`octokit.${t}.${n}() has been renamed to octokit.${r}.${a}()`)}if(i.deprecated&&e.log.warn(i.deprecated),i.renamedParameters){let o=a.endpoint.merge(...r);for(let[r,a]of Object.entries(i.renamedParameters))r in o&&(e.log.warn(`"${r}" parameter is deprecated for "octokit.${t}.${n}()". Use "${a}" instead`),a in o||(o[a]=o[r]),delete o[r]);return a(o)}return a(...r)}return Object.assign(o,a)}function ti(e){return{rest:$r(e)}}ti.VERSION=Xr;function ni(e){let t=$r(e);return{...t,rest:t}}ni.VERSION=Xr;var ri=`0.0.0-development`;function ii(e){if(!e.data)return{...e,data:[]};if(!((`total_count`in e.data||`total_commits`in e.data)&&!(`url`in e.data)))return e;let t=e.data.incomplete_results,n=e.data.repository_selection,r=e.data.total_count,i=e.data.total_commits;delete e.data.incomplete_results,delete e.data.repository_selection,delete e.data.total_count,delete e.data.total_commits;let a=Object.keys(e.data)[0];return e.data=e.data[a],t!==void 0&&(e.data.incomplete_results=t),n!==void 0&&(e.data.repository_selection=n),e.data.total_count=r,e.data.total_commits=i,e}function ai(e,t,n){let r=typeof t==`function`?t.endpoint(n):e.request.endpoint(t,n),i=typeof t==`function`?t:e.request,a=r.method,o=r.headers,s=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!s)return{done:!0};try{let e=ii(await i({method:a,url:s,headers:o}));if(s=((e.headers.link||``).match(/<([^<>]+)>;\s*rel="next"/)||[])[1],!s&&`total_commits`in e.data){let t=new URL(e.url),n=t.searchParams,r=parseInt(n.get(`page`)||`1`,10);r*parseInt(n.get(`per_page`)||`250`,10)<e.data.total_commits&&(n.set(`page`,String(r+1)),s=t.toString())}return{value:e}}catch(e){if(e.status!==409)throw e;return s=``,{value:{status:200,headers:{},data:[]}}}}})}}function oi(e,t,n,r){return typeof n==`function`&&(r=n,n=void 0),si(e,[],ai(e,t,n)[Symbol.asyncIterator](),r)}function si(e,t,n,r){return n.next().then(i=>{if(i.done)return t;let a=!1;function o(){a=!0}return t=t.concat(r?r(i.value,o):i.value.data),a?t:si(e,t,n,r)})}Object.assign(oi,{iterator:ai});function ci(e){return{paginate:Object.assign(oi.bind(null,e),{iterator:ai.bind(null,e)})}}ci.VERSION=ri,new En;const li=Fn(),ui={baseUrl:li,request:{agent:Mn(li),fetch:Pn(li)}},di=Yr.plugin(ti,ci).defaults(ui);function fi(e,t){let n=Object.assign({},t||{}),r=jn(e,n);return r&&(n.auth=r),n}const pi=new En;function mi(e,t,...n){return new(di.plugin(...n))(fi(e,t))}var q=ne(F(),1),hi=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},gi=class{constructor(e,t,n){if(e<1)throw Error(`max attempts should be greater than or equal to 1`);if(this.maxAttempts=e,this.minSeconds=Math.floor(t),this.maxSeconds=Math.floor(n),this.minSeconds>this.maxSeconds)throw Error(`min seconds should be less than or equal to max seconds`)}execute(e,t){return hi(this,void 0,void 0,function*(){let n=1;for(;n<this.maxAttempts;){try{return yield e()}catch(e){if(t&&!t(e))throw e;c(e.message)}let r=this.getSleepAmount();c(`Waiting ${r} seconds before trying again`),yield this.sleep(r),n++}return yield e()})}getSleepAmount(){return Math.floor(Math.random()*(this.maxSeconds-this.minSeconds+1))+this.minSeconds}sleep(e){return hi(this,void 0,void 0,function*(){return new Promise(t=>setTimeout(t,e*1e3))})}},J=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},_i=class extends Error{constructor(e){super(`Unexpected HTTP response: ${e}`),this.httpStatusCode=e,Object.setPrototypeOf(this,new.target.prototype)}};const vi=process.platform===`win32`;process.platform;function yi(e,t,n,r){return J(this,void 0,void 0,function*(){return t||=B.join(Pi(),be.randomUUID()),yield o(B.dirname(t)),f(`Downloading ${e}`),f(`Destination ${t}`),yield new gi(3,Fi(`TEST_DOWNLOAD_TOOL_RETRY_MIN_SECONDS`,10),Fi(`TEST_DOWNLOAD_TOOL_RETRY_MAX_SECONDS`,20)).execute(()=>J(this,void 0,void 0,function*(){return yield bi(e,t||``,n,r)}),e=>!(e instanceof _i&&e.httpStatusCode&&e.httpStatusCode<500&&e.httpStatusCode!==408&&e.httpStatusCode!==429))})}function bi(e,t,n,r){return J(this,void 0,void 0,function*(){if(z.existsSync(t))throw Error(`Destination file path ${t} already exists`);let i=new w(`actions/tool-cache`,[],{allowRetries:!1});n&&(f(`set auth`),r===void 0&&(r={}),r.authorization=n);let a=yield i.get(e,r);if(a.message.statusCode!==200){let t=new _i(a.message.statusCode);throw f(`Failed to download from "${e}". Code(${a.message.statusCode}) Message(${a.message.statusMessage})`),t}let o=we.promisify(Ne.pipeline),s=Fi(`TEST_DOWNLOAD_TOOL_RESPONSE_MESSAGE_FACTORY`,()=>a.message)(),c=!1;try{return yield o(s,z.createWriteStream(t)),f(`download complete`),c=!0,t}finally{if(!c){f(`download failed`);try{yield u(t)}catch(e){f(`Failed to delete '${t}'. ${e.message}`)}}}})}function xi(e,t){return J(this,arguments,void 0,function*(e,t,n=`xz`){if(!e)throw Error(`parameter 'file' is required`);t=yield Oi(t),f(`Checking tar --version`);let r=``;yield s(`tar --version`,[],{ignoreReturnCode:!0,silent:!0,listeners:{stdout:e=>r+=e.toString(),stderr:e=>r+=e.toString()}}),f(r.trim());let i=r.toUpperCase().includes(`GNU TAR`),a;a=n instanceof Array?n:[n],d()&&!n.includes(`v`)&&a.push(`-v`);let o=t,c=e;return vi&&i&&(a.push(`--force-local`),o=t.replace(/\\/g,`/`),c=e.replace(/\\/g,`/`)),i&&(a.push(`--warning=no-unknown-keyword`),a.push(`--overwrite`)),a.push(`-C`,o,`-f`,c),yield s(`tar`,a),t})}function Si(e,t){return J(this,void 0,void 0,function*(){if(!e)throw Error(`parameter 'file' is required`);return t=yield Oi(t),vi?yield Ci(e,t):yield wi(e,t),t})}function Ci(e,t){return J(this,void 0,void 0,function*(){let n=e.replace(/'/g,`''`).replace(/"|\n|\r/g,``),r=t.replace(/'/g,`''`).replace(/"|\n|\r/g,``),i=yield N(`pwsh`,!1);if(i){let e=[`-NoLogo`,`-NoProfile`,`-NonInteractive`,`-ExecutionPolicy`,`Unrestricted`,`-Command`,[`$ErrorActionPreference = 'Stop' ;`,`try { Add-Type -AssemblyName System.IO.Compression.ZipFile } catch { } ;`,`try { [System.IO.Compression.ZipFile]::ExtractToDirectory('${n}', '${r}', $true) }`,`catch { if (($_.Exception.GetType().FullName -eq 'System.Management.Automation.MethodException') -or ($_.Exception.GetType().FullName -eq 'System.Management.Automation.RuntimeException') ){ Expand-Archive -LiteralPath '${n}' -DestinationPath '${r}' -Force } else { throw $_ } } ;`].join(` `)];f(`Using pwsh at path: ${i}`),yield s(`"${i}"`,e)}else{let e=[`-NoLogo`,`-Sta`,`-NoProfile`,`-NonInteractive`,`-ExecutionPolicy`,`Unrestricted`,`-Command`,[`$ErrorActionPreference = 'Stop' ;`,`try { Add-Type -AssemblyName System.IO.Compression.FileSystem } catch { } ;`,`if ((Get-Command -Name Expand-Archive -Module Microsoft.PowerShell.Archive -ErrorAction Ignore)) { Expand-Archive -LiteralPath '${n}' -DestinationPath '${r}' -Force }`,`else {[System.IO.Compression.ZipFile]::ExtractToDirectory('${n}', '${r}', $true) }`].join(` `)],t=yield N(`powershell`,!0);f(`Using powershell at path: ${t}`),yield s(`"${t}"`,e)}})}function wi(e,t){return J(this,void 0,void 0,function*(){let n=yield N(`unzip`,!0),r=[e];d()||r.unshift(`-q`),r.unshift(`-o`),yield s(`"${n}"`,r,{cwd:t})})}function Ti(e,t,n,r){return J(this,void 0,void 0,function*(){if(n=q.clean(n)||n,r||=ve.arch(),f(`Caching tool ${t} ${n} ${r}`),f(`source dir: ${e}`),!z.statSync(e).isDirectory())throw Error(`sourceDir is not a directory`);let i=yield ki(t,n,r);for(let t of z.readdirSync(e))yield S(B.join(e,t),i,{recursive:!0});return Ai(t,n,r),i})}function Ei(e,t,n){if(!e)throw Error(`toolName parameter is required`);if(!t)throw Error(`versionSpec parameter is required`);n||=ve.arch(),ji(t)||(t=Mi(Di(e,n),t));let r=``;if(t){t=q.clean(t)||``;let i=B.join(Ni(),e,t,n);f(`checking cache: ${i}`),z.existsSync(i)&&z.existsSync(`${i}.complete`)?(f(`Found tool in cache ${e} ${t} ${n}`),r=i):f(`not found`)}return r}function Di(e,t){let n=[];t||=ve.arch();let r=B.join(Ni(),e);if(z.existsSync(r)){let e=z.readdirSync(r);for(let i of e)if(ji(i)){let e=B.join(r,i,t||``);z.existsSync(e)&&z.existsSync(`${e}.complete`)&&n.push(i)}}return n}function Oi(e){return J(this,void 0,void 0,function*(){return e||=B.join(Pi(),be.randomUUID()),yield o(e),e})}function ki(e,t,n){return J(this,void 0,void 0,function*(){let r=B.join(Ni(),e,q.clean(t)||t,n||``);f(`destination ${r}`);let i=`${r}.complete`;return yield u(r),yield u(i),yield o(r),r})}function Ai(e,t,n){let r=`${B.join(Ni(),e,q.clean(t)||t,n||``)}.complete`;z.writeFileSync(r,``),f(`finished caching tool`)}function ji(e){let t=q.clean(e)||``;f(`isExplicit: ${t}`);let n=q.valid(t)!=null;return f(`explicit? ${n}`),n}function Mi(e,t){let n=``;f(`evaluating ${e.length} versions`),e=e.sort((e,t)=>q.gt(e,t)?1:-1);for(let r=e.length-1;r>=0;r--){let i=e[r];if(q.satisfies(i,t)){n=i;break}}return f(n?`matched: ${n}`:`match not found`),n}function Ni(){let e=process.env.RUNNER_TOOL_CACHE||``;return Ce(e,`Expected RUNNER_TOOL_CACHE to be defined`),e}function Pi(){let e=process.env.RUNNER_TEMP||``;return Ce(e,`Expected RUNNER_TEMP to be defined`),e}function Fi(e,t){let n=global[e];return n===void 0?t:n}function Ii(e){let t;try{t=JSON.parse(e)}catch(e){throw e instanceof SyntaxError?Error(`Invalid auth-json format: ${e.message}`):e}if(typeof t!=`object`||!t||Array.isArray(t))throw Error(`auth-json must be a JSON object`);return t}async function Li(e,t,n){let r=L.join(t,`auth.json`);await V.mkdir(t,{recursive:!0});let i=JSON.stringify(e,null,2);return await V.writeFile(r,i,{mode:384}),n.info(`Populated auth.json`,{path:r,providers:Object.keys(e).length}),r}function Ri(){let e=R.platform,t=R.arch;return{os:{darwin:`darwin`,linux:`linux`,win32:`windows`}[e]??`linux`,arch:{arm64:`aarch64`,x64:`x64`}[t]??`x64`,ext:`.zip`}}function zi(e,t){return`https://github.com/oven-sh/bun/releases/download/bun-${e.startsWith(`v`)?e:`v${e}`}/${`bun-${t.os}-${t.arch}${t.ext}`}`}async function Bi(e,n,r,i,a=re){let o=Ri(),s=n.find(`bun`,a,o.arch);if(s.length>0)return e.info(`Bun found in cache`,{version:a,path:s}),i(s),await Hi(s),{path:s,version:a,cached:!0};e.info(`Downloading Bun`,{version:a});let c=zi(a,o);try{let t=await n.downloadTool(c);if(R.platform!==`win32`&&!await Ui(t,e,r))throw Error(`Downloaded Bun archive appears corrupted`);e.info(`Extracting Bun`);let s=await Vi(await n.extractZip(t),n),l=ge.dirname(s);e.info(`Caching Bun`);let u=await n.cacheDir(l,`bun`,a,o.arch);return i(u),await Hi(u),e.info(`Bun installed`,{version:a,path:u}),{path:u,version:a,cached:!1}}catch(e){let n=t(e);throw Error(`Failed to install Bun ${a}: ${n}`)}}async function Vi(e,t){for(let n of await Oe.readdir(e,{withFileTypes:!0})){let{name:r}=n,i=ge.join(e,r);if(n.isFile()){if(r===`bun`||r===`bun.exe`)return i;if(/^bun.*\.zip/.test(r))return Vi(await t.extractZip(i),t)}if(r.startsWith(`bun`)&&n.isDirectory())return Vi(i,t)}throw Error(`Could not find executable: bun`)}async function Hi(e){let t=e=>R.platform===`win32`?`${e}.exe`:e,n=ge.join(e,t(`bun`));try{await Oe.symlink(n,ge.join(e,t(`bunx`)))}catch(e){let t=typeof e==`object`?e.code:void 0;if(t!==`EEXIST`&&t!==`EPERM`&&t!==`EACCES`)throw e}}async function Ui(e,t,n){try{let{stdout:r}=await n.getExecOutput(`file`,[e],{silent:!0}),i=r.includes(`Zip archive`)||r.includes(`ZIP`);return i||t.warning(`Bun download validation failed`,{output:r.trim()}),i}catch{return t.debug(`Could not validate Bun download (file command unavailable)`),!0}}function Wi(e){return{debug:t=>e.debug(t),info:t=>e.info(t),warn:t=>e.warning(t),error:t=>e.error(t)}}function Gi(e){let{token:t,logger:n}=e;return n.debug(`Creating GitHub client with token`),mi(t,{log:Wi(n)})}async function Ki(e,t){try{let{data:n}=await e.rest.users.getAuthenticated();return t.debug(`Authenticated as`,{login:n.login,type:n.type}),n.login}catch{return t.debug(`Failed to get authenticated user, may be app token`),`fro-bot[bot]`}}async function qi(e,t,n,r){let i=t??n,a=t==null?n.length>0?`github-token`:`none`:`app-token`;if(i.length===0)return r.warning(`No GitHub token available`),{authenticated:!1,method:`none`,botLogin:null};R.env.GH_TOKEN=i,r.info(`Configured authentication`,{method:a});let o=null;return e!=null&&(o=await Ki(e,r)),{authenticated:!0,method:a,botLogin:o}}async function Ji(e,t){let n=await t.getExecOutput(`git`,[`config`,e],{ignoreReturnCode:!0,silent:!0});return n.exitCode===0&&n.stdout.trim().length>0?n.stdout.trim():null}async function Yi(e,t,n,r){let i=await Ji(`user.name`,r),a=await Ji(`user.email`,r);if(i!=null&&a!=null){n.info(`Git identity already configured`,{name:i,email:a});return}if(t==null)throw Error(`Cannot configure Git identity: no authenticated GitHub user`);let o=null;if(a==null){let r=await tt(e,t,n);if(r==null)throw Error(`Cannot configure Git identity: failed to look up user ID for '${t}'`);o=String(r.id)}i??await r.exec(`git`,[`config`,`--global`,`user.name`,t],void 0);let s=`${o}+${t}@users.noreply.github.com`;a??await r.exec(`git`,[`config`,`--global`,`user.email`,s],void 0),n.info(`Configured git identity`,{name:i??t,email:a??s})}async function Xi(e,n,r={}){let{logger:i,execAdapter:a}=n,{claude:o=`no`,copilot:s=`no`,gemini:c=`no`,openai:l=`no`,opencodeZen:u=`no`,zaiCodingPlan:d=`no`}=r;i.info(`Installing Oh My OpenCode plugin`,{version:e,claude:o,copilot:s,gemini:c,openai:l,opencodeZen:u,zaiCodingPlan:d});let f=``,p=[`oh-my-opencode@${e}`,`install`,`--no-tui`,`--claude=${o}`,`--copilot=${s}`,`--gemini=${c}`,`--openai=${l}`,`--opencode-zen=${u}`,`--zai-coding-plan=${d}`];try{let t=await a.exec(`bunx`,p,{listeners:{stdout:e=>{f+=e.toString()},stderr:e=>{f+=e.toString()}},silent:!0,ignoreReturnCode:!0});if(t!==0){let e=`bunx oh-my-opencode install returned exit code ${t}`;return i.error(e,{output:f.slice(0,1e3)}),{installed:!1,version:null,error:`${e}\n${f.slice(0,500)}`}}let n=/oh-my-opencode@(\d+\.\d+\.\d+)/i.exec(f),r=n!=null&&n[1]!=null?n[1]:e;return i.info(`oMo plugin installed`,{version:r}),{installed:!0,version:r,error:null}}catch(e){let n=t(e),r=f.length>0?`${n}\nOutput: ${f.slice(0,500)}`:n;return i.error(`Failed to run oMo installer`,{error:n,output:f.slice(0,500)}),{installed:!1,version:null,error:`bunx oh-my-opencode install failed: ${r}`}}}const Zi=`opencode`,Qi=`1.2.9`;function $i(){let e=je.platform(),t=je.arch(),n={darwin:`darwin`,linux:`linux`,win32:`windows`},r={x64:`x64`,arm64:`arm64`},i=e===`win32`||e===`darwin`?`.zip`:`.tar.gz`;return{os:n[e]??`linux`,arch:r[t]??`x64`,ext:i}}function ea(e,t){return`https://github.com/anomalyco/opencode/releases/download/${e.startsWith(`v`)?e:`v${e}`}/${`opencode-${t.os}-${t.arch}${t.ext}`}`}async function ta(e,t,n,r){if(R.platform===`win32`)return!0;try{let{stdout:i}=await r.getExecOutput(`file`,[e],{silent:!0}),a=(t===`.zip`?[`Zip archive`,`ZIP`]:[`gzip`,`tar`,`compressed`]).some(e=>i.includes(e));return a||n.warning(`Download validation failed`,{output:i.trim()}),a}catch{return n.debug(`Could not validate download (file command unavailable)`),!0}}async function na(e,n,r,i,a=Qi){let o=$i(),s=r.find(Zi,e,o.arch);if(s.length>0)return n.info(`OpenCode found in cache`,{version:e,path:s}),{path:s,version:e,cached:!0};try{return await ra(e,o,n,r,i)}catch(r){n.warning(`Primary version install failed, trying fallback`,{requestedVersion:e,fallbackVersion:a,error:t(r)})}if(e!==a)try{let e=await ra(a,o,n,r,i);return n.info(`Installed fallback version`,{version:a}),e}catch(n){throw Error(`Failed to install OpenCode (tried ${e} and ${a}): ${t(n)}`)}throw Error(`Failed to install OpenCode version ${e}`)}async function ra(e,t,n,r,i){n.info(`Downloading OpenCode`,{version:e});let a=ea(e,t),o=await r.downloadTool(a);if(!await ta(o,t.ext,n,i))throw Error(`Downloaded archive appears corrupted`);n.info(`Extracting OpenCode`);let s=t.ext===`.zip`?await r.extractZip(o):await r.extractTar(o);n.info(`Caching OpenCode`);let c=await r.cacheDir(s,Zi,e,t.arch);return n.info(`OpenCode installed`,{version:e,path:c}),{path:c,version:e,cached:!1}}async function ia(e){let t=await fetch(`https://api.github.com/repos/anomalyco/opencode/releases/latest`);if(!t.ok)throw Error(`Failed to fetch latest OpenCode version: ${t.statusText}`);let n=(await t.json()).tag_name.replace(/^v/,``);return e.info(`Latest OpenCode version`,{version:n}),n}const aa={restoreCache:async(e,t,n)=>D(e,t,n),saveCache:async(e,t)=>oe(e,t)};function oa(e){let{os:t,opencodeVersion:n,omoVersion:r}=e;return`${he}-${t}-oc-${n}-omo-${r}`}function sa(e){let{os:t,opencodeVersion:n,omoVersion:r}=e;return[`${he}-${t}-oc-${n}-omo-${r}-`]}async function ca(e){let{logger:n,os:r,opencodeVersion:i,omoVersion:a,toolCachePath:o,bunCachePath:s,omoConfigPath:c,cacheAdapter:l=aa}=e,u=oa({os:r,opencodeVersion:i,omoVersion:a}),d=sa({os:r,opencodeVersion:i,omoVersion:a}),f=[o,s,c];n.info(`Restoring tools cache`,{primaryKey:u,restoreKeys:[...d],paths:f});try{let e=await l.restoreCache(f,u,[...d]);return e==null?(n.info(`Tools cache miss - will install tools`),{hit:!1,restoredKey:null}):(n.info(`Tools cache restored`,{restoredKey:e}),{hit:!0,restoredKey:e})}catch(e){return n.warning(`Tools cache restore failed`,{error:t(e)}),{hit:!1,restoredKey:null}}}async function la(e){let{logger:n,os:r,opencodeVersion:i,omoVersion:a,toolCachePath:o,bunCachePath:s,omoConfigPath:c,cacheAdapter:l=aa}=e,u=oa({os:r,opencodeVersion:i,omoVersion:a}),d=[o,s,c];n.info(`Saving tools cache`,{saveKey:u,paths:d});try{return await l.saveCache(d,u),n.info(`Tools cache saved`,{saveKey:u}),!0}catch(e){return e instanceof Error&&e.message.includes(`already exists`)?(n.info(`Tools cache key already exists, skipping save`),!0):(n.warning(`Tools cache save failed`,{error:t(e)}),!1)}}const ua=[`claude`,`claude-max20`,`copilot`,`gemini`,`openai`,`opencode-zen`,`zai-coding-plan`];function da(e){let t=e.split(`,`).map(e=>e.trim().toLowerCase()).filter(e=>e.length>0),n=`no`,r=`no`,i=`no`,a=`no`,o=`no`,s=`no`;for(let e of t)if(ua.includes(e))switch(e){case`claude`:n=`yes`;break;case`claude-max20`:n=`max20`;break;case`copilot`:r=`yes`;break;case`gemini`:i=`yes`;break;case`openai`:a=`yes`;break;case`opencode-zen`:o=`yes`;break;case`zai-coding-plan`:s=`yes`;break}return{claude:n,copilot:r,gemini:i,openai:a,opencodeZen:o,zaiCodingPlan:s}}function fa(){return{find:Ei,downloadTool:yi,extractTar:xi,extractZip:Si,cacheDir:Ti}}function pa(){return{exec:s,getExecOutput:b}}function ma(){return{opencodeVersion:h(`opencode-version`)||`latest`,authJson:h(`auth-json`,{required:!0}),appId:h(`app-id`)||null,privateKey:h(`private-key`)||null,opencodeConfig:h(`opencode-config`)||null}}async function ha(){let e=Date.now(),r=E({component:`setup`}),a=fa(),o=pa();try{let s=ma(),c=h(`github-token`,{required:!0});r.info(`Starting setup`,{version:s.opencodeVersion});let l;try{l=Ii(s.authJson)}catch(e){return I(`Invalid auth-json: ${t(e)}`),null}let u=s.opencodeVersion;if(u===`latest`)try{u=await ia(r)}catch(e){r.warning(`Failed to get latest version, using fallback`,{error:t(e)}),u=Qi}let d=h(`omo-version`).trim(),f=d.length>0?d:A,g=R.env.RUNNER_TOOL_CACHE??`/opt/hostedtoolcache`,_=_e(g,`opencode`),v=_e(g,`bun`),y=_e(Me(),`.config`,`opencode`),b=i(),x=await ca({logger:r,os:b,opencodeVersion:u,omoVersion:f,toolCachePath:_,bunCachePath:v,omoConfigPath:y}),S=x.hit?`hit`:`miss`,C,w=!1,T=null;if(x.hit){let e=a.find(`opencode`,u);e.length>0?(C={path:e,version:u,cached:!0},r.info(`Tools cache hit, using cached OpenCode CLI`,{version:u,omoVersion:f})):r.warning(`Tools cache hit but binary not found in tool-cache, falling through to install`,{requestedVersion:u,restoredKey:x.restoredKey})}if(C==null)try{C=await na(u,r,a,o)}catch(e){return I(`Failed to install OpenCode: ${t(e)}`),null}let ee=!1;try{await Bi(r,a,o,j,re),ee=!0}catch(e){r.warning(`Bun installation failed, oMo will be unavailable`,{error:t(e)})}if(ee){let e=h(`omo-providers`).trim(),t=da(e.length>0?e:se),n=await Xi(f,{logger:r,execAdapter:o},t);n.installed?(r.info(`oMo installed`,{version:n.version}),w=!0):r.warning(`oMo installation failed, continuing without oMo`,{error:n.error??`unknown error`}),T=n.error}x.hit||await la({logger:r,os:b,opencodeVersion:u,omoVersion:f,toolCachePath:_,bunCachePath:v,omoConfigPath:y}),j(C.path),n(`opencode-path`,C.path),n(`opencode-version`,C.version),r.info(`OpenCode ready`,{version:C.version,cached:C.cached});let E=mi(c),te=await qi(E,null,c,r);p(`GH_TOKEN`,c),r.info(`GitHub CLI configured`),await Yi(E,te.botLogin,r,o);let O=_e(m(),`opencode`),ne=await Li(l,O,r);n(`auth-json-path`,ne),r.info(`auth.json populated`,{path:ne});let k=R.env.GITHUB_REPOSITORY??`unknown/unknown`,ie=R.env.GITHUB_REF_NAME??`main`,ae=i(),oe=le({agentIdentity:`github`,repo:k,ref:ie,os:ae}),ce=de({agentIdentity:`github`,repo:k,ref:ie,os:ae}),M=`miss`;try{let e=await D([O],oe,[...ce]);e==null?r.info(`No cache found`):(M=`hit`,r.info(`Cache restored`,{key:e}))}catch(e){M=`corrupted`,r.warning(`Cache restore failed`,{error:t(e)})}n(`cache-status`,M),n(`storage-path`,O);let N=Date.now()-e,ue={opencodePath:C.path,opencodeVersion:C.version,ghAuthenticated:te.authenticated,omoInstalled:w,omoError:T,cacheStatus:M,toolsCacheStatus:S,duration:N};return r.info(`Setup complete`,{duration:N}),ue}catch(e){let n=t(e);return r.error(`Setup failed`,{error:n}),I(n),null}}function ga(e){return{success:!0,data:e}}function _a(e){return{success:!1,error:e}}const va=[`OWNER`,`MEMBER`,`COLLABORATOR`];function ya(e,t){switch(e.eventType){case`issue_comment`:return{directive:`Respond to the comment above. Post your response as a single comment on this thread.`,appendMode:!0};case`discussion_comment`:return{directive:`Respond to the discussion comment above. Post your response as a single comment.`,appendMode:!0};case`issues`:return e.action===`opened`?{directive:`Triage this issue: summarize, reproduce if possible, propose next steps. Post your response as a single comment.`,appendMode:!0}:{directive:`Respond to the mention in this issue. Post your response as a single comment.`,appendMode:!0};case`pull_request`:return{directive:[`Review this pull request for code quality, potential bugs, and improvements.`,"If you are a requested reviewer, submit a review via `gh pr review` with your full response (including Run Summary) in the --body.",`Include the Run Summary in the review body. Do not post a separate comment.`,`If the author is a collaborator, prioritize actionable feedback over style nits.`].join(`
`),appendMode:!0};case`pull_request_review_comment`:return{directive:ba(e),appendMode:!0};case`schedule`:case`workflow_dispatch`:return{directive:t??``,appendMode:!1};default:return{directive:`Execute the requested operation.`,appendMode:!0}}}function ba(e){let t=e.target,n=[`Respond to the review comment.`,``];return t?.path!=null&&n.push(`**File:** \`${t.path}\``),t?.line!=null&&n.push(`**Line:** ${t.line}`),t?.commitId!=null&&n.push(`**Commit:** \`${t.commitId}\``),t?.diffHunk!=null&&t.diffHunk.length>0&&n.push(``,`**Diff Context:**`,"```diff",t.diffHunk,"```"),n.join(`
`)}function xa(e,t){let{directive:n,appendMode:r}=ya(e,t),i=[`## Task`,``];return r?(i.push(n),t!=null&&t.trim().length>0&&i.push(``,`**Additional Instructions:**`,t.trim())):i.push(n),i.push(``),i.join(`
`)}function Sa(e,t){let{context:n,customPrompt:r,cacheStatus:i,sessionContext:a}=e,o=[];if(o.push(`# Agent Context

You are the Fro Bot Agent running in a non-interactive CI environment (GitHub Actions).

## Operating Environment

- **This is NOT an interactive session.** There is no human reading your assistant messages in real time.
- Your assistant messages are logged to the GitHub Actions job output. Use them only for diagnostic information (e.g., files read, decisions made, errors encountered) that helps troubleshoot issues in CI logs.
- The human who invoked you will ONLY see what you post as a GitHub comment or review. Your assistant messages are invisible to them.
- You MUST post your response using the gh CLI (see Response Protocol below). Do not rely on assistant message output to communicate with the user.
`),r!=null&&r.trim().length>0&&e.triggerContext==null&&o.push(`
${r.trim()}

`),e.triggerContext==null?n.commentBody==null?o.push(`## Task

Execute the requested operation for repository ${n.repo}. Follow all instructions and requirements listed in this prompt.
`):o.push(`## Task

Respond to the trigger comment above. Follow all instructions and requirements listed in this prompt.
`):o.push(xa(e.triggerContext,r)),e.triggerContext!=null){let t=e.triggerContext.eventType;(t===`pull_request`||t===`pull_request_review_comment`)&&o.push(Ea(n))}if(o.push(`
## Environment
- **Repository:** ${n.repo}
- **Branch/Ref:** ${n.ref}
- **Event:** ${n.eventName}
- **Actor:** ${n.actor}
- **Run ID:** ${n.runId}
- **Cache Status:** ${i}
`),n.issueNumber!=null){let e=n.issueType===`pr`?`Pull Request`:`Issue`;o.push(`## ${e} Context
- **Number:** #${n.issueNumber}
- **Title:** ${n.issueTitle??`N/A`}
- **Type:** ${n.issueType??`unknown`}
`)}n.commentBody!=null&&o.push(`## Trigger Comment
**Author:** ${n.commentAuthor??`unknown`}

\`\`\`
${n.commentBody}
\`\`\`
`),a!=null&&o.push(wa(a)),n.diffContext!=null&&o.push(Ta(n.diffContext)),n.hydratedContext!=null&&o.push(Ve(n.hydratedContext)),o.push(`## Session Management (REQUIRED)

Before investigating any issue:
1. Use \`session_search\` to find relevant prior sessions for this repository
2. Use \`session_read\` to review prior work if found
3. Avoid repeating investigation already completed in previous sessions

Before completing:
1. Ensure your session contains a summary of work done
2. Include key decisions, findings, and outcomes
3. This summary will be searchable in future agent runs
`),n.issueNumber!=null&&o.push(Ca(n,i,e.sessionId));let s=n.issueNumber??`<number>`,c=n.issueNumber!=null;o.push(`## GitHub Operations (Use gh CLI)

The \`gh\` CLI is pre-authenticated. Use it for all GitHub operations.
${c?`
### Posting Your Response

See **Response Protocol** above. Post exactly one comment or review per run.

\`\`\`bash
# Post response as PR comment (use --body-file for long responses)
gh pr comment ${s} --body "Your response with Run Summary"

# Submit PR review with response in body
gh pr review ${s} --approve --body "Your review with Run Summary"

# Post response as issue comment
gh issue comment ${s} --body "Your response with Run Summary"
\`\`\``:``}

### Creating PRs
\`\`\`bash
gh pr create --title "feat(scope): description" --body "Details..." --base ${n.defaultBranch} --head feature-branch
\`\`\`

### Pushing Commits
\`\`\`bash
git add .
git commit -m "type(scope): description"
git push origin HEAD
\`\`\`

### API Calls
\`\`\`bash
gh api repos/${n.repo}/issues --jq '.[].title'
gh api repos/${n.repo}/pulls/${s}/files --jq '.[].filename'
\`\`\`
`);let l=o.join(`
`);return t.debug(`Built agent prompt`,{length:l.length,hasCustom:r!=null,hasSessionContext:a!=null}),l}function Ca(e,t,n){let r=e.issueNumber??`<number>`;return`## Response Protocol (REQUIRED)

You MUST post exactly ONE comment or review per invocation. All of your output â€” your response content AND the Run Summary â€” goes into that single artifact.

### Rules

1. **One output per run.** Post exactly ONE comment (via \`gh issue comment\` or \`gh pr comment\`) or ONE review (via \`gh pr review\`). Never both. Never multiple comments.
2. **Include the Run Summary.** Append the Run Summary block (see template below) at the end of your response body. It is part of the same comment/review, not a separate post.
3. **NEVER post the Run Summary as a separate comment.** This is the most common mistake. The Run Summary goes INSIDE your response.
4. **Include the bot marker.** Your response must contain \`<!-- fro-bot-agent -->\` (inside the Run Summary block) so the system can identify your comment.
5. **For PR reviews:** When using \`gh pr review --approve\` or \`gh pr review --request-changes\`, put your full response (analysis + Run Summary) in the \`--body\` argument. Do not post a separate PR comment afterward.
6. **For issue/PR comments:** Post a single \`gh issue comment ${r}\` or \`gh pr comment ${r}\` with your full response including Run Summary.

### Unified Response Format

Every response you post â€” regardless of channel (issue, PR, discussion, review) â€” MUST follow this structure:

\`\`\`markdown
[Your response content here]

---

<!-- fro-bot-agent -->
<details>
<summary>Run Summary</summary>

| Field | Value |
|-------|-------|
| Event | ${e.eventName} |
| Repository | ${e.repo} |
| Run ID | ${e.runId} |
| Cache | ${t} |
| Session | ${n??`<your_session_id>`} |

</details>
\`\`\`
`}function wa(e){let t=[`## Prior Session Context`];if(e.recentSessions.length>0){t.push(``),t.push(`### Recent Sessions`),t.push(`| ID | Title | Updated | Messages | Agents |`),t.push(`|----|-------|---------|----------|--------|`);for(let n of e.recentSessions.slice(0,5)){let e=new Date(n.updatedAt).toISOString().split(`T`)[0],r=n.agents.join(`, `)||`N/A`,i=n.title||`Untitled`;t.push(`| ${n.id} | ${i} | ${e} | ${n.messageCount} | ${r} |`)}t.push(``),t.push("Use `session_read` to review any of these sessions in detail.")}if(e.priorWorkContext.length>0){t.push(``),t.push(`### Relevant Prior Work`),t.push(``),t.push(`The following sessions contain content related to this issue:`),t.push(``);for(let n of e.priorWorkContext.slice(0,3)){t.push(`**Session ${n.sessionId}:**`),t.push("```markdown");for(let e of n.matches.slice(0,2))t.push(`- ${e.excerpt}`);t.push("```"),t.push(``)}t.push("Use `session_read` to review full context before starting new investigation.")}return t.push(``),t.join(`
`)}function Ta(e){let t=[`## Pull Request Diff Summary`];if(t.push(``),t.push(`- **Changed Files:** ${e.changedFiles}`),t.push(`- **Additions:** +${e.additions}`),t.push(`- **Deletions:** -${e.deletions}`),e.truncated&&t.push(`- **Note:** Diff was truncated due to size limits`),e.files.length>0){t.push(``),t.push(`### Changed Files`),t.push(`| File | Status | +/- |`),t.push(`|------|--------|-----|`);for(let n of e.files.slice(0,20))t.push(`| \`${n.filename}\` | ${n.status} | +${n.additions}/-${n.deletions} |`);e.files.length>20&&t.push(`| ... | | +${e.files.length-20} more files |`)}return t.push(``),t.join(`
`)}function Ea(e){let t=[`## Output Contract`,``];return t.push(`- Review action: approve/request-changes if confident; otherwise comment-only`),t.push(`- Requested reviewer: ${e.isRequestedReviewer?`yes`:`no`}`),e.authorAssociation!=null&&t.push(`- Author association: ${e.authorAssociation}`),t.push(``),t.join(`
`)}function Da(e,t){t.debug(`Server event`,{eventType:e.type,properties:e.properties})}function Oa(e,t,n,r,i){let a=wn(t);if(e.includes(`gh pr create`)){let e=a.filter(e=>e.includes(`/pull/`)&&!e.includes(`#`));for(let t of e)n.includes(t)||n.push(t)}if(e.includes(`git commit`)){let e=Tn(t);for(let t of e)r.includes(t)||r.push(t)}(e.includes(`gh issue comment`)||e.includes(`gh pr comment`))&&a.some(e=>e.includes(`#issuecomment`))&&i()}async function ka(e,t,n,r,i){let a=``,o=null,s=null,c=null,l=[],u=[],d=0,f=null;for await(let p of e){if(n.aborted)break;if(Da(p,r),p.type===`message.part.updated`){let e=p.properties.part;if(e.sessionID!==t)continue;if(i!=null&&(i.firstMeaningfulEventReceived=!0),e.type===`text`&&`text`in e&&typeof e.text==`string`){a=e.text;let t=`time`in e?e.time?.end:void 0;t!=null&&Number.isFinite(t)&&(dn(a),a=``)}else if(e.type===`tool`){let t=e.state;if(t.status===`completed`){let n=e.tool,r=t.input,i=t.title;un(n,i),n.toLowerCase()===`bash`&&Oa(String(r.command??r.cmd??``),String(t.output),l,u,()=>{d++})}}}else if(p.type===`message.updated`){let e=p.properties.info;e.sessionID===t&&e.role===`assistant`&&e.tokens!=null&&(i!=null&&(i.firstMeaningfulEventReceived=!0),o={input:e.tokens.input??0,output:e.tokens.output??0,reasoning:e.tokens.reasoning??0,cache:{read:e.tokens.cache?.read??0,write:e.tokens.cache?.write??0}},s=e.modelID??null,c=e.cost??null,r.debug(`Token usage received`,{tokens:o,model:s,cost:c}))}else if(p.type===`session.error`){if(p.properties.sessionID===t){let e=p.properties.error;r.error(`Session error`,{error:e});let t=typeof e==`string`?e:String(e);f=_n(e)?vn(t,s??void 0):(bn(t),xn(t)),i!=null&&(i.sessionError=t)}}else p.type===`session.idle`&&p.properties.sessionID===t&&(i!=null&&(i.sessionIdle=!0),a.length>0&&(dn(a),a=``))}return a.length>0&&dn(a),{tokens:o,model:s,cost:c,prsCreated:l,commitsCreated:u,commentsPosted:d,llmError:f}}async function Aa(e,n,r,i,a,o=fe,s){let c=Date.now(),l=0;for(;!i.aborted;){if(await on(500),i.aborted)return{completed:!1,error:`Aborted`};if(s?.sessionError==null)l=0;else{if(l++,l>=3)return a.error(`Session error persisted through grace period`,{sessionId:n,error:s.sessionError,graceCycles:l}),{completed:!1,error:`Session error: ${s.sessionError}`};continue}if(s?.sessionIdle===!0)return a.debug(`Session idle detected via event stream`,{sessionId:n}),{completed:!0,error:null};let u=Date.now()-c;if(o>0&&u>=o)return a.warning(`Poll timeout reached`,{elapsedMs:u,maxPollTimeMs:o}),{completed:!1,error:`Poll timeout after ${u}ms`};try{let t=((await e.session.status({query:{directory:r}})).data??{})[n];if(t==null)a.debug(`Session status not found in poll response`,{sessionId:n});else if(t.type===`idle`)return a.debug(`Session idle detected via polling`,{sessionId:n}),{completed:!0,error:null};else a.debug(`Session status`,{sessionId:n,type:t.type});if(s!=null&&!s.firstMeaningfulEventReceived){let e=Date.now()-c;if(e>=9e4)return a.error(`No agent activity detected â€” server may have crashed during prompt processing`,{elapsedMs:e,sessionId:n}),{completed:!1,error:`No agent activity detected after ${e}ms â€” server may have crashed during prompt processing`}}}catch(e){a.debug(`Poll request failed`,{error:t(e)})}}return{completed:!1,error:`Aborted`}}async function ja(e,t=2e3){await Promise.race([e,new Promise(e=>{setTimeout(e,t)})])}const Y=5e3;async function Ma(e,t,n,r,i,a,o){let s=a?.agent??O,c=new AbortController,l={firstMeaningfulEventReceived:!1,sessionIdle:!1,sessionError:null},u=await e.event.subscribe(),d={tokens:null,model:null,cost:null,prsCreated:[],commitsCreated:[],commentsPosted:0,llmError:null},f=ka(u.stream,t,c.signal,o,l).then(e=>{d=e}).catch(e=>{e instanceof Error&&e.name!==`AbortError`&&o.debug(`Event stream error`,{error:e.message})}),p=async()=>{c.abort(),await ja(f)},m=[{type:`text`,text:n}];r!=null&&r.length>0&&(m.push(...r),o.info(`Including file attachments in prompt`,{count:r.length}));let h={model:a?.model==null?{providerID:M.providerID,modelID:M.modelID}:{providerID:a.model.providerID,modelID:a.model.modelID},parts:m};s!==O&&(h.agent=s),o.debug(`Sending prompt to OpenCode`,{sessionId:t});try{let n=await e.session.promptAsync({path:{id:t},body:h,query:{directory:i}});if(n.error!=null){o.error(`OpenCode prompt failed`,{error:String(n.error)}),await p();let e=_n(n.error)?vn(String(n.error),d.model??void 0):d.llmError;return{success:!1,error:String(n.error),llmError:e,shouldRetry:e!=null,eventStreamResult:d}}let r=a?.timeoutMs??fe,s=await Aa(e,t,i,c.signal,o,r,l);if(await p(),!s.completed){let e=s.error??`Session did not reach idle state`;return o.error(`Session completion polling failed`,{error:e,sessionId:t}),{success:!1,error:e,llmError:d.llmError,shouldRetry:d.llmError!=null,eventStreamResult:d}}return{success:!0,error:null,llmError:null,shouldRetry:!1,eventStreamResult:d}}finally{c.abort(),await ja(f)}}async function Na(e,t){try{let{client:n,server:r}=await an({signal:e});return t.debug(`OpenCode server bootstrapped`,{url:r.url}),ga({client:n,server:r,shutdown:()=>{r.close()}})}catch(e){let n=e instanceof Error?e.message:String(e);return t.warning(`Failed to bootstrap OpenCode server`,{error:n}),_a(Error(`Server bootstrap failed: ${n}`))}}async function Pa(e,n,i,a){let o=Date.now(),s=new AbortController,c=i?.timeoutMs??fe,l=null,u=!1,d=a==null,f=null;c>0&&(l=setTimeout(()=>{u=!0,n.warning(`Execution timeout reached`,{timeoutMs:c}),s.abort()},c)),n.info(`Executing OpenCode agent (SDK mode)`,{agent:i?.agent??O,hasModelOverride:i?.model!=null,timeoutMs:c});try{let l;if(a==null){let e=await an({signal:s.signal});l=e.client,f=e.server,n.debug(`OpenCode server started`,{url:f.url})}else l=a.client,n.debug(`Reusing external OpenCode server`,{url:a.server.url});let d=await l.session.create();if(d.data==null||d.error!=null){let e=d.error==null?`No data returned`:String(d.error);throw Error(`Failed to create session: ${e}`)}let p=d.data.id;n.debug(`Session created`,{sessionId:p});let m=Sa({...e,sessionId:p},n),h=r();if(ae()){let e=y(),t=Ee.createHash(`sha256`).update(m).digest(`hex`),r=L.join(e,`prompt-${p}-${t.slice(0,8)}.txt`);try{await V.mkdir(e,{recursive:!0}),await V.writeFile(r,m,`utf8`),n.info(`Prompt artifact written`,{hash:t,path:r})}catch(e){n.warning(`Failed to write prompt artifact`,{error:e instanceof Error?e.message:String(e),path:r})}}let g=null,_=null,v=null,b=[],x=[],S=0,C=null,w=null;for(let r=1;r<=3;r++){if(u)return{success:!1,exitCode:130,duration:Date.now()-o,sessionId:p,error:`Execution timed out after ${c}ms`,tokenUsage:g,model:_,cost:v,prsCreated:b,commitsCreated:x,commentsPosted:S,llmError:w};let a=c-(Date.now()-o);if(c>0&&a<=Y&&r>1){n.warning(`Insufficient time remaining for retry`,{remainingMs:a,requiredMs:Y,attempt:r});break}let s=r===1?m:`The previous request was interrupted by a network error (fetch failed).
Please continue where you left off. If you were in the middle of a task, resume it.
If you had completed the task, confirm the completion.`,d=r===1?e.fileParts:void 0;n.debug(`Sending prompt`,{attempt:r,isRetry:r>1});try{let e=await Ma(l,p,s,d,h,i,n);if(e.success){let{eventStreamResult:t}=e;g=t.tokens,_=t.model,v=t.cost,b=[...t.prsCreated],x=[...t.commitsCreated],S=t.commentsPosted;let i=Date.now()-o;return n.info(`OpenCode execution completed`,{sessionId:p,durationMs:i,attempts:r}),{success:!0,exitCode:0,duration:i,sessionId:p,error:null,tokenUsage:g,model:_,cost:v,prsCreated:b,commitsCreated:x,commentsPosted:S,llmError:null}}if(C=e.error,w=e.llmError,!e.shouldRetry||r>=3){e.shouldRetry&&r>=3&&n.warning(`LLM fetch error: max retries exhausted`,{attempts:r,error:e.error});break}n.warning(`LLM fetch error detected, retrying with continuation prompt`,{attempt:r,maxAttempts:3,error:e.error,delayMs:Y,sessionId:p}),await on(Y)}catch(e){let i=t(e);n.error(`Prompt attempt failed with exception`,{attempt:r,error:i}),C=i;let a=_n(e)?vn(i):null;if(w=a,a==null||r>=3){a!=null&&r>=3&&n.warning(`LLM fetch error: max retries exhausted`,{attempts:r,error:i});break}n.warning(`LLM fetch error detected (exception), retrying with continuation prompt`,{attempt:r,maxAttempts:3,error:i,delayMs:Y,sessionId:p}),await on(Y)}}return{success:!1,exitCode:1,duration:Date.now()-o,sessionId:p,error:C??`Unknown error`,tokenUsage:g,model:_,cost:v,prsCreated:b,commitsCreated:x,commentsPosted:S,llmError:w}}catch(e){let r=Date.now()-o,i=t(e);return n.error(`OpenCode execution failed`,{error:i,durationMs:r}),{success:!1,exitCode:1,duration:r,sessionId:null,error:i,tokenUsage:null,model:null,cost:null,prsCreated:[],commitsCreated:[],commentsPosted:0,llmError:_n(e)?vn(i):null}}finally{l!=null&&clearTimeout(l),s.abort(),d&&f?.close()}}async function Fa(e,t){let n=e??`opencode`;try{let e=``;await s(n,[`--version`],{listeners:{stdout:t=>{e+=t.toString()}},silent:!0});let r=/(\d+\.\d+\.\d+)/.exec(e)?.[1]??null;return t.debug(`OpenCode version verified`,{version:r}),{available:!0,version:r}}catch{return t.debug(`OpenCode not available, will attempt auto-setup`),{available:!1,version:null}}}async function Ia(e){let{logger:t,opencodeVersion:n}=e,r=R.env.OPENCODE_PATH??null,i=await Fa(r,t);if(i.available&&i.version!=null)return t.info(`OpenCode already available`,{version:i.version}),{path:r??`opencode`,version:i.version,didSetup:!1};t.info(`OpenCode not found, running auto-setup`,{requestedVersion:n});let a=await ha();if(a==null)throw Error(`Auto-setup failed: runSetup returned null`);return j(a.opencodePath),R.env.OPENCODE_PATH=a.opencodePath,t.info(`Auto-setup completed`,{version:a.opencodeVersion,path:a.opencodePath}),{path:a.opencodePath,version:a.opencodeVersion,didSetup:!0}}const La=`agent: working`;async function Ra(e,t,n){return t.commentId==null?(n.debug(`No comment ID, skipping eyes reaction`),!1):await Je(e,t.repo,t.commentId,`eyes`,n)==null?!1:(n.info(`Added eyes reaction`,{commentId:t.commentId}),!0)}async function za(e,t,n){return t.issueNumber==null?(n.debug(`No issue number, skipping working label`),!1):await Ze(e,t.repo,La,`fcf2e1`,`Agent is currently working on this`,n)&&await Qe(e,t.repo,t.issueNumber,[La],n)?(n.info(`Added working label`,{issueNumber:t.issueNumber}),!0):!1}async function Ba(e,t,n){await Promise.all([Ra(e,t,n),za(e,t,n)])}async function Va(e,t,n){if(t.commentId==null||t.botLogin==null)return;let r=(await Ye(e,t.repo,t.commentId,n)).find(e=>e.content===`eyes`&&e.userLogin===t.botLogin);r!=null&&await Xe(e,t.repo,t.commentId,r.id,n)}async function Ha(e,t,n,r){t.commentId!=null&&await Je(e,t.repo,t.commentId,n,r)}async function Ua(e,n,r){if(n.commentId==null||n.botLogin==null){r.debug(`Missing comment ID or bot login, skipping reaction update`);return}try{await Va(e,n,r),await Ha(e,n,`hooray`,r),r.info(`Updated reaction to success indicator`,{commentId:n.commentId,reaction:`hooray`})}catch(e){r.warning(`Failed to update reaction (non-fatal)`,{error:t(e)})}}async function Wa(e,n,r){if(n.commentId==null||n.botLogin==null){r.debug(`Missing comment ID or bot login, skipping reaction update`);return}try{await Va(e,n,r),await Ha(e,n,`confused`,r),r.info(`Updated reaction to confused`,{commentId:n.commentId})}catch(e){r.warning(`Failed to update failure reaction (non-fatal)`,{error:t(e)})}}async function Ga(e,t,n){if(t.issueNumber==null){n.debug(`No issue number, skipping label removal`);return}await $e(e,t.repo,t.issueNumber,La,n)&&n.info(`Removed working label`,{issueNumber:t.issueNumber})}async function Ka(e,t,n,r){n?await Ua(e,t,r):await Wa(e,t,r),await Ga(e,t,r)}const qa={markdownImage:/!\[([^\]]*)\]\((https:\/\/github\.com\/user-attachments\/assets\/[^)]+)\)/gi,markdownLink:/\[([^\]]+)\]\((https:\/\/github\.com\/user-attachments\/files\/[^)]+)\)/gi,htmlImage:/<img[^>]*src=["'](https:\/\/github\.com\/user-attachments\/assets\/[^"']+)["'][^>]*>/gi};function Ja(e,t,n){e.lastIndex=0;let r=e.exec(t);for(;r!=null;)n(r),r=e.exec(t);e.lastIndex=0}function Ya(e){let t=[],n=new Set;return Ja(qa.markdownImage,e,e=>{let r=e[2],i=e[1],a=e[0];r!=null&&i!=null&&!n.has(r)&&Cn(r)&&(n.add(r),t.push({url:r,originalMarkdown:a,altText:i,type:`image`}))}),Ja(qa.markdownLink,e,e=>{let r=e[2],i=e[1],a=e[0];r!=null&&i!=null&&!n.has(r)&&Cn(r)&&(n.add(r),t.push({url:r,originalMarkdown:a,altText:i,type:`file`}))}),Ja(qa.htmlImage,e,e=>{let r=e[1],i=e[0];if(r!=null&&!n.has(r)&&Cn(r)){n.add(r);let e=/alt=["']([^"']*)["']/i.exec(i);t.push({url:r,originalMarkdown:i,altText:e?.[1]??``,type:`image`})}}),qa.htmlImage.lastIndex=0,t}function Xa(e,t,n){try{let r=new URL(e).pathname.split(`/`).at(-1);if(r!=null&&/\.[a-z0-9]+$/i.test(r))return r;if(t.trim().length>0){let e=t.replaceAll(/[^\w.-]/g,`_`).slice(0,50);return e.trim().length>0?e:`attachment_${n+1}`}return`attachment_${n+1}`}catch{return`attachment_${n+1}`}}const Za={maxFiles:5,maxFileSizeBytes:5*1024*1024,maxTotalSizeBytes:15*1024*1024,allowedMimeTypes:[`image/png`,`image/jpeg`,`image/gif`,`image/webp`,`image/svg+xml`,`text/plain`,`text/markdown`,`text/csv`,`application/json`,`application/pdf`]},Qa=[`github.com`,`githubusercontent.com`];async function $a(e,n,r,i,a){a.debug(`Downloading attachment`,{url:e.url});try{let t=await fetch(e.url,{headers:{Authorization:`Bearer ${r}`,Accept:`*/*`,"User-Agent":`fro-bot-agent`},redirect:`manual`}),o=t;if(t.status>=300&&t.status<400){let n=t.headers.get(`location`);if(n==null)return a.warning(`Redirect without location`,{url:e.url}),null;let r=new URL(n);if(!Qa.some(e=>r.hostname===e||r.hostname.endsWith(`.${e}`)))return a.warning(`Redirect to non-GitHub host blocked`,{url:e.url,redirectTo:r.hostname}),null;o=await fetch(n,{headers:{Accept:`*/*`,"User-Agent":`fro-bot-agent`},redirect:`follow`})}if(!o.ok)return a.warning(`Attachment download failed`,{url:e.url,status:o.status}),null;let s=o.headers.get(`content-length`);if(s!=null){let t=Number.parseInt(s,10);if(t>i.maxFileSizeBytes)return a.warning(`Attachment exceeds size limit (Content-Length)`,{url:e.url,size:t,limit:i.maxFileSizeBytes}),null}let c=Te.from(await o.arrayBuffer());if(c.length>i.maxFileSizeBytes)return a.warning(`Attachment exceeds size limit`,{url:e.url,size:c.length,limit:i.maxFileSizeBytes}),null;let l=o.headers.get(`content-type`)??`application/octet-stream`,u=Xa(e.url,e.altText,n),d=l.split(`;`)[0],f=d==null?`application/octet-stream`:d.trim(),p=await V.mkdtemp(L.join(Ae.tmpdir(),`fro-bot-attachments-`)),m=u.trim().length>0?u:`attachment_${n+1}`,h=L.join(p,m);return await V.writeFile(h,c),a.debug(`Attachment downloaded`,{filename:u,mime:f,sizeBytes:c.length,tempPath:h}),{url:e.url,filename:u,mime:f,sizeBytes:c.length,tempPath:h}}catch(n){return a.warning(`Attachment download error`,{url:e.url,error:t(n)}),null}}async function eo(e,t,n=Za,r){return Promise.all(e.map(async(e,i)=>$a(e,i,t,n,r)))}async function to(e,n){for(let r of e)try{await V.unlink(r);let e=L.dirname(r);await V.rmdir(e).catch(()=>{})}catch(e){n.debug(`Failed to cleanup temp file`,{path:r,error:t(e)})}}function no(e){return e.map(e=>({type:`file`,mime:e.mime,url:De(e.tempPath).toString(),filename:e.filename}))}function ro(e,t,n){let r=e,i=new Set(n.map(e=>e.filename));for(let e of t){let t=n.find(e=>i.has(e.filename));t!=null&&(r=r.replace(e.originalMarkdown,`@${t.filename}`))}return r}function io(e,t,n,r){return{processed:n,skipped:r,modifiedBody:ro(e,t,n),fileParts:no(n),tempFiles:n.map(e=>e.tempPath)}}function ao(e){if(e<0||!Number.isFinite(e))throw Error(`Invalid bytes value: ${e}`);return e<1024?`${e}B`:e<1024*1024?`${(e/1024).toFixed(1)}KB`:`${(e/(1024*1024)).toFixed(1)}MB`}function oo(e,t=Za,n){let r=[],i=[],a=0;for(let o of e)if(o!=null){if(r.length>=t.maxFiles){i.push({url:o.url,reason:`Exceeds max file count (${t.maxFiles})`}),n.debug(`Attachment skipped: max count`,{url:o.url});continue}if(o.sizeBytes>t.maxFileSizeBytes){i.push({url:o.url,reason:`File too large (${ao(o.sizeBytes)} > ${ao(t.maxFileSizeBytes)})`}),n.debug(`Attachment skipped: too large`,{url:o.url,size:o.sizeBytes});continue}if(a+o.sizeBytes>t.maxTotalSizeBytes){i.push({url:o.url,reason:`Would exceed total size limit (${ao(t.maxTotalSizeBytes)})`}),n.debug(`Attachment skipped: total size exceeded`,{url:o.url});continue}if(!so(o.mime,t.allowedMimeTypes)){i.push({url:o.url,reason:`MIME type not allowed: ${o.mime}`}),n.debug(`Attachment skipped: MIME type`,{url:o.url,mime:o.mime});continue}a+=o.sizeBytes,r.push({filename:o.filename,mime:o.mime,sizeBytes:o.sizeBytes,tempPath:o.tempPath}),n.info(`Attachment validated`,{filename:o.filename,mime:o.mime,sizeBytes:o.sizeBytes})}return{validated:r,skipped:i}}function so(e,t){let[n]=e.split(`/`);for(let r of t)if(r===e||r.endsWith(`/*`)&&n!=null&&n===r.slice(0,-2))return!0;return!1}const co=`<!-- fro-bot-agent -->`;function lo(e,t){return t==null?!1:e===t||e===`${t}[bot]`}function uo(e,t,n){return lo(e,n)&&t.includes(co)}async function fo(e,n,r){try{if(n.type===`pr`){let{data:t}=await e.rest.pulls.get({owner:n.owner,repo:n.repo,pull_number:n.number});return{title:t.title,body:t.body??``,author:t.user?.login??`unknown`}}let{data:t}=await e.rest.issues.get({owner:n.owner,repo:n.repo,issue_number:n.number});return{title:t.title,body:t.body??``,author:t.user?.login??`unknown`}}catch(e){return r.warning(`Failed to fetch issue/PR`,{target:n,error:t(e)}),null}}async function po(e,n,r,i){let a=[],o=1;for(;o<=50;)try{let{data:t}=await e.rest.issues.listComments({owner:n.owner,repo:n.repo,issue_number:n.number,per_page:100,page:o});if(t.length===0)break;for(let e of t){let t=e.user?.login??`unknown`;a.push({id:e.id,body:e.body??``,author:t,authorAssociation:e.author_association??`NONE`,createdAt:e.created_at,updatedAt:e.updated_at,isBot:uo(t,e.body??``,r)})}if(t.length<100)break;o++}catch(e){i.warning(`Failed to fetch comments page`,{target:n,page:o,error:t(e)});break}return a}async function mo(e,n,r,i){try{let t=[],a=null,o=null,s=``,c=``,l=`unknown`,u=0;for(;u<50;){let d=(await e.graphql(`
  query GetDiscussion($owner: String!, $repo: String!, $number: Int!, $after: String) {
    repository(owner: $owner, name: $repo) {
      discussion(number: $number) {
        id
        title
        body
        author { login }
        comments(first: 100, after: $after) {
          nodes {
            id
            body
            author { login }
            createdAt
            updatedAt
          }
          pageInfo {
            hasNextPage
            endCursor
          }
        }
      }
    }
  }
`,{owner:n.owner,repo:n.repo,number:n.number,after:a})).repository.discussion;if(d==null)return i.debug(`Discussion not found`,{target:n}),null;u===0&&(o=d.id,s=d.title,c=d.body,l=d.author?.login??`unknown`);for(let e of d.comments.nodes){let n=e.author?.login??`unknown`;t.push({id:e.id,body:e.body,author:n,authorAssociation:`NONE`,createdAt:e.createdAt,updatedAt:e.updatedAt,isBot:uo(n,e.body,r)})}if(!d.comments.pageInfo.hasNextPage)break;a=d.comments.pageInfo.endCursor,u++}return{type:`discussion`,number:n.number,title:s,body:c,author:l,comments:t,discussionId:o??void 0}}catch(e){return i.warning(`Failed to fetch discussion`,{target:n,error:t(e)}),null}}async function ho(e,t,n,r){if(t.type===`discussion`)return mo(e,t,n,r);let i=await fo(e,t,r);if(i==null)return null;let a=await po(e,t,n,r);return{type:t.type,number:t.number,title:i.title,body:i.body,author:i.author,comments:a}}function go(e,t){let n=e.comments.filter(e=>lo(e.author,t)&&e.body.includes(co));return n.length===0?null:n.at(-1)??null}async function _o(e,n,r,i){try{let{data:t}=await e.rest.issues.createComment({owner:n.owner,repo:n.repo,issue_number:n.number,body:r});return i.debug(`Created issue comment`,{commentId:t.id,target:n}),{commentId:t.id,created:!0,updated:!1,url:t.html_url}}catch(e){return i.warning(`Failed to create issue comment`,{target:n,error:t(e)}),null}}async function vo(e,n,r,i,a){try{let{data:t}=await e.rest.issues.updateComment({owner:n.owner,repo:n.repo,comment_id:r,body:i});return a.debug(`Updated issue comment`,{commentId:t.id,target:n}),{commentId:t.id,created:!1,updated:!0,url:t.html_url}}catch(e){return a.warning(`Failed to update issue comment`,{target:n,commentId:r,error:t(e)}),null}}async function yo(e,n,r,i){try{let t=(await e.graphql(`
  query GetDiscussionId($owner: String!, $repo: String!, $number: Int!) {
    repository(owner: $owner, name: $repo) {
      discussion(number: $number) {
        id
        title
        body
        author { login }
        comments(first: 100) {
          nodes {
            id
            body
            author { login }
            createdAt
            updatedAt
          }
          pageInfo { hasNextPage endCursor }
        }
      }
    }
  }
`,{owner:n.owner,repo:n.repo,number:n.number})).repository.discussion;if(t==null)return i.warning(`Discussion not found`,{target:n}),null;if(r.updateExisting===!0&&r.botLogin!=null){let t=await ho(e,n,r.botLogin,i);if(t!=null){let n=go(t,r.botLogin);if(n!=null&&typeof n.id==`string`){let t=await e.graphql(`
  mutation UpdateDiscussionComment($commentId: ID!, $body: String!) {
    updateDiscussionComment(input: {commentId: $commentId, body: $body}) {
      comment { id url }
    }
  }
`,{commentId:n.id,body:r.body});return i.debug(`Updated discussion comment`,{commentId:n.id}),{commentId:t.updateDiscussionComment.comment.id,created:!1,updated:!0,url:t.updateDiscussionComment.comment.url}}}}let a=await e.graphql(`
  mutation AddDiscussionComment($discussionId: ID!, $body: String!) {
    addDiscussionComment(input: {discussionId: $discussionId, body: $body}) {
      comment { id url }
    }
  }
`,{discussionId:t.id,body:r.body});return i.debug(`Created discussion comment`,{discussionId:t.id}),{commentId:a.addDiscussionComment.comment.id,created:!0,updated:!1,url:a.addDiscussionComment.comment.url}}catch(e){return i.warning(`Failed to post discussion comment`,{target:n,error:t(e)}),null}}async function bo(e,t,n,r){if(t.type===`discussion`)return yo(e,t,n,r);if(n.updateExisting===!0&&n.botLogin!=null){let i=await ho(e,t,n.botLogin,r);if(i!=null){let a=go(i,n.botLogin);if(a!=null&&typeof a.id==`number`)return vo(e,t,a.id,n.body,r)}}return _o(e,t,n.body,r)}function xo(e){switch(e){case`issue_comment`:return`issue_comment`;case`discussion`:case`discussion_comment`:return`discussion_comment`;case`workflow_dispatch`:return`workflow_dispatch`;case`issues`:return`issues`;case`pull_request`:return`pull_request`;case`pull_request_review_comment`:return`pull_request_review_comment`;case`schedule`:return`schedule`;default:return`unsupported`}}function So(e,t){switch(e){case`issue_comment`:{let e=t;return{type:`issue_comment`,action:e.action,issue:{number:e.issue.number,title:e.issue.title,body:e.issue.body??null,locked:e.issue.locked??!1,isPullRequest:e.issue.pull_request!=null},comment:{id:e.comment.id,body:e.comment.body,author:e.comment.user.login,authorAssociation:e.comment.author_association??`NONE`}}}case`discussion_comment`:{let e=t;return{type:`discussion_comment`,action:e.action,discussion:{number:e.discussion.number,title:e.discussion.title,body:e.discussion.body??null,locked:e.discussion.locked??!1},comment:{id:e.comment.id,body:e.comment.body??null,author:e.comment.user.login,authorAssociation:e.comment.author_association??`NONE`}}}case`issues`:{let e=t;return{type:`issues`,action:e.action,issue:{number:e.issue.number,title:e.issue.title,body:e.issue.body??null,locked:e.issue.locked??!1,authorAssociation:e.issue.author_association??`NONE`},sender:{login:e.sender.login}}}case`pull_request`:{let e=t;return{type:`pull_request`,action:e.action,pullRequest:{number:e.pull_request.number,title:e.pull_request.title,body:e.pull_request.body??null,locked:e.pull_request.locked??!1,draft:e.pull_request.draft??!1,authorAssociation:e.pull_request.author_association??`NONE`},sender:{login:e.sender.login}}}case`pull_request_review_comment`:{let e=t;return{type:`pull_request_review_comment`,action:e.action,pullRequest:{number:e.pull_request.number,title:e.pull_request.title,locked:e.pull_request.locked??!1},comment:{id:e.comment.id,body:e.comment.body,author:e.comment.user.login,authorAssociation:e.comment.author_association,path:e.comment.path,line:e.comment.line??null,diffHunk:e.comment.diff_hunk,commitId:e.comment.commit_id}}}case`workflow_dispatch`:return{type:`workflow_dispatch`,inputs:{prompt:t.inputs?.prompt??void 0}};case`schedule`:return{type:`schedule`,schedule:t.schedule??void 0};case`unsupported`:return{type:`unsupported`}}}function Co(e){let t=pi,n=xo(t.eventName),r=So(n,t.payload);return e.debug(`Parsed GitHub context`,{eventName:t.eventName,eventType:n,repo:`${t.repo.owner}/${t.repo.repo}`}),{eventName:t.eventName,eventType:n,repo:t.repo,ref:t.ref,sha:t.sha,runId:t.runId,actor:t.actor,payload:t.payload,event:r}}function wo(e,t){try{JSON.parse(e)}catch{throw Error(`${t} must be valid JSON`)}}function To(e,t){let n=e.trim();if(!/^\d+$/.test(n))throw Error(`${t} must be a positive integer, received: ${e}`);let r=Number.parseInt(n,10);if(r===0)throw Error(`${t} must be a positive integer, received: ${e}`);return r}function Eo(e){let t=e.trim(),n=t.indexOf(`/`);if(n===-1)throw Error(`Invalid model format: "${e}". Expected "provider/model" (e.g., "anthropic/claude-sonnet-4-20250514")`);let r=t.slice(0,n).trim(),i=t.slice(n+1).trim();if(r.length===0)throw Error(`Invalid model format: "${e}". Provider cannot be empty.`);if(i.length===0)throw Error(`Invalid model format: "${e}". Model ID cannot be empty.`);return{providerID:r,modelID:i}}function Do(e){let t=e.trim();if(!/^\d+$/.test(t))throw Error(`timeout must be a non-negative integer, received: ${e}`);let n=Number.parseInt(t,10);if(Number.isNaN(n)||n<0)throw Error(`timeout must be a non-negative integer, received: ${e}`);return n}const Oo=[`claude`,`claude-max20`,`copilot`,`gemini`,`openai`,`opencode-zen`,`zai-coding-plan`];function ko(e){let t=e.split(`,`).map(e=>e.trim().toLowerCase()).filter(e=>e.length>0),n=`no`,r=`no`,i=`no`,a=`no`,o=`no`,s=`no`;for(let e of t){if(!Oo.includes(e))throw Error(`Invalid omo-providers value: "${e}". Valid values: ${Oo.join(`, `)}`);switch(e){case`claude`:n=`yes`;break;case`claude-max20`:n=`max20`;break;case`copilot`:r=`yes`;break;case`gemini`:i=`yes`;break;case`openai`:a=`yes`;break;case`opencode-zen`:o=`yes`;break;case`zai-coding-plan`:s=`yes`;break}}return{claude:n,copilot:r,gemini:i,openai:a,opencodeZen:o,zaiCodingPlan:s}}function Ao(){try{let e=h(`github-token`,{required:!0}).trim();if(e.length===0)return _a(Error(`github-token is required but was not provided`));let t=h(`auth-json`,{required:!0}).trim();if(t.length===0)return _a(Error(`auth-json is required but was not provided`));wo(t,`auth-json`);let n=h(`prompt`).trim(),r=n.length>0?n:null,i=h(`session-retention`).trim(),a=i.length>0?To(i,`session-retention`):ee,o=h(`s3-backup`).trim().toLowerCase()===`true`,s=h(`s3-bucket`).trim(),c=s.length>0?s:null,l=h(`aws-region`).trim(),u=l.length>0?l:null,d=h(`agent`).trim(),f=d.length>0?d:O,p=h(`model`).trim(),m=p.length>0?Eo(p):null,g=h(`timeout`).trim(),_=g.length>0?Do(g):fe,v=h(`opencode-version`).trim(),y=v.length>0?v:k,b=h(`skip-cache`).trim().toLowerCase()===`true`,x=h(`omo-version`).trim(),S=x.length>0?x:A,C=h(`omo-providers`).trim();return ga({githubToken:e,authJson:t,prompt:r,sessionRetention:a,s3Backup:o,s3Bucket:c,awsRegion:u,agent:f,model:m,timeoutMs:_,opencodeVersion:y,skipCache:b,omoVersion:S,omoProviders:ko(C.length>0?C:se)})}catch(e){return _a(e instanceof Error?e:Error(String(e)))}}function jo(e){switch(e){case`hit`:return`âœ… hit`;case`miss`:return`ðŸ†• miss`;case`corrupted`:return`âš ï¸ corrupted (clean start)`}}function Mo(e){let t=Math.round(e/1e3);return t<60?`${t}s`:`${Math.floor(t/60)}m ${t%60}s`}async function No(e,n){let{eventType:r,repo:i,ref:a,runId:o,runUrl:s,metrics:c,agent:u}=e;try{if(l.addHeading(`Fro Bot Agent Run`,2).addTable([[{data:`Field`,header:!0},{data:`Value`,header:!0}],[`Event`,r],[`Repository`,i],[`Ref`,a],[`Run ID`,`[${o}](${s})`],[`Agent`,u],[`Cache Status`,jo(c.cacheStatus)],[`Duration`,c.duration==null?`N/A`:Mo(c.duration)]]),(c.sessionsUsed.length>0||c.sessionsCreated.length>0)&&(l.addHeading(`Sessions`,3),c.sessionsUsed.length>0&&l.addRaw(`**Used:** ${c.sessionsUsed.join(`, `)}\n`),c.sessionsCreated.length>0&&l.addRaw(`**Created:** ${c.sessionsCreated.join(`, `)}\n`)),c.tokenUsage!=null&&(l.addHeading(`Token Usage`,3),l.addTable([[{data:`Metric`,header:!0},{data:`Count`,header:!0}],[`Input`,c.tokenUsage.input.toLocaleString()],[`Output`,c.tokenUsage.output.toLocaleString()],[`Reasoning`,c.tokenUsage.reasoning.toLocaleString()],[`Cache Read`,c.tokenUsage.cache.read.toLocaleString()],[`Cache Write`,c.tokenUsage.cache.write.toLocaleString()]]),c.model!=null&&l.addRaw(`**Model:** ${c.model}\n`),c.cost!=null&&l.addRaw(`**Cost:** $${c.cost.toFixed(4)}\n`)),(c.prsCreated.length>0||c.commitsCreated.length>0||c.commentsPosted>0)&&(l.addHeading(`Created Artifacts`,3),c.prsCreated.length>0&&l.addList([...c.prsCreated]),c.commitsCreated.length>0&&l.addList(c.commitsCreated.map(e=>`Commit \`${e.slice(0,7)}\``)),c.commentsPosted>0&&l.addRaw(`**Comments Posted:** ${c.commentsPosted}\n`)),c.errors.length>0){l.addHeading(`Errors`,3);for(let e of c.errors){let t=e.recoverable?`ðŸ”„ Recovered`:`âŒ Failed`;l.addRaw(`- **${e.type}** (${t}): ${e.message}\n`)}}await l.write(),n.debug(`Wrote job summary`)}catch(e){let r=t(e);n.warning(`Failed to write job summary`,{error:r}),x(`Failed to write job summary: ${r}`)}}function Po(){let e=0,t=null,n=`miss`,r=[],i=[],a=[],o=[],s=0,c=null,l=null,u=null,d=[];return{start(){e=Date.now()},end(){t=Date.now()},setCacheStatus(e){n=e},addSessionUsed(e){r.includes(e)||r.push(e)},addSessionCreated(e){i.includes(e)||i.push(e)},addPRCreated(e){a.includes(e)||a.push(e)},addCommitCreated(e){o.includes(e)||o.push(e)},incrementComments(){s++},setTokenUsage(e,t,n){c=e,l=t,u=n},recordError(e,t,n){d.push({timestamp:new Date().toISOString(),type:e,message:t,recoverable:n})},getMetrics(){let f=t==null?Date.now()-e:t-e;return Object.freeze({startTime:e,endTime:t,duration:f,cacheStatus:n,sessionsUsed:Object.freeze([...r]),sessionsCreated:Object.freeze([...i]),prsCreated:Object.freeze([...a]),commitsCreated:Object.freeze([...o]),commentsPosted:s,tokenUsage:c,model:l,cost:u,errors:Object.freeze([...d])})}}}function Fo(e){n(`session-id`,e.sessionId??``),n(`cache-status`,e.cacheStatus),n(`duration`,e.duration)}function X(){let e=R.env.XDG_DATA_HOME??L.join(Ae.homedir(),`.local`,`share`);return L.join(e,`opencode`,`storage`)}async function Io(e){try{let t=await V.readFile(e,`utf8`);return JSON.parse(t)}catch{return null}}async function Lo(e){try{let t=await V.readdir(e,{withFileTypes:!0}),n=[];for(let r of t)if(r.isFile()&&r.name.endsWith(`.json`)){let t=await Io(L.join(e,r.name));t!=null&&n.push(t)}return n}catch{return[]}}function Z(e){return typeof e==`object`&&!!e}function Q(e){return typeof e==`string`?e:null}function $(e){return typeof e==`number`?e:null}function Ro(e){return typeof e==`boolean`?e:null}function zo(e){if(!Array.isArray(e))return;let t=[];for(let n of e){if(!Z(n))continue;let e=Q(n.file)??``,r=$(n.additions)??0,i=$(n.deletions)??0;t.push({file:e,additions:r,deletions:i})}return t}function Bo(e){if(Z(e))return{additions:$(e.additions)??0,deletions:$(e.deletions)??0,files:$(e.files)??0,diffs:zo(e.diffs)}}function Vo(e){if(!Z(e))return;let t=Q(e.url);if(t!=null)return{url:t}}function Ho(e){return Z(e)?{created:$(e.created)??0,updated:$(e.updated)??0,compacting:$(e.compacting)??void 0,archived:$(e.archived)??void 0}:{created:0,updated:0}}function Uo(e){return Z(e)?{id:Q(e.id)??``,version:Q(e.version)??``,projectID:Q(e.projectID)??Q(e.projectId)??``,directory:Q(e.directory)??``,parentID:Q(e.parentID)??Q(e.parentId)??void 0,title:Q(e.title)??``,time:Ho(e.time),summary:Bo(e.summary),share:Vo(e.share),permission:Z(e.permission)?{rules:Array.isArray(e.permission.rules)?e.permission.rules:[]}:void 0,revert:Z(e.revert)?{messageID:Q(e.revert.messageID)??Q(e.revert.messageId)??``,partID:Q(e.revert.partID)??Q(e.revert.partId)??void 0,snapshot:Q(e.revert.snapshot)??void 0,diff:Q(e.revert.diff)??void 0}:void 0}:{id:``,version:``,projectID:``,directory:``,title:``,time:{created:0,updated:0}}}function Wo(e){let t=Z(e.model)?e.model:null,n=Q(t?.providerID)??Q(t?.providerId)??Q(e.providerID)??Q(e.providerId)??``,r=Q(t?.modelID)??Q(t?.modelId)??Q(e.modelID)??Q(e.modelId)??``,i=Z(e.summary)?{title:Q(e.summary.title)??void 0,body:Q(e.summary.body)??void 0,diffs:zo(e.summary.diffs)??[]}:void 0;return{id:Q(e.id)??``,sessionID:Q(e.sessionID)??Q(e.sessionId)??``,role:`user`,time:{created:$(Z(e.time)?e.time.created:null)??0},summary:i,agent:Q(e.agent)??``,model:{providerID:n,modelID:r},system:Q(e.system)??void 0,tools:Z(e.tools)?e.tools:void 0,variant:Q(e.variant)??void 0}}function Go(e){let t=Z(e.time)?e.time:null,n=Z(e.tokens)?e.tokens:null,r=Z(n?.cache)?n?.cache:null,i=Z(e.path)?e.path:null;return{id:Q(e.id)??``,sessionID:Q(e.sessionID)??Q(e.sessionId)??``,role:`assistant`,time:{created:$(t?.created)??0,completed:$(t?.completed)??void 0},parentID:Q(e.parentID)??Q(e.parentId)??``,modelID:Q(e.modelID)??Q(e.modelId)??``,providerID:Q(e.providerID)??Q(e.providerId)??``,mode:Q(e.mode)??``,agent:Q(e.agent)??``,path:{cwd:Q(i?.cwd)??``,root:Q(i?.root)??``},summary:Ro(e.summary)??void 0,cost:$(e.cost)??0,tokens:{input:$(n?.input)??0,output:$(n?.output)??0,reasoning:$(n?.reasoning)??0,cache:{read:$(r?.read)??0,write:$(r?.write)??0}},finish:Q(e.finish)??void 0,error:Z(e.error)?{name:Q(e.error.name)??``,message:Q(e.error.message)??``}:void 0}}function Ko(e){return Z(e)?Q(e.role)===`assistant`?Go(e):Wo(e):{id:``,sessionID:``,role:`user`,time:{created:0},agent:``,model:{providerID:``,modelID:``}}}function qo(e){let t=Ko(e);if(!Z(e))return t;let n=Array.isArray(e.parts)?e.parts.map(Xo):void 0;return n==null||n.length===0?t:{...t,parts:n}}function Jo(e){return{id:Q(e.id)??``,sessionID:Q(e.sessionID)??Q(e.sessionId)??``,messageID:Q(e.messageID)??Q(e.messageId)??``}}function Yo(e){let t=Q(e.status)??`pending`;if(t===`completed`){let t=Z(e.time)?e.time:null;return{status:`completed`,input:Z(e.input)?e.input:{},output:Q(e.output)??``,title:Q(e.title)??``,metadata:Z(e.metadata)?e.metadata:{},time:{start:$(t?.start)??0,end:$(t?.end)??0,compacted:$(t?.compacted)??void 0},attachments:void 0}}if(t===`running`){let t=Z(e.time)?e.time:null;return{status:`running`,input:Z(e.input)?e.input:{},time:{start:$(t?.start)??0}}}if(t===`error`){let t=Z(e.time)?e.time:null;return{status:`error`,input:Z(e.input)?e.input:{},error:Q(e.error)??``,time:{start:$(t?.start)??0,end:$(t?.end)??0}}}return{status:`pending`}}function Xo(e){if(!Z(e))return{id:``,sessionID:``,messageID:``,type:`text`,text:``};let t=Jo(e);switch(Q(e.type)){case`text`:return{...t,type:`text`,text:Q(e.text)??``,synthetic:Ro(e.synthetic)??void 0,ignored:Ro(e.ignored)??void 0,time:Z(e.time)?{start:$(e.time.start)??0,end:$(e.time.end)??void 0}:void 0,metadata:Z(e.metadata)?e.metadata:void 0};case`tool`:{let n=Z(e.state)?e.state:{status:`pending`};return{...t,type:`tool`,callID:Q(e.callID)??Q(e.callId)??``,tool:Q(e.tool)??``,state:Yo(n),metadata:Z(e.metadata)?e.metadata:void 0}}case`reasoning`:return{...t,type:`reasoning`,reasoning:Q(e.reasoning)??``,time:Z(e.time)?{start:$(e.time.start)??0,end:$(e.time.end)??void 0}:void 0};case`step-finish`:{let n=Z(e.tokens)?e.tokens:null,r=Z(n?.cache)?n?.cache:null;return{...t,type:`step-finish`,reason:Q(e.reason)??``,snapshot:Q(e.snapshot)??void 0,cost:$(e.cost)??0,tokens:{input:$(n?.input)??0,output:$(n?.output)??0,reasoning:$(n?.reasoning)??0,cache:{read:$(r?.read)??0,write:$(r?.write)??0}}}}default:return{...t,type:`text`,text:Q(e.text)??``}}}async function Zo(e,t,n){let r=await e.session.list({query:{directory:t}});return r.error==null&&r.data!=null?Array.isArray(r.data)?r.data.map(Uo):[]:(n.warning(`SDK session list failed`,{error:String(r.error)}),[])}async function Qo(e,t,n){let r=await e.session.messages({path:{id:t}});return r.error==null&&r.data!=null?Array.isArray(r.data)?[...r.data.map(qo)].sort((e,t)=>e.time.created-t.time.created):[]:(n.warning(`SDK session messages failed`,{error:String(r.error)}),[])}async function $o(e,t,n,r){let i=await e.session.list({query:{directory:t,start:n,roots:!0,limit:10}});if(i.error!=null||i.data==null)return r.warning(`SDK session list failed`,{error:String(i.error)}),null;if(!Array.isArray(i.data)||i.data.length===0)return null;let a=i.data.map(Uo);if(a.length===0)return null;let o=a.reduce((e,t)=>t.time.created>e.time.created?t:e);return{projectID:o.projectID,session:o}}async function es(e,t,n){let r=await e.session.delete({path:{id:t}});return r.error==null?(n.debug(`Deleted session via SDK`,{sessionID:t}),0):(n.warning(`SDK session delete failed`,{sessionID:t,error:String(r.error)}),0)}async function ts(e){let t=X(),n=L.join(t,`project`);return e.debug(`Listing projects`,{projectDir:n}),Lo(n)}async function ns(e,t){let n=await ts(t);for(let t of n)if(t.worktree===e)return t;return null}async function rs(e,t,n){if(e.type===`sdk`)return Zo(e.client,e.workspacePath,n);let r=X(),i=L.join(r,`session`,t);return n.debug(`Listing sessions for project`,{projectID:t,sessionDir:i}),Lo(i)}async function is(e,t,n){if(e.type===`sdk`)return Qo(e.client,t,n);let r=X(),i=L.join(r,`message`,t);return n.debug(`Reading session messages`,{sessionID:t,messageDir:i}),[...await Lo(i)].sort((e,t)=>e.time.created-t.time.created)}async function as(e,t,n){if(e.type===`sdk`)return[];let r=X(),i=L.join(r,`part`,t);return n.debug(`Reading message parts`,{messageID:t,partDir:i}),Lo(i)}async function os(e){try{let t=await V.stat(e);return await V.unlink(e),t.size}catch{return 0}}async function ss(e){let t=0;try{let n=await V.readdir(e,{withFileTypes:!0});for(let r of n){let n=L.join(e,r.name);if(r.isDirectory())t+=await ss(n);else{let e=await V.stat(n);t+=e.size}}await V.rm(e,{recursive:!0,force:!0})}catch{}return t}async function cs(e,t,n,r){if(e.type===`sdk`)return es(e.client,n,r);let i=X(),a=0,o=await is({type:`json`,workspacePath:``},n,r);for(let e of o){let t=L.join(i,`part`,e.id);a+=await ss(t)}let s=L.join(i,`message`,n);a+=await ss(s);let c=L.join(i,`session`,t,`${n}.json`);a+=await os(c);let l=L.join(i,`todo`,`${n}.json`);a+=await os(l);let u=L.join(i,`session_diff`,`${n}.json`);return a+=await os(u),r.debug(`Deleted session`,{sessionID:n,freedBytes:a}),a}async function ls(e,t,n){if(e.type===`sdk`)return $o(e.client,e.workspacePath,t,n);let r=await ts(n),i=null;for(let a of r){let r=await rs(e,a.id,n);for(let e of r)e.time.created<=t||(i==null||e.time.created>i.session.time.created)&&(i={projectID:a.id,session:e})}return i!=null&&n.debug(`Found latest session`,{sessionId:i.session.id,projectId:i.projectID,createdAt:i.session.time.created}),i}const us={maxSessions:50,maxAgeDays:30};async function ds(e,n,r){let{maxSessions:i,maxAgeDays:a}=n,{workspacePath:o}=e;r.info(`Starting session pruning`,{workspacePath:o,maxSessions:i,maxAgeDays:a});let s=await ns(o,r);if(s==null)return r.debug(`No project found for pruning`,{workspacePath:o}),{prunedCount:0,prunedSessionIds:[],remainingCount:0,freedBytes:0};let c=await rs(e,s.id,r),l=c.filter(e=>e.parentID==null);if(l.length===0)return{prunedCount:0,prunedSessionIds:[],remainingCount:0,freedBytes:0};let u=[...l].sort((e,t)=>t.time.updated-e.time.updated),d=new Date;d.setDate(d.getDate()-a);let f=d.getTime(),p=new Set;for(let e of u)e.time.updated>=f&&p.add(e.id);for(let e=0;e<Math.min(i,u.length);e++){let t=u[e];t!=null&&p.add(t.id)}let m=u.filter(e=>!p.has(e.id)),h=new Set;for(let e of m){h.add(e.id);for(let t of c)t.parentID===e.id&&h.add(t.id)}if(h.size===0)return r.info(`No sessions to prune`),{prunedCount:0,prunedSessionIds:[],remainingCount:l.length,freedBytes:0};let g=0,_=[];for(let n of h)try{let t=await cs(e,s.id,n,r);g+=t,_.push(n),r.debug(`Pruned session`,{sessionId:n,bytes:t})}catch(e){r.warning(`Failed to prune session`,{sessionId:n,error:t(e)})}let v=l.length-m.length;return r.info(`Session pruning complete`,{prunedCount:_.length,remainingCount:v,freedBytes:g}),{prunedCount:_.length,prunedSessionIds:_,remainingCount:v,freedBytes:g}}async function fs(e,t,n){let{limit:r,fromDate:i,toDate:a}=t;n.debug(`Listing sessions`,{directory:e.workspacePath,limit:r});let o=e.type===`sdk`?{id:``,worktree:e.workspacePath}:await ns(e.workspacePath,n);if(o==null)return n.debug(`No project found for directory`,{directory:e.workspacePath}),[];let s=[...(await rs(e,o.id,n)).filter(e=>!(e.parentID!=null||i!=null&&e.time.created<i.getTime()||a!=null&&e.time.created>a.getTime()))].sort((e,t)=>t.time.updated-e.time.updated),c=[],l=r==null?s:s.slice(0,r);for(let t of l){let r=await is(e,t.id,n),i=ps(r);c.push({id:t.id,projectID:t.projectID,directory:t.directory,title:t.title,createdAt:t.time.created,updatedAt:t.time.updated,messageCount:r.length,agents:i,isChild:!1})}return n.info(`Listed sessions`,{count:c.length,directory:e.workspacePath}),c}function ps(e){let t=new Set;for(let n of e)n.agent!=null&&t.add(n.agent);return[...t]}async function ms(e,t,n,r){let{limit:i=20,caseSensitive:a=!1,sessionId:o}=n;r.debug(`Searching sessions`,{query:e,directory:t.workspacePath,limit:i,caseSensitive:a});let s=a?e:e.toLowerCase(),c=[],l=0;if(o!=null){let e=await hs(t,o,s,a,r);return e.length>0&&c.push({sessionId:o,matches:e.slice(0,i)}),c}let u=await fs(t,{},r);for(let e of u){if(l>=i)break;let n=await hs(t,e.id,s,a,r);if(n.length>0){let t=i-l;c.push({sessionId:e.id,matches:n.slice(0,t)}),l+=Math.min(n.length,t)}}return r.info(`Session search complete`,{query:e,resultCount:c.length,totalMatches:l}),c}async function hs(e,t,n,r,i){let a=await is(e,t,i),o=[];for(let t of a){let a=t.parts??await as(e,t.id,i);for(let e of a){let i=gs(e);if(i==null)continue;let a=r?i:i.toLowerCase();if(a.includes(n)){let r=a.indexOf(n),s=Math.max(0,r-50),c=Math.min(i.length,r+n.length+50),l=i.slice(s,c);o.push({messageId:t.id,partId:e.id,excerpt:`...${l}...`,role:t.role,agent:t.agent})}}}return o}function gs(e){switch(e.type){case`text`:return e.text;case`reasoning`:return e.reasoning;case`tool`:return e.state.status===`completed`?`${e.tool}: ${e.state.output}`:null;case`step-finish`:return null}}function _s(e){let t=``;for(let n=0;n<e;n++)t+=`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`.charAt(Math.floor(Math.random()*62));return t}function vs(e){let t=[`--- Fro Bot Run Summary ---`,`Event: ${e.eventType}`,`Repo: ${e.repo}`,`Ref: ${e.ref}`,`Run ID: ${e.runId}`,`Cache: ${e.cacheStatus}`,`Duration: ${e.duration}s`];return e.sessionIds.length>0&&t.push(`Sessions used: ${e.sessionIds.join(`, `)}`),e.createdPRs.length>0&&t.push(`PRs created: ${e.createdPRs.join(`, `)}`),e.createdCommits.length>0&&t.push(`Commits: ${e.createdCommits.join(`, `)}`),e.tokenUsage!=null&&t.push(`Tokens: ${e.tokenUsage.input} in / ${e.tokenUsage.output} out`),t.join(`
`)}async function ys(e,t,n,r){let i=vs(t);n.type===`sdk`&&await bs(e,i,n,r)||await xs(e,i,r)}async function bs(e,n,r,i){try{let t=await r.client.session.prompt({path:{id:e},body:{noReply:!0,parts:[{type:`text`,text:n}]}});return t.error==null?(i.info(`Session summary written via SDK`,{sessionId:e}),!0):(i.warning(`SDK prompt writeback failed, falling back to JSON`,{sessionId:e,error:String(t.error)}),!1)}catch(n){return i.warning(`SDK prompt writeback failed, falling back to JSON`,{sessionId:e,error:t(n)}),!1}}async function xs(e,n,r){let i=X(),a=L.join(i,`message`,e),o=L.join(i,`part`),s=Date.now(),c=`msg_${s.toString(16)}${_s(14)}`,l=`prt_${s.toString(16)}${_s(14)}`,u={id:c,sessionID:e,role:`user`,time:{created:s},summary:{title:`GitHub Action Run Summary`,diffs:[]},agent:`fro-bot`,model:{providerID:`system`,modelID:`run-summary`}},d={id:l,sessionID:e,messageID:c,type:`text`,text:n,time:{start:s,end:s}};try{await V.mkdir(a,{recursive:!0}),await V.mkdir(L.join(o,c),{recursive:!0});let t=L.join(a,`${c}.json`),n=L.join(o,c,`${l}.json`);await V.writeFile(t,JSON.stringify(u,null,2),`utf8`),await V.writeFile(n,JSON.stringify(d,null,2),`utf8`),r.info(`Session summary written`,{sessionId:e,messageId:c})}catch(n){r.warning(`Failed to write session summary`,{sessionId:e,error:t(n)})}}const Ss=/^[0-9a-f]{40}$/i;function Cs(){return{exec:s,getExecOutput:b}}async function ws(e){let{workspacePath:n,logger:r,execAdapter:i=Cs()}=e,a=L.join(n,`.git`),o=L.join(a,`opencode`);try{let e=(await V.readFile(o,`utf8`)).trim();if(e.length>0){if(Ss.test(e))return r.debug(`Project ID loaded from cache`,{projectId:e}),{projectId:e,source:`cached`};r.warning(`Invalid cached project ID format, regenerating`,{cachedId:e})}}catch(e){r.debug(`No cached project ID found`,{error:t(e)})}try{if((await V.stat(a)).isDirectory()===!1){let e=await V.readFile(a,`utf8`),t=/^gitdir: (.+)$/m.exec(e);if(t==null)return{projectId:null,source:`error`,error:`Invalid .git file format`};a=L.resolve(n,t[1]),o=L.join(a,`opencode`)}}catch{return{projectId:null,source:`error`,error:`Not a git repository`}}try{let{stdout:e,exitCode:a}=await i.getExecOutput(`git`,[`rev-list`,`--max-parents=0`,`--all`],{cwd:n,silent:!0});if(a!==0||e.trim().length===0)return{projectId:null,source:`error`,error:`No commits found in repository`};let s=e.trim().split(`
`).map(e=>e.trim()).filter(e=>e.length>0).sort();if(s.length===0)return{projectId:null,source:`error`,error:`No root commits found`};let c=s[0];try{await V.writeFile(o,c,`utf8`),r.info(`Project ID generated and cached`,{projectId:c,source:`generated`})}catch(e){r.warning(`Failed to cache project ID (continuing)`,{error:t(e)})}return{projectId:c,source:`generated`}}catch(e){return{projectId:null,source:`error`,error:t(e)}}}const Ts={botLogin:null,requireMention:!0,allowedAssociations:va,skipDraftPRs:!0,promptInput:null};function Es(e,t){if(t.length===0)return!1;let n=t.replace(/\[bot\]$/i,``);return n.length===0?!1:new RegExp(String.raw`@${Ds(n)}(?:\[bot\])?(?:$|[^\w])`,`i`).test(e)}function Ds(e){return e.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`)}function Os(e,t){if(t.length===0)return null;let n=t.replace(/\[bot\]$/i,``);if(n.length===0)return null;let r=new RegExp(String.raw`@${Ds(n)}(?:\[bot\])?\s*(.*)`,`is`).exec(e)?.[1];if(r==null)return null;let i=r.trim();if(i.length===0)return{raw:``,action:null,args:``};let a=i.split(/\s+/),o=a[0]??``;return{raw:i,action:o===``?null:o,args:a.slice(1).join(` `)}}function ks(e,t){return t.includes(e)}function As(e){return e.endsWith(`[bot]`)}function js(e,t){if(t==null||t===``||e==null)return{hasMention:!1,command:null};let n=Es(e,t);return{hasMention:n,command:n?Os(e,t):null}}function Ms(e,t){if(e.type!==`issue_comment`)throw Error(`Event type must be issue_comment`);let n={login:e.comment.author,association:e.comment.authorAssociation,isBot:As(e.comment.author)},r={kind:e.issue.isPullRequest?`pr`:`issue`,number:e.issue.number,title:e.issue.title,body:e.comment.body??null,locked:e.issue.locked},i=e.comment.body,a=e.comment.id,{hasMention:o,command:s}=js(i,t);return{author:n,target:r,commentBody:i,commentId:a,hasMention:o,command:s,action:e.action}}function Ns(e,t){if(e.type!==`discussion_comment`)throw Error(`Event type must be discussion_comment`);let n={login:e.comment.author,association:e.comment.authorAssociation,isBot:As(e.comment.author)},r={kind:`discussion`,number:e.discussion.number,title:e.discussion.title,body:e.comment.body??e.discussion.body??null,locked:e.discussion.locked},i=e.comment.body??null,a=e.comment.id,{hasMention:o,command:s}=js(i,t);return{author:n,target:r,commentBody:i,commentId:a,hasMention:o,command:s,action:e.action}}function Ps(e,t,n){if(e.type!==`workflow_dispatch`)throw Error(`Event type must be workflow_dispatch`);let r=(n??e.inputs?.prompt??``).trim();return{author:{login:t,association:`OWNER`,isBot:!1},target:{kind:`manual`,number:0,title:`Manual workflow dispatch`,body:r===``?null:r,locked:!1},commentBody:r===``?null:r,commentId:null,hasMention:!1,command:null,action:null}}function Fs(e,t){if(e.type!==`issues`)throw Error(`Event type must be issues`);let n={login:e.sender.login,association:e.issue.authorAssociation,isBot:As(e.sender.login)},r={kind:`issue`,number:e.issue.number,title:e.issue.title,body:e.issue.body,locked:e.issue.locked},{hasMention:i,command:a}=js(e.issue.body??``,t);return{author:n,target:r,commentBody:e.issue.body,commentId:null,hasMention:i,command:a,action:e.action}}const Is=[`opened`,`edited`];function Ls(e){return Is.includes(e)}function Rs(e,t,n){let r=e.action;return r==null||!Ls(r)?(n.debug(`Skipping unsupported issues action`,{action:r}),{shouldSkip:!0,reason:`action_not_supported`,message:`Issues action '${r}' is not supported (only 'opened' and 'edited')`}):e.author!=null&&e.author.isBot?(n.debug(`Skipping bot actor`,{bot:e.author.login}),{shouldSkip:!0,reason:`self_comment`,message:`Issues from bots (${e.author.login}) are not processed`}):e.author!=null&&!ks(e.author.association,t.allowedAssociations)?(n.debug(`Skipping unauthorized author`,{association:e.author.association,allowed:t.allowedAssociations}),{shouldSkip:!0,reason:`unauthorized_author`,message:`Author association '${e.author.association}' is not authorized`}):r===`edited`&&!e.hasMention?(n.debug(`Skipping issues.edited without bot mention`),{shouldSkip:!0,reason:`no_mention`,message:`Issue edit does not mention the bot`}):e.target?.locked===!0?(n.debug(`Skipping locked issue`),{shouldSkip:!0,reason:`issue_locked`,message:`Issue is locked`}):{shouldSkip:!1}}function zs(e,t){if(e.type!==`pull_request`)throw Error(`Event type must be pull_request`);let n={login:e.sender.login,association:e.pullRequest.authorAssociation,isBot:As(e.sender.login)},r={kind:`pr`,number:e.pullRequest.number,title:e.pullRequest.title,body:e.pullRequest.body,locked:e.pullRequest.locked,isDraft:e.pullRequest.draft},{hasMention:i,command:a}=js(e.pullRequest.body??``,t);return{author:n,target:r,commentBody:e.pullRequest.body,commentId:null,hasMention:i,command:a,action:e.action}}const Bs=[`opened`,`synchronize`,`reopened`];function Vs(e){return Bs.includes(e)}function Hs(e,t,n){let r=e.action;return r==null||!Vs(r)?(n.debug(`Skipping unsupported pull_request action`,{action:r}),{shouldSkip:!0,reason:`action_not_supported`,message:`Pull request action '${r}' is not supported`}):e.author!=null&&e.author.isBot?(n.debug(`Skipping bot actor`,{bot:e.author.login}),{shouldSkip:!0,reason:`self_comment`,message:`Pull requests from bots (${e.author.login}) are not processed`}):e.author!=null&&!ks(e.author.association,t.allowedAssociations)?(n.debug(`Skipping unauthorized author`,{association:e.author.association,allowed:t.allowedAssociations}),{shouldSkip:!0,reason:`unauthorized_author`,message:`Author association '${e.author.association}' is not authorized`}):t.skipDraftPRs&&e.target?.isDraft===!0?(n.debug(`Skipping draft PR`),{shouldSkip:!0,reason:`draft_pr`,message:`Pull request is a draft`}):e.target?.locked===!0?(n.debug(`Skipping locked pull request`),{shouldSkip:!0,reason:`issue_locked`,message:`Pull request is locked`}):{shouldSkip:!1}}function Us(e,t){if(e.type!==`pull_request_review_comment`)throw Error(`Event type must be pull_request_review_comment`);let n={login:e.comment.author,association:e.comment.authorAssociation,isBot:As(e.comment.author)},r={kind:`pr`,number:e.pullRequest.number,title:e.pullRequest.title,body:e.comment.body,locked:e.pullRequest.locked,path:e.comment.path,line:e.comment.line??void 0,diffHunk:e.comment.diffHunk,commitId:e.comment.commitId},{hasMention:i,command:a}=js(e.comment.body,t);return{author:n,target:r,commentBody:e.comment.body,commentId:e.comment.id,hasMention:i,command:a,action:e.action}}function Ws(e,t,n){let r=n?.trim()??``;return{author:{login:t,association:`OWNER`,isBot:!1},target:{kind:`manual`,number:0,title:`Scheduled workflow`,body:r===``?null:r,locked:!1},commentBody:r===``?null:r,commentId:null,hasMention:!1,command:null,action:null}}function Gs(e,t){return(e.promptInput?.trim()??``)===``?(t.debug(`Skipping schedule event without prompt input`),{shouldSkip:!0,reason:`prompt_required`,message:`Schedule trigger requires prompt input`}):{shouldSkip:!1}}function Ks(e,t){return(e.commentBody?.trim()??``)===``?(t.debug(`Skipping workflow_dispatch event without prompt input`),{shouldSkip:!0,reason:`prompt_required`,message:`Workflow dispatch requires prompt input`}):{shouldSkip:!1}}function qs(e,t,n,r){let{targetLabel:i,actionLabel:a}=r;return e.action===`created`?e.target?.locked===!0?(n.debug(`Skipping locked ${i}`),{shouldSkip:!0,reason:`issue_locked`,message:`${i} is locked`}):e.author!=null&&e.author.isBot?(n.debug(`Skipping bot actor`,{bot:e.author.login}),{shouldSkip:!0,reason:`self_comment`,message:`Comments from bots (${e.author.login}) are not processed`}):e.author!=null&&!ks(e.author.association,t.allowedAssociations)?(n.debug(`Skipping unauthorized author`,{association:e.author.association,allowed:t.allowedAssociations}),{shouldSkip:!0,reason:`unauthorized_author`,message:`Author association '${e.author.association}' is not authorized`}):t.requireMention&&!e.hasMention?(n.debug(`Skipping ${a} without bot mention`),{shouldSkip:!0,reason:`no_mention`,message:`Comment does not mention the bot`}):{shouldSkip:!1}:(n.debug(`Skipping non-created ${a} action`,{action:e.action}),{shouldSkip:!0,reason:`action_not_created`,message:`${a} action is '${e.action}', not 'created'`})}function Js(e,t,n){return qs(e,t,n,{targetLabel:`Issue or PR`,actionLabel:`Comment`})}function Ys(e,t,n){return qs(e,t,n,{targetLabel:`Discussion`,actionLabel:`Discussion comment`})}function Xs(e,t,n){let r=e.action;return r===`created`?e.target?.locked===!0?(n.debug(`Skipping locked pull request`),{shouldSkip:!0,reason:`issue_locked`,message:`Pull request is locked`}):e.author!=null&&e.author.isBot?(n.debug(`Skipping bot actor`,{bot:e.author.login}),{shouldSkip:!0,reason:`self_comment`,message:`Review comments from bots (${e.author.login}) are not processed`}):e.author!=null&&!ks(e.author.association,t.allowedAssociations)?(n.debug(`Skipping unauthorized author`,{association:e.author.association,allowed:t.allowedAssociations}),{shouldSkip:!0,reason:`unauthorized_author`,message:`Author association '${e.author.association}' is not authorized`}):t.requireMention&&!e.hasMention?(n.debug(`Skipping review comment without bot mention`),{shouldSkip:!0,reason:`no_mention`,message:`Review comment does not mention the bot`}):{shouldSkip:!1}:(n.debug(`Skipping non-created review comment action`,{action:r}),{shouldSkip:!0,reason:`action_not_created`,message:`Review comment action '${r}' is not supported (only 'created')`})}function Zs(e,t,n){if(e.eventType===`unsupported`)return n.debug(`Skipping unsupported event`,{eventName:e.eventName}),{shouldSkip:!0,reason:`unsupported_event`,message:`Unsupported event type: ${e.eventName}`};switch(e.eventType){case`issue_comment`:return Js(e,t,n);case`discussion_comment`:return Ys(e,t,n);case`issues`:return Rs(e,t,n);case`pull_request`:return Hs(e,t,n);case`pull_request_review_comment`:return Xs(e,t,n);case`schedule`:return Gs(t,n);case`workflow_dispatch`:return Ks(e,n);default:return{shouldSkip:!1}}}function Qs(e,t,n){let r={eventType:e.eventType,eventName:e.eventName,repo:e.repo,ref:e.ref,sha:e.sha,runId:e.runId,actor:e.actor,raw:e};switch(e.eventType){case`issue_comment`:{let n=Ms(e.event,t);return{...r,action:n.action,author:n.author,target:n.target,commentBody:n.commentBody,commentId:n.commentId,hasMention:n.hasMention,command:n.command}}case`discussion_comment`:{let n=Ns(e.event,t);return{...r,action:n.action,author:n.author,target:n.target,commentBody:n.commentBody,commentId:n.commentId,hasMention:n.hasMention,command:n.command}}case`workflow_dispatch`:{let t=Ps(e.event,e.actor,n);return{...r,action:t.action,author:t.author,target:t.target,commentBody:t.commentBody,commentId:t.commentId,hasMention:t.hasMention,command:t.command}}case`issues`:{let n=Fs(e.event,t);return{...r,action:n.action,author:n.author,target:n.target,commentBody:n.commentBody,commentId:n.commentId,hasMention:n.hasMention,command:n.command}}case`pull_request`:{let n=zs(e.event,t);return{...r,action:n.action,author:n.author,target:n.target,commentBody:n.commentBody,commentId:n.commentId,hasMention:n.hasMention,command:n.command}}case`pull_request_review_comment`:{let n=Us(e.event,t);return{...r,action:n.action,author:n.author,target:n.target,commentBody:n.commentBody,commentId:n.commentId,hasMention:n.hasMention,command:n.command}}case`schedule`:{let t=Ws(e.event,e.actor,n);return{...r,action:t.action,author:t.author,target:t.target,commentBody:t.commentBody,commentId:t.commentId,hasMention:t.hasMention,command:t.command}}case`unsupported`:return{...r,action:null,author:null,target:null,commentBody:null,commentId:null,hasMention:!1,command:null}}}function $s(e,t,n={}){let r={...Ts,...n},i=Qs(e,r.botLogin,r.promptInput);t.debug(`Routing event`,{eventName:e.eventName,eventType:e.eventType,hasMention:i.hasMention});let a=Zs(i,r,t);return a.shouldSkip?{shouldProcess:!1,skipReason:a.reason,skipMessage:a.message,context:i}:{shouldProcess:!0,context:i}}async function ec(){let e=Date.now(),t=E({phase:`bootstrap`}),n=null,o=!1,s=0,c=null,l=null,u=null,d=null,f=null,p=Po();p.start(),_(P.SHOULD_SAVE_CACHE,`false`),_(P.CACHE_SAVED,`false`);try{t.info(`Starting Fro Bot Agent`);let m=Ao();if(!m.success)return I(`Invalid inputs: ${m.error.message}`),1;let h=m.data,g=E({phase:`main`});g.info(`Action inputs parsed`,{sessionRetention:h.sessionRetention,s3Backup:h.s3Backup,hasGithubToken:h.githubToken.length>0,hasPrompt:h.prompt!=null,agent:h.agent,hasModelOverride:h.model!=null,timeoutMs:h.timeoutMs});let v=await Ia({logger:g,opencodeVersion:h.opencodeVersion});v.didSetup?g.info(`OpenCode auto-setup completed`,{version:v.version}):g.info(`OpenCode already available`,{version:v.version}),_(P.OPENCODE_VERSION,v.version),u=v.version;let y=E({phase:`context`}),b=Co(y);c=Gi({token:h.githubToken,logger:y});let x=await Ki(c,y),S=E({phase:`trigger`}),C=$s(b,S,{botLogin:x,requireMention:!0,promptInput:h.prompt});if(!C.shouldProcess)return S.info(`Skipping event`,{reason:C.skipReason,message:C.skipMessage}),Fo({sessionId:null,cacheStatus:`miss`,duration:Date.now()-e}),0;S.info(`Event routed for processing`,{eventType:C.context.eventType,hasMention:C.context.hasMention,command:C.context.command?.action??null}),_(P.SHOULD_SAVE_CACHE,`true`);let w=await at({logger:y,octokit:c,triggerContext:C.context,botLogin:x});n={repo:w.repo,commentId:w.commentId,issueNumber:w.issueNumber,issueType:w.issueType,botLogin:x};let T=E({phase:`acknowledgment`});await Ba(c,n,T);let ee={agentIdentity:`github`,repo:me(),ref:te(),os:i()},D=E({phase:`cache`}),O=r(),ne=L.join(O,`.git`,`opencode`),re=await ce({components:ee,logger:D,storagePath:a(),authPath:pe(),projectIdPath:ne,opencodeVersion:v.version}),k=re.corrupted?`corrupted`:re.hit?`hit`:`miss`;p.setCacheStatus(k),g.info(`Cache restore completed`,{cacheStatus:k,key:re.key});let A=await ws({workspacePath:O,logger:D});if(A.source===`error`?D.warning(`Failed to generate project ID (continuing)`,{error:A.error}):D.debug(`Project ID ready`,{projectId:A.projectId,source:A.source}),await ie(u)){let e=E({phase:`server-bootstrap`}),t=await Na(new AbortController().signal,e);t.success?(d=t.data,e.info(`SDK server bootstrapped for SQLite backend`)):e.warning(`SDK server bootstrap failed, falling back to JSON backend`,{error:t.error.message})}let j=E({phase:`session`});f=d==null?{type:`json`,workspacePath:O}:{type:`sdk`,workspacePath:O,client:d.client};let ae=await fs(f,{limit:10},j);j.debug(`Listed recent sessions`,{count:ae.length});let oe=w.issueTitle??w.repo,se=await ms(oe,f,{limit:5},j);j.debug(`Searched prior sessions`,{query:oe,resultCount:se.length});for(let e of se)p.addSessionUsed(e.sessionId);let le=E({phase:`attachments`}),M=w.commentBody??``,N=Ya(M);if(N.length>0){le.info(`Processing attachments`,{count:N.length});let{validated:e,skipped:t}=oo(await eo(N,h.githubToken,void 0,le),void 0,le);(e.length>0||t.length>0)&&(l=io(M,N,e,t),le.info(`Attachments processed`,{processed:e.length,skipped:t.length}))}let ue={context:w,customPrompt:h.prompt,cacheStatus:k,sessionContext:{recentSessions:ae,priorWorkContext:se},triggerContext:C.context,fileParts:l?.fileParts},de=R.env.SKIP_AGENT_EXECUTION===`true`,F,fe=Date.now();if(de)g.info(`Skipping agent execution (SKIP_AGENT_EXECUTION=true)`),F={success:!0,exitCode:0,sessionId:null,error:null,tokenUsage:null,model:null,cost:null,prsCreated:[],commitsCreated:[],commentsPosted:0,llmError:null};else{let e=await Pa(ue,E({phase:`execution`}),{agent:h.agent,model:h.model,timeoutMs:h.timeoutMs},d??void 0),t=e.sessionId;if(t==null){let e=await ls(f,fe,j);e!=null&&(t=e.session.id,j.debug(`Identified session from execution`,{sessionId:t}))}F={...e,sessionId:t}}F.sessionId!=null&&_(P.SESSION_ID,F.sessionId),o=F.success,F.sessionId!=null&&p.addSessionCreated(F.sessionId),F.tokenUsage!=null&&p.setTokenUsage(F.tokenUsage,F.model,F.cost);for(let e of F.prsCreated)p.addPRCreated(e);for(let e of F.commitsCreated)p.addCommitCreated(e);for(let e=0;e<F.commentsPosted;e++)p.incrementComments();if(F.sessionId!=null){let t={eventType:w.eventName,repo:w.repo,ref:w.ref,runId:Number(w.runId),cacheStatus:k,sessionIds:[F.sessionId],createdPRs:[...F.prsCreated],createdCommits:[...F.commitsCreated],duration:Math.round((Date.now()-e)/1e3),tokenUsage:F.tokenUsage};await ys(F.sessionId,t,f,j),j.debug(`Wrote session summary`,{sessionId:F.sessionId})}p.end();let he=Date.now()-e;if(Fo({sessionId:F.sessionId,cacheStatus:k,duration:he}),await No({eventType:w.eventName,repo:w.repo,ref:w.ref,runId:Number(w.runId),runUrl:`https://github.com/${w.repo}/actions/runs/${w.runId}`,metrics:p.getMetrics(),agent:h.agent},g),F.success)g.info(`Agent run completed successfully`,{durationMs:he});else if(F.llmError==null)s=F.exitCode,I(`Agent execution failed with exit code ${F.exitCode}`);else{g.info(`Agent failed with recoverable LLM error`,{error:F.llmError.message,type:F.llmError.type,durationMs:he});let[e,t]=w.repo.split(`/`),n={type:C.context.eventType===`discussion_comment`?`discussion`:w.issueType===`pr`?`pr`:`issue`,number:w.issueNumber??0,owner:e??``,repo:t??``};if(n.number>0&&n.owner.length>0&&n.repo.length>0){let e=mn(F.llmError),t=E({phase:`error-comment`}),r=await bo(c,n,{body:e},t);r==null?t.warning(`Failed to post LLM error comment`):(t.info(`Posted LLM error comment`,{commentUrl:r.url}),p.incrementComments())}else g.warning(`Cannot post error comment: missing target context`);s=0}}catch(n){s=1;let r=Date.now()-e,i=n instanceof Error?n.name:`UnknownError`,a=n instanceof Error?n.message:String(n);p.recordError(i,a,!1),p.end(),Fo({sessionId:null,cacheStatus:`miss`,duration:r}),n instanceof Error?(t.error(`Agent failed`,{error:n.message}),I(n.message)):(t.error(`Agent failed with unknown error`),I(`An unknown error occurred`))}finally{try{if(l!=null){let e=E({phase:`attachment-cleanup`});await to(l.tempFiles,e)}if(n!=null&&c!=null){let e=E({phase:`cleanup`});await Ka(c,n,o,e)}let e=E({phase:`prune`}),t=r(),s=await ds(f??{type:`json`,workspacePath:t},us,e);s.prunedCount>0&&e.info(`Pruned old sessions`,{pruned:s.prunedCount,remaining:s.remainingCount});let d={agentIdentity:`github`,repo:me(),ref:te(),os:i()},p=E({phase:`cache-save`}),m=L.join(t,`.git`,`opencode`);await ue({components:d,runId:v(),logger:p,storagePath:a(),authPath:pe(),projectIdPath:m,opencodeVersion:u})&&_(P.CACHE_SAVED,`true`)}catch(e){t.warning(`Cleanup failed (non-fatal)`,{error:e instanceof Error?e.message:String(e)})}finally{if(d!=null)try{d.shutdown()}catch(e){t.warning(`Server shutdown failed (non-fatal)`,{error:e instanceof Error?e.message:String(e)})}}}return s}await ec().then(e=>{R.exit(e)});export{};